
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/tilemap/CCTiledObjectGroup.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2016 Chukong Technologies Inc.
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/

/**
 * !#en Renders the TMX object group.
 * !#zh 渲染 tmx object group。
 * @class TiledObjectGroup
 * @extends Component
 */
var TiledObjectGroup = cc.Class({
  name: 'cc.TiledObjectGroup',
  // Inherits from the abstract class directly,
  // because TiledLayer not create or maintains the sgNode by itself.
  "extends": cc.Component,

  /**
   * !#en Offset position of child objects.
   * !#zh 获取子对象的偏移位置。
   * @method getPositionOffset
   * @return {Vec2}
   * @example
   * let offset = tMXObjectGroup.getPositionOffset();
   */
  getPositionOffset: function getPositionOffset() {
    return this._positionOffset;
  },

  /**
   * !#en List of properties stored in a dictionary.
   * !#zh 以映射的形式获取属性列表。
   * @method getProperties
   * @return {Object}
   * @example
   * let offset = tMXObjectGroup.getProperties();
   */
  getProperties: function getProperties() {
    this._properties;
  },

  /**
   * !#en Gets the Group name.
   * !#zh 获取组名称。
   * @method getGroupName
   * @return {String}
   * @example
   * let groupName = tMXObjectGroup.getGroupName;
   */
  getGroupName: function getGroupName() {
    return this._groupName;
  },

  /**
   * Return the value for the specific property name
   * @param {String} propertyName
   * @return {Object}
   */
  getProperty: function getProperty(propertyName) {
    return this._properties[propertyName.toString()];
  },

  /**
   * !#en
   * Return the object for the specific object name. <br />
   * It will return the 1st object found on the array for the given name.
   * !#zh 获取指定的对象。
   * @method getObject
   * @param {String} objectName
   * @return {Object|Null}
   * @example
   * let object = tMXObjectGroup.getObject("Group");
   */
  getObject: function getObject(objectName) {
    for (var i = 0, len = this._objects.length; i < len; i++) {
      var obj = this._objects[i];

      if (obj && obj.name === objectName) {
        return obj;
      }
    } // object not found


    return null;
  },

  /**
   * !#en Gets the objects.
   * !#zh 获取对象数组。
   * @method getObjects
   * @return {Array}
   * @example
   * let objects = tMXObjectGroup.getObjects();
   */
  getObjects: function getObjects() {
    return this._objects;
  },
  _init: function _init(groupInfo, mapInfo, texGrids) {
    var TiledMap = cc.TiledMap;
    var TMXObjectType = TiledMap.TMXObjectType;
    var Orientation = TiledMap.Orientation;
    var StaggerAxis = TiledMap.StaggerAxis;
    var TileFlag = TiledMap.TileFlag;
    var FLIPPED_MASK = TileFlag.FLIPPED_MASK;
    var FLAG_HORIZONTAL = TileFlag.HORIZONTAL;
    var FLAG_VERTICAL = TileFlag.VERTICAL;
    this._groupName = groupInfo.name;
    this._positionOffset = groupInfo.offset;
    this._mapInfo = mapInfo;
    this._properties = groupInfo.getProperties();
    this._offset = cc.v2(groupInfo.offset.x, -groupInfo.offset.y);
    this._opacity = groupInfo._opacity;
    var mapSize = mapInfo._mapSize;
    var tileSize = mapInfo._tileSize;
    var width = 0,
        height = 0;

    if (mapInfo.orientation === Orientation.HEX) {
      if (mapInfo.getStaggerAxis() === StaggerAxis.STAGGERAXIS_X) {
        height = tileSize.height * (mapSize.height + 0.5);
        width = (tileSize.width + mapInfo.getHexSideLength()) * Math.floor(mapSize.width / 2) + tileSize.width * (mapSize.width % 2);
      } else {
        width = tileSize.width * (mapSize.width + 0.5);
        height = (tileSize.height + mapInfo.getHexSideLength()) * Math.floor(mapSize.height / 2) + tileSize.height * (mapSize.height % 2);
      }
    } else if (mapInfo.orientation === Orientation.ISO) {
      var wh = mapSize.width + mapSize.height;
      width = tileSize.width * 0.5 * wh;
      height = tileSize.height * 0.5 * wh;
    } else {
      width = mapSize.width * tileSize.width;
      height = mapSize.height * tileSize.height;
    }

    this.node.setContentSize(width, height);
    var leftTopX = width * this.node.anchorX;
    var leftTopY = height * (1 - this.node.anchorY);
    var objects = groupInfo._objects;
    var aliveNodes = {};

    for (var i = 0, l = objects.length; i < l; i++) {
      var object = objects[i];
      var objType = object.type;
      object.offset = cc.v2(object.x, object.y);
      var points = object.points || object.polylinePoints;

      if (points) {
        for (var pi = 0; pi < points.length; pi++) {
          points[pi].y *= -1;
        }
      }

      if (Orientation.ISO !== mapInfo.orientation) {
        object.y = height - object.y;
      } else {
        var posIdxX = object.x / tileSize.height;
        var posIdxY = object.y / tileSize.height;
        object.x = tileSize.width * 0.5 * (mapSize.height + posIdxX - posIdxY);
        object.y = tileSize.height * 0.5 * (mapSize.width + mapSize.height - posIdxX - posIdxY);
      }

      if (objType === TMXObjectType.TEXT) {
        var textName = "text" + object.id;
        aliveNodes[textName] = true;
        var textNode = this.node.getChildByName(textName);

        if (!textNode) {
          textNode = new cc.Node();
        }

        textNode.active = object.visible;
        textNode.anchorX = 0;
        textNode.anchorY = 1;
        textNode.angle = -object.rotation;
        textNode.x = object.x - leftTopX;
        textNode.y = object.y - leftTopY;
        textNode.name = textName;
        textNode.parent = this.node;
        textNode.color = object.color;
        textNode.opacity = this._opacity;
        textNode.setSiblingIndex(i);
        var label = textNode.getComponent(cc.Label);

        if (!label) {
          label = textNode.addComponent(cc.Label);
        }

        label.overflow = cc.Label.Overflow.SHRINK;
        label.lineHeight = object.height;
        label.string = object.text;
        label.horizontalAlign = object.halign;
        label.verticalAlign = object.valign;
        label.fontSize = object.pixelsize;
        textNode.width = object.width;
        textNode.height = object.height;
      }

      if (objType === TMXObjectType.IMAGE) {
        var gid = object.gid;
        var grid = texGrids[(gid & FLIPPED_MASK) >>> 0];
        if (!grid) continue;
        var tileset = grid.tileset;
        var imgName = "img" + object.id;
        aliveNodes[imgName] = true;
        var imgNode = this.node.getChildByName(imgName);
        var imgWidth = object.width || grid.width;
        var imgHeight = object.height || grid.height;
        var tileOffsetX = tileset.tileOffset.x;
        var tileOffsetY = tileset.tileOffset.y; // Delete image nodes implemented as private nodes
        // Use cc.Node to implement node-level requirements

        if (imgNode instanceof cc.PrivateNode) {
          imgNode.removeFromParent();
          imgNode.destroy();
          imgNode = null;
        }

        if (!imgNode) {
          imgNode = new cc.Node();
        }

        if (Orientation.ISO == mapInfo.orientation) {
          imgNode.anchorX = 0.5 + tileOffsetX / imgWidth;
          imgNode.anchorY = tileOffsetY / imgHeight;
        } else {
          imgNode.anchorX = tileOffsetX / imgWidth;
          imgNode.anchorY = tileOffsetY / imgHeight;
        }

        imgNode.active = object.visible;
        imgNode.angle = -object.rotation;
        imgNode.x = object.x - leftTopX;
        imgNode.y = object.y - leftTopY;
        imgNode.name = imgName;
        imgNode.parent = this.node;
        imgNode.opacity = this._opacity;
        imgNode.setSiblingIndex(i);
        var sp = imgNode.getComponent(cc.Sprite);

        if (!sp) {
          sp = imgNode.addComponent(cc.Sprite);
        }

        var spf = sp.spriteFrame;

        if (!spf) {
          spf = new cc.SpriteFrame();
        }

        if ((gid & FLAG_HORIZONTAL) >>> 0) {
          spf.setFlipX(true);
        } else {
          spf.setFlipX(false);
        }

        if ((gid & FLAG_VERTICAL) >>> 0) {
          spf.setFlipY(true);
        } else {
          spf.setFlipY(false);
        }

        spf.setTexture(grid.tileset.sourceImage, cc.rect(grid));
        sp.spriteFrame = spf;
        sp.setVertsDirty(); // object group may has no width or height info

        imgNode.width = imgWidth;
        imgNode.height = imgHeight;
      }
    }

    this._objects = objects; // destroy useless node

    var children = this.node.children;
    var uselessExp = /^(?:img|text)\d+$/;

    for (var _i = 0, n = children.length; _i < n; _i++) {
      var c = children[_i];
      var cName = c._name;
      var isUseless = uselessExp.test(cName);
      if (isUseless && !aliveNodes[cName]) c.destroy();
    }
  }
});
cc.TiledObjectGroup = module.exports = TiledObjectGroup;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC90aWxlbWFwL0NDVGlsZWRPYmplY3RHcm91cC5qcyJdLCJuYW1lcyI6WyJUaWxlZE9iamVjdEdyb3VwIiwiY2MiLCJDbGFzcyIsIm5hbWUiLCJDb21wb25lbnQiLCJnZXRQb3NpdGlvbk9mZnNldCIsIl9wb3NpdGlvbk9mZnNldCIsImdldFByb3BlcnRpZXMiLCJfcHJvcGVydGllcyIsImdldEdyb3VwTmFtZSIsIl9ncm91cE5hbWUiLCJnZXRQcm9wZXJ0eSIsInByb3BlcnR5TmFtZSIsInRvU3RyaW5nIiwiZ2V0T2JqZWN0Iiwib2JqZWN0TmFtZSIsImkiLCJsZW4iLCJfb2JqZWN0cyIsImxlbmd0aCIsIm9iaiIsImdldE9iamVjdHMiLCJfaW5pdCIsImdyb3VwSW5mbyIsIm1hcEluZm8iLCJ0ZXhHcmlkcyIsIlRpbGVkTWFwIiwiVE1YT2JqZWN0VHlwZSIsIk9yaWVudGF0aW9uIiwiU3RhZ2dlckF4aXMiLCJUaWxlRmxhZyIsIkZMSVBQRURfTUFTSyIsIkZMQUdfSE9SSVpPTlRBTCIsIkhPUklaT05UQUwiLCJGTEFHX1ZFUlRJQ0FMIiwiVkVSVElDQUwiLCJvZmZzZXQiLCJfbWFwSW5mbyIsIl9vZmZzZXQiLCJ2MiIsIngiLCJ5IiwiX29wYWNpdHkiLCJtYXBTaXplIiwiX21hcFNpemUiLCJ0aWxlU2l6ZSIsIl90aWxlU2l6ZSIsIndpZHRoIiwiaGVpZ2h0Iiwib3JpZW50YXRpb24iLCJIRVgiLCJnZXRTdGFnZ2VyQXhpcyIsIlNUQUdHRVJBWElTX1giLCJnZXRIZXhTaWRlTGVuZ3RoIiwiTWF0aCIsImZsb29yIiwiSVNPIiwid2giLCJub2RlIiwic2V0Q29udGVudFNpemUiLCJsZWZ0VG9wWCIsImFuY2hvclgiLCJsZWZ0VG9wWSIsImFuY2hvclkiLCJvYmplY3RzIiwiYWxpdmVOb2RlcyIsImwiLCJvYmplY3QiLCJvYmpUeXBlIiwidHlwZSIsInBvaW50cyIsInBvbHlsaW5lUG9pbnRzIiwicGkiLCJwb3NJZHhYIiwicG9zSWR4WSIsIlRFWFQiLCJ0ZXh0TmFtZSIsImlkIiwidGV4dE5vZGUiLCJnZXRDaGlsZEJ5TmFtZSIsIk5vZGUiLCJhY3RpdmUiLCJ2aXNpYmxlIiwiYW5nbGUiLCJyb3RhdGlvbiIsInBhcmVudCIsImNvbG9yIiwib3BhY2l0eSIsInNldFNpYmxpbmdJbmRleCIsImxhYmVsIiwiZ2V0Q29tcG9uZW50IiwiTGFiZWwiLCJhZGRDb21wb25lbnQiLCJvdmVyZmxvdyIsIk92ZXJmbG93IiwiU0hSSU5LIiwibGluZUhlaWdodCIsInN0cmluZyIsInRleHQiLCJob3Jpem9udGFsQWxpZ24iLCJoYWxpZ24iLCJ2ZXJ0aWNhbEFsaWduIiwidmFsaWduIiwiZm9udFNpemUiLCJwaXhlbHNpemUiLCJJTUFHRSIsImdpZCIsImdyaWQiLCJ0aWxlc2V0IiwiaW1nTmFtZSIsImltZ05vZGUiLCJpbWdXaWR0aCIsImltZ0hlaWdodCIsInRpbGVPZmZzZXRYIiwidGlsZU9mZnNldCIsInRpbGVPZmZzZXRZIiwiUHJpdmF0ZU5vZGUiLCJyZW1vdmVGcm9tUGFyZW50IiwiZGVzdHJveSIsInNwIiwiU3ByaXRlIiwic3BmIiwic3ByaXRlRnJhbWUiLCJTcHJpdGVGcmFtZSIsInNldEZsaXBYIiwic2V0RmxpcFkiLCJzZXRUZXh0dXJlIiwic291cmNlSW1hZ2UiLCJyZWN0Iiwic2V0VmVydHNEaXJ0eSIsImNoaWxkcmVuIiwidXNlbGVzc0V4cCIsIm4iLCJjIiwiY05hbWUiLCJfbmFtZSIsImlzVXNlbGVzcyIsInRlc3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBOzs7Ozs7QUFNQSxJQUFJQSxnQkFBZ0IsR0FBR0MsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDNUJDLEVBQUFBLElBQUksRUFBRSxxQkFEc0I7QUFHNUI7QUFDQTtBQUNBLGFBQVNGLEVBQUUsQ0FBQ0csU0FMZ0I7O0FBTzVCOzs7Ozs7OztBQVFBQyxFQUFB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VXdFLFFBQXpCO0FBQ0EsUUFBSUMsVUFBVSxHQUFHLG1CQUFqQjs7QUFDQSxTQUFLLElBQUluSCxFQUFDLEdBQUcsQ0FBUixFQUFXb0gsQ0FBQyxHQUFHRixRQUFRLENBQUMvRyxNQUE3QixFQUFxQ0gsRUFBQyxHQUFHb0gsQ0FBekMsRUFBNENwSCxFQUFDLEVBQTdDLEVBQWlEO0FBQzdDLFVBQUlxSCxDQUFDLEdBQUdILFFBQVEsQ0FBQ2xILEVBQUQsQ0FBaEI7QUFDQSxVQUFJc0gsS0FBSyxHQUFHRCxDQUFDLENBQUNFLEtBQWQ7QUFDQSxVQUFJQyxTQUFTLEdBQUdMLFVBQVUsQ0FBQ00sSUFBWCxDQUFnQkgsS0FBaEIsQ0FBaEI7QUFDQSxVQUFJRSxTQUFTLElBQUksQ0FBQ3ZFLFVBQVUsQ0FBQ3FFLEtBQUQsQ0FBNUIsRUFBcUNELENBQUMsQ0FBQ2YsT0FBRjtBQUN4QztBQUNKO0FBN1EyQixDQUFULENBQXZCO0FBZ1JBckgsRUFBRSxDQUFDRCxnQkFBSCxHQUFzQjBJLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjNJLGdCQUF2QyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gQ29weXJpZ2h0IChjKSAyMDE2IENodWtvbmcgVGVjaG5vbG9naWVzIEluYy5cbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKlxuICogISNlbiBSZW5kZXJzIHRoZSBUTVggb2JqZWN0IGdyb3VwLlxuICogISN6aCDmuLLmn5MgdG14IG9iamVjdCBncm91cOOAglxuICogQGNsYXNzIFRpbGVkT2JqZWN0R3JvdXBcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5sZXQgVGlsZWRPYmplY3RHcm91cCA9IGNjLkNsYXNzKHtcbiAgICBuYW1lOiAnY2MuVGlsZWRPYmplY3RHcm91cCcsXG5cbiAgICAvLyBJbmhlcml0cyBmcm9tIHRoZSBhYnN0cmFjdCBjbGFzcyBkaXJlY3RseSxcbiAgICAvLyBiZWNhdXNlIFRpbGVkTGF5ZXIgbm90IGNyZWF0ZSBvciBtYWludGFpbnMgdGhlIHNnTm9kZSBieSBpdHNlbGYuXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgLyoqXG4gICAgICogISNlbiBPZmZzZXQgcG9zaXRpb24gb2YgY2hpbGQgb2JqZWN0cy5cbiAgICAgKiAhI3poIOiOt+WPluWtkOWvueixoeeahOWBj+enu+S9jee9ruOAglxuICAgICAqIEBtZXRob2QgZ2V0UG9zaXRpb25PZmZzZXRcbiAgICAgKiBAcmV0dXJuIHtWZWMyfVxuICAgICAqIEBleGFtcGxlXG4gICAgICogbGV0IG9mZnNldCA9IHRNWE9iamVjdEdyb3VwLmdldFBvc2l0aW9uT2Zmc2V0KCk7XG4gICAgICovXG4gICAgZ2V0UG9zaXRpb25PZmZzZXQgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb25PZmZzZXQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqICEjZW4gTGlzdCBvZiBwcm9wZXJ0aWVzIHN0b3JlZCBpbiBhIGRpY3Rpb25hcnkuXG4gICAgICogISN6aCDku6XmmKDlsITnmoTlvaLlvI/ojrflj5blsZ7mgKfliJfooajjgIJcbiAgICAgKiBAbWV0aG9kIGdldFByb3BlcnRpZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBsZXQgb2Zmc2V0ID0gdE1YT2JqZWN0R3JvdXAuZ2V0UHJvcGVydGllcygpO1xuICAgICAqL1xuICAgIGdldFByb3BlcnRpZXMgKCkge1xuICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiAhI2VuIEdldHMgdGhlIEdyb3VwIG5hbWUuXG4gICAgICogISN6aCDojrflj5bnu4TlkI3np7DjgIJcbiAgICAgKiBAbWV0aG9kIGdldEdyb3VwTmFtZVxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGxldCBncm91cE5hbWUgPSB0TVhPYmplY3RHcm91cC5nZXRHcm91cE5hbWU7XG4gICAgICovXG4gICAgZ2V0R3JvdXBOYW1lICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwTmFtZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB2YWx1ZSBmb3IgdGhlIHNwZWNpZmljIHByb3BlcnR5IG5hbWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlOYW1lXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqL1xuICAgIGdldFByb3BlcnR5IChwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnRpZXNbcHJvcGVydHlOYW1lLnRvU3RyaW5nKCldO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiAhI2VuXG4gICAgICogUmV0dXJuIHRoZSBvYmplY3QgZm9yIHRoZSBzcGVjaWZpYyBvYmplY3QgbmFtZS4gPGJyIC8+XG4gICAgICogSXQgd2lsbCByZXR1cm4gdGhlIDFzdCBvYmplY3QgZm91bmQgb24gdGhlIGFycmF5IGZvciB0aGUgZ2l2ZW4gbmFtZS5cbiAgICAgKiAhI3poIOiOt+WPluaMh+WumueahOWvueixoeOAglxuICAgICAqIEBtZXRob2QgZ2V0T2JqZWN0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdE5hbWVcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8TnVsbH1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGxldCBvYmplY3QgPSB0TVhPYmplY3RHcm91cC5nZXRPYmplY3QoXCJHcm91cFwiKTtcbiAgICAgKi9cbiAgICBnZXRPYmplY3QgKG9iamVjdE5hbWUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRoaXMuX29iamVjdHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBvYmogPSB0aGlzLl9vYmplY3RzW2ldO1xuICAgICAgICAgICAgaWYgKG9iaiAmJiBvYmoubmFtZSA9PT0gb2JqZWN0TmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gb2JqZWN0IG5vdCBmb3VuZFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogISNlbiBHZXRzIHRoZSBvYmplY3RzLlxuICAgICAqICEjemgg6I635Y+W5a+56LGh5pWw57uE44CCXG4gICAgICogQG1ldGhvZCBnZXRPYmplY3RzXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBsZXQgb2JqZWN0cyA9IHRNWE9iamVjdEdyb3VwLmdldE9iamVjdHMoKTtcbiAgICAgKi9cbiAgICBnZXRPYmplY3RzICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29iamVjdHM7XG4gICAgfSxcblxuICAgIF9pbml0IChncm91cEluZm8sIG1hcEluZm8sIHRleEdyaWRzKSB7XG4gICAgICAgIGNvbnN0IFRpbGVkTWFwID0gY2MuVGlsZWRNYXA7XG4gICAgICAgIGNvbnN0IFRNWE9iamVjdFR5cGUgPSBUaWxlZE1hcC5UTVhPYmplY3RUeXBlO1xuICAgICAgICBjb25zdCBPcmllbnRhdGlvbiA9IFRpbGVkTWFwLk9yaWVudGF0aW9uO1xuICAgICAgICBjb25zdCBTdGFnZ2VyQXhpcyA9IFRpbGVkTWFwLlN0YWdnZXJBeGlzO1xuICAgICAgICBjb25zdCBUaWxlRmxhZyA9IFRpbGVkTWFwLlRpbGVGbGFnO1xuICAgICAgICBjb25zdCBGTElQUEVEX01BU0sgPSBUaWxlRmxhZy5GTElQUEVEX01BU0s7XG4gICAgICAgIGNvbnN0IEZMQUdfSE9SSVpPTlRBTCA9IFRpbGVGbGFnLkhPUklaT05UQUw7XG4gICAgICAgIGNvbnN0IEZMQUdfVkVSVElDQUwgPSBUaWxlRmxhZy5WRVJUSUNBTDtcblxuICAgICAgICB0aGlzLl9ncm91cE5hbWUgPSBncm91cEluZm8ubmFtZTtcbiAgICAgICAgdGhpcy5fcG9zaXRpb25PZmZzZXQgPSBncm91cEluZm8ub2Zmc2V0O1xuICAgICAgICB0aGlzLl9tYXBJbmZvID0gbWFwSW5mbztcbiAgICAgICAgdGhpcy5fcHJvcGVydGllcyA9IGdyb3VwSW5mby5nZXRQcm9wZXJ0aWVzKCk7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IGNjLnYyKGdyb3VwSW5mby5vZmZzZXQueCwgLWdyb3VwSW5mby5vZmZzZXQueSk7XG4gICAgICAgIHRoaXMuX29wYWNpdHkgPSBncm91cEluZm8uX29wYWNpdHk7XG5cbiAgICAgICAgbGV0IG1hcFNpemUgPSBtYXBJbmZvLl9tYXBTaXplO1xuICAgICAgICBsZXQgdGlsZVNpemUgPSBtYXBJbmZvLl90aWxlU2l6ZTtcbiAgICAgICAgbGV0IHdpZHRoID0gMCwgaGVpZ2h0ID0gMDtcbiAgICAgICAgaWYgKG1hcEluZm8ub3JpZW50YXRpb24gPT09IE9yaWVudGF0aW9uLkhFWCkge1xuICAgICAgICAgICAgaWYgKG1hcEluZm8uZ2V0U3RhZ2dlckF4aXMoKSA9PT0gU3RhZ2dlckF4aXMuU1RBR0dFUkFYSVNfWCkge1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IHRpbGVTaXplLmhlaWdodCAqIChtYXBTaXplLmhlaWdodCArIDAuNSk7XG4gICAgICAgICAgICAgICAgd2lkdGggPSAodGlsZVNpemUud2lkdGggKyBtYXBJbmZvLmdldEhleFNpZGVMZW5ndGgoKSkgKiBNYXRoLmZsb29yKG1hcFNpemUud2lkdGggLyAyKSArIHRpbGVTaXplLndpZHRoICogKG1hcFNpemUud2lkdGggJSAyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSB0aWxlU2l6ZS53aWR0aCAqIChtYXBTaXplLndpZHRoICsgMC41KTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSAodGlsZVNpemUuaGVpZ2h0ICsgbWFwSW5mby5nZXRIZXhTaWRlTGVuZ3RoKCkpICogTWF0aC5mbG9vcihtYXBTaXplLmhlaWdodCAvIDIpICsgdGlsZVNpemUuaGVpZ2h0ICogKG1hcFNpemUuaGVpZ2h0ICUgMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobWFwSW5mby5vcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uSVNPKSB7XG4gICAgICAgICAgICBsZXQgd2ggPSBtYXBTaXplLndpZHRoICsgbWFwU2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICB3aWR0aCA9IHRpbGVTaXplLndpZHRoICogMC41ICogd2g7XG4gICAgICAgICAgICBoZWlnaHQgPSB0aWxlU2l6ZS5oZWlnaHQgKiAwLjUgKiB3aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpZHRoID0gbWFwU2l6ZS53aWR0aCAqIHRpbGVTaXplLndpZHRoOyBcbiAgICAgICAgICAgIGhlaWdodCA9IG1hcFNpemUuaGVpZ2h0ICogdGlsZVNpemUuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZS5zZXRDb250ZW50U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBsZXQgbGVmdFRvcFggPSB3aWR0aCAqIHRoaXMubm9kZS5hbmNob3JYO1xuICAgICAgICBsZXQgbGVmdFRvcFkgPSBoZWlnaHQgKiAoMSAtIHRoaXMubm9kZS5hbmNob3JZKTtcblxuICAgICAgICBsZXQgb2JqZWN0cyA9IGdyb3VwSW5mby5fb2JqZWN0cztcbiAgICAgICAgbGV0IGFsaXZlTm9kZXMgPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBvYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgbGV0IG9iamVjdCA9IG9iamVjdHNbaV07XG4gICAgICAgICAgICBsZXQgb2JqVHlwZSA9IG9iamVjdC50eXBlO1xuICAgICAgICAgICAgb2JqZWN0Lm9mZnNldCA9IGNjLnYyKG9iamVjdC54LCBvYmplY3QueSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBwb2ludHMgPSBvYmplY3QucG9pbnRzIHx8IG9iamVjdC5wb2x5bGluZVBvaW50cztcbiAgICAgICAgICAgIGlmIChwb2ludHMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwaSA9IDA7IHBpIDwgcG9pbnRzLmxlbmd0aDsgcGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwb2ludHNbcGldLnkgKj0gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICAgICAgIFxuXG4gICAgICAgICAgICBpZiAoT3JpZW50YXRpb24uSVNPICE9PSBtYXBJbmZvLm9yaWVudGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnkgPSBoZWlnaHQgLSBvYmplY3QueTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHBvc0lkeFggPSBvYmplY3QueCAvIHRpbGVTaXplLmhlaWdodDtcbiAgICAgICAgICAgICAgICBsZXQgcG9zSWR4WSA9IG9iamVjdC55IC8gdGlsZVNpemUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIG9iamVjdC54ID0gdGlsZVNpemUud2lkdGggKiAwLjUgKiAobWFwU2l6ZS5oZWlnaHQgKyBwb3NJZHhYIC0gcG9zSWR4WSk7XG4gICAgICAgICAgICAgICAgb2JqZWN0LnkgPSB0aWxlU2l6ZS5oZWlnaHQgKiAwLjUgKiAobWFwU2l6ZS53aWR0aCArIG1hcFNpemUuaGVpZ2h0IC0gcG9zSWR4WCAtIHBvc0lkeFkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob2JqVHlwZSA9PT0gVE1YT2JqZWN0VHlwZS5URVhUKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRleHROYW1lID0gXCJ0ZXh0XCIgKyBvYmplY3QuaWQ7XG4gICAgICAgICAgICAgICAgYWxpdmVOb2Rlc1t0ZXh0TmFtZV0gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgbGV0IHRleHROb2RlID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKHRleHROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRleHROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHROb2RlID0gbmV3IGNjLk5vZGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZS5hY3RpdmUgPSBvYmplY3QudmlzaWJsZTtcbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZS5hbmNob3JYID0gMDtcbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZS5hbmNob3JZID0gMTtcbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZS5hbmdsZSA9IC1vYmplY3Qucm90YXRpb247XG4gICAgICAgICAgICAgICAgdGV4dE5vZGUueCA9IG9iamVjdC54IC0gbGVmdFRvcFg7XG4gICAgICAgICAgICAgICAgdGV4dE5vZGUueSA9IG9iamVjdC55IC0gbGVmdFRvcFk7XG4gICAgICAgICAgICAgICAgdGV4dE5vZGUubmFtZSA9IHRleHROYW1lO1xuICAgICAgICAgICAgICAgIHRleHROb2RlLnBhcmVudCA9IHRoaXMubm9kZTtcbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZS5jb2xvciA9IG9iamVjdC5jb2xvcjtcbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZS5vcGFjaXR5ID0gdGhpcy5fb3BhY2l0eTtcbiAgICAgICAgICAgICAgICB0ZXh0Tm9kZS5zZXRTaWJsaW5nSW5kZXgoaSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgbGFiZWwgPSB0ZXh0Tm9kZS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xuICAgICAgICAgICAgICAgIGlmICghbGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSB0ZXh0Tm9kZS5hZGRDb21wb25lbnQoY2MuTGFiZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsYWJlbC5vdmVyZmxvdyA9IGNjLkxhYmVsLk92ZXJmbG93LlNIUklOSztcbiAgICAgICAgICAgICAgICBsYWJlbC5saW5lSGVpZ2h0ID0gb2JqZWN0LmhlaWdodDtcbiAgICAgICAgICAgICAgICBsYWJlbC5zdHJpbmcgPSBvYmplY3QudGV4dDtcbiAgICAgICAgICAgICAgICBsYWJlbC5ob3Jpem9udGFsQWxpZ24gPSBvYmplY3QuaGFsaWduO1xuICAgICAgICAgICAgICAgIGxhYmVsLnZlcnRpY2FsQWxpZ24gPSBvYmplY3QudmFsaWduO1xuICAgICAgICAgICAgICAgIGxhYmVsLmZvbnRTaXplID0gb2JqZWN0LnBpeGVsc2l6ZTtcblxuICAgICAgICAgICAgICAgIHRleHROb2RlLndpZHRoID0gb2JqZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgIHRleHROb2RlLmhlaWdodCA9IG9iamVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvYmpUeXBlID09PSBUTVhPYmplY3RUeXBlLklNQUdFKSB7XG4gICAgICAgICAgICAgICAgbGV0IGdpZCA9IG9iamVjdC5naWQ7XG4gICAgICAgICAgICAgICAgbGV0IGdyaWQgPSB0ZXhHcmlkc1soZ2lkICYgRkxJUFBFRF9NQVNLKSA+Pj4gMF07XG4gICAgICAgICAgICAgICAgaWYgKCFncmlkKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBsZXQgdGlsZXNldCA9IGdyaWQudGlsZXNldDtcbiAgICAgICAgICAgICAgICBsZXQgaW1nTmFtZSA9IFwiaW1nXCIgKyBvYmplY3QuaWQ7XG4gICAgICAgICAgICAgICAgYWxpdmVOb2Rlc1tpbWdOYW1lXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgbGV0IGltZ05vZGUgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoaW1nTmFtZSk7XG4gICAgICAgICAgICAgICAgbGV0IGltZ1dpZHRoID0gb2JqZWN0LndpZHRoIHx8IGdyaWQud2lkdGg7XG4gICAgICAgICAgICAgICAgbGV0IGltZ0hlaWdodCA9IG9iamVjdC5oZWlnaHQgfHwgZ3JpZC5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgbGV0IHRpbGVPZmZzZXRYID0gdGlsZXNldC50aWxlT2Zmc2V0Lng7XG4gICAgICAgICAgICAgICAgbGV0IHRpbGVPZmZzZXRZID0gdGlsZXNldC50aWxlT2Zmc2V0Lnk7XG5cbiAgICAgICAgICAgICAgICAvLyBEZWxldGUgaW1hZ2Ugbm9kZXMgaW1wbGVtZW50ZWQgYXMgcHJpdmF0ZSBub2Rlc1xuICAgICAgICAgICAgICAgIC8vIFVzZSBjYy5Ob2RlIHRvIGltcGxlbWVudCBub2RlLWxldmVsIHJlcXVpcmVtZW50c1xuICAgICAgICAgICAgICAgIGlmIChpbWdOb2RlIGluc3RhbmNlb2YgY2MuUHJpdmF0ZU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1nTm9kZS5yZW1vdmVGcm9tUGFyZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGltZ05vZGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICBpbWdOb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWltZ05vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1nTm9kZSA9IG5ldyBjYy5Ob2RlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKE9yaWVudGF0aW9uLklTTyA9PSBtYXBJbmZvLm9yaWVudGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGltZ05vZGUuYW5jaG9yWCA9IDAuNSArIHRpbGVPZmZzZXRYIC8gaW1nV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGltZ05vZGUuYW5jaG9yWSA9IHRpbGVPZmZzZXRZIC8gaW1nSGVpZ2h0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGltZ05vZGUuYW5jaG9yWCA9IHRpbGVPZmZzZXRYIC8gaW1nV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGltZ05vZGUuYW5jaG9yWSA9IHRpbGVPZmZzZXRZIC8gaW1nSGVpZ2h0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbWdOb2RlLmFjdGl2ZSA9IG9iamVjdC52aXNpYmxlO1xuICAgICAgICAgICAgICAgIGltZ05vZGUuYW5nbGUgPSAtb2JqZWN0LnJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIGltZ05vZGUueCA9IG9iamVjdC54IC0gbGVmdFRvcFg7XG4gICAgICAgICAgICAgICAgaW1nTm9kZS55ID0gb2JqZWN0LnkgLSBsZWZ0VG9wWTtcbiAgICAgICAgICAgICAgICBpbWdOb2RlLm5hbWUgPSBpbWdOYW1lO1xuICAgICAgICAgICAgICAgIGltZ05vZGUucGFyZW50ID0gdGhpcy5ub2RlO1xuICAgICAgICAgICAgICAgIGltZ05vZGUub3BhY2l0eSA9IHRoaXMuX29wYWNpdHk7XG4gICAgICAgICAgICAgICAgaW1nTm9kZS5zZXRTaWJsaW5nSW5kZXgoaSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgc3AgPSBpbWdOb2RlLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xuICAgICAgICAgICAgICAgIGlmICghc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgc3AgPSBpbWdOb2RlLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc3BmID0gc3Auc3ByaXRlRnJhbWU7XG4gICAgICAgICAgICAgICAgaWYgKCFzcGYpIHtcbiAgICAgICAgICAgICAgICAgICAgc3BmID0gbmV3IGNjLlNwcml0ZUZyYW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKChnaWQgJiBGTEFHX0hPUklaT05UQUwpID4+PiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwZi5zZXRGbGlwWCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGYuc2V0RmxpcFgoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgoZ2lkICYgRkxBR19WRVJUSUNBTCkgPj4+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3BmLnNldEZsaXBZKHRydWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwZi5zZXRGbGlwWShmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3BmLnNldFRleHR1cmUoZ3JpZC50aWxlc2V0LnNvdXJjZUltYWdlLCBjYy5yZWN0KGdyaWQpKTtcbiAgICAgICAgICAgICAgICBzcC5zcHJpdGVGcmFtZSA9IHNwZjtcbiAgICAgICAgICAgICAgICBzcC5zZXRWZXJ0c0RpcnR5KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBvYmplY3QgZ3JvdXAgbWF5IGhhcyBubyB3aWR0aCBvciBoZWlnaHQgaW5mb1xuICAgICAgICAgICAgICAgIGltZ05vZGUud2lkdGggPSBpbWdXaWR0aDtcbiAgICAgICAgICAgICAgICBpbWdOb2RlLmhlaWdodCA9IGltZ0hlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vYmplY3RzID0gb2JqZWN0cztcblxuICAgICAgICAvLyBkZXN0cm95IHVzZWxlc3Mgbm9kZVxuICAgICAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLm5vZGUuY2hpbGRyZW47XG4gICAgICAgIGxldCB1c2VsZXNzRXhwID0gL14oPzppbWd8dGV4dClcXGQrJC87XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgYyA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgbGV0IGNOYW1lID0gYy5fbmFtZTtcbiAgICAgICAgICAgIGxldCBpc1VzZWxlc3MgPSB1c2VsZXNzRXhwLnRlc3QoY05hbWUpO1xuICAgICAgICAgICAgaWYgKGlzVXNlbGVzcyAmJiAhYWxpdmVOb2Rlc1tjTmFtZV0pIGMuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmNjLlRpbGVkT2JqZWN0R3JvdXAgPSBtb2R1bGUuZXhwb3J0cyA9IFRpbGVkT2JqZWN0R3JvdXA7XG4iXSwic291cmNlUm9vdCI6Ii8ifQ==

                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/utils/label/letter-font.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _bmfont = _interopRequireDefault(require("../../webgl/assemblers/label/2d/bmfont"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }

var Label = require('../../../components/CCLabel');

var LabelOutline = require('../../../components/CCLabelOutline');

var textUtils = require('../../../utils/text-utils');

var Component = require('../../../components/CCComponent');

var RenderTexture = require('../../../assets/CCRenderTexture');

var OUTLINE_SUPPORTED = cc.js.isChildClassOf(LabelOutline, Component);

var getFontFamily = require('../utils').getFontFamily;

var shareLabelInfo = require('../utils').shareLabelInfo;

var FontLetterDefinition = cc.BitmapFont.FontLetterDefinition;
var FontAtlas = cc.BitmapFont.FontAtlas;
var WHITE = cc.Color.WHITE;
var space = 0;
var bleed = 2;

var _invisibleAlpha = (1 / 255).toFixed(3);

function LetterTexture(_char, labelInfo) {
  this._texture = null;
  this._labelInfo = labelInfo;
  this._char = _char;
  this._hash = null;
  this._data = null;
  this._canvas = null;
  this._context = null;
  this._width = 0;
  this._height = 0;
  this._offsetY = 0;
  this._hash = _char.charCodeAt(0) + labelInfo.hash;
}

LetterTexture.prototype = {
  constructor: LetterTexture,
  updateRenderData: function updateRenderData() {
    this._updateProperties();

    this._updateTexture();
  },
  _updateProperties: function _updateProperties() {
    this._texture = new cc.Texture2D();
    this._data = Label._canvasPool.get();
    this._canvas = this._data.canvas;
    this._context = this._data.context;
    this._context.font = this._labelInfo.fontDesc;
    var width = textUtils.safeMeasureText(this._context, this._char, this._labelInfo.fontDesc);
    var blank = this._labelInfo.margin * 2 + bleed;
    this._width = parseFloat(width.toFixed(2)) + blank;
    this._height = (1 + textUtils.BASELINE_RATIO) * this._labelInfo.fontSize + blank;
    this._offsetY = -(this._labelInfo.fontSize * textUtils.BASELINE_RATIO) / 2;

    if (this._canvas.width !== this._width) {
      this._canvas.width = this._width;
    }

    if (this._canvas.height !== this._height) {
      this._canvas.height = this._height;
    }

    this._texture.initWithElement(this._canvas);
  },
  _updateTexture: function _updateTexture() {
    var context = this._context;
    var labelInfo = this._labelInfo,
        width = this._canvas.width,
        height = this._canvas.height;
    var fontSize = this._labelInfo.fontSize;
    var startX = width / 2;
    var startY = height / 2 + fontSize * textUtils.MIDDLE_RATIO + fontSize * textUtils.BASELINE_OFFSET;
    var color = labelInfo.color;
    context.textAlign = 'center';
    context.clearRect(0, 0, width, height); //Add a white background to avoid black edges.

    context.fillStyle = "rgba(" + color.r + ", " + color.g + ", " + color.b + ", " + _invisibleAlpha + ")";
    context.fillRect(0, 0, width, height);
    context.font = labelInfo.fontDesc;
    context.fillStyle = "rgba(" + color.r + ", " + color.g + ", " + color.b + ", 1)";

    if (labelInfo.isOutlined && labelInfo.margin > 0) {
      var strokeColor = labelInfo.out || WHITE;
      context.strokeStyle = "rgba(" + strokeColor.r + ", " + strokeColor.g + ", " + strokeColor.b + ", " + strokeColor.a / 255 + ")";
      context.lineWidth = labelInfo.margin * 2;
      context.strokeText(this._char, startX, startY);
    }

    context.fillText(this._char, startX, startY);

    this._texture.handleLoadedTexture();
  },
  destroy: function destroy() {
    this._texture.destroy();

    this._texture = null;

    Label._canvasPool.put(this._data);
  }
};

function LetterAtlas(width, height) {
  var texture = new RenderTexture();
  texture.initWithSize(width, height);
  texture.update();
  this._fontDefDictionary = new FontAtlas(texture);
  this._x = space;
  this._y = space;
  this._nexty = space;
  this._width = width;
  this._height = height;
  cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH, this.beforeSceneLoad, this);
}

cc.js.mixin(LetterAtlas.prototype, {
  insertLetterTexture: function insertLetterTexture(letterTexture) {
    var texture = letterTexture._texture;
    var width = texture.width,
        height = texture.height;

    if (this._x + width + space > this._width) {
      this._x = space;
      this._y = this._nexty;
    }

    if (this._y + height > this._nexty) {
      this._nexty = this._y + height + space;
    }

    if (this._nexty > this._height) {
      return null;
    }

    this._fontDefDictionary._texture.drawTextureAt(texture, this._x, this._y);

    this._dirty = true;
    var letter = new FontLetterDefinition();
    letter.u = this._x + bleed / 2;
    letter.v = this._y + bleed / 2;
    letter.texture = this._fontDefDictionary._texture;
    letter.valid = true;
    letter.w = letterTexture._width - bleed;
    letter.h = letterTexture._height - bleed;
    letter.xAdvance = letter.w;
    letter.offsetY = letterTexture._offsetY;
    this._x += width + space;

    this._fontDefDictionary.addLetterDefinitions(letterTexture._hash, letter);

    return letter;
  },
  update: function update() {
    if (!this._dirty) return;

    this._fontDefDictionary._texture.update();

    this._dirty = false;
  },
  reset: function reset() {
    this._x = space;
    this._y = space;
    this._nexty = space;
    var chars = this._fontDefDictionary._letterDefinitions;

    for (var i = 0, l = chars.length; i < l; i++) {
      var _char2 = chars[i];

      if (!_char2.isValid) {
        continue;
      }

      _char2.destroy();
    }

    this._fontDefDictionary.clear();
  },
  destroy: function destroy() {
    this.reset();

    this._fontDefDictionary._texture.destroy();

    this._fontDefDictionary._texture = null;
  },
  beforeSceneLoad: function beforeSceneLoad() {
    this.clearAllCache();
  },
  clearAllCache: function clearAllCache() {
    this.destroy();
    var texture = new RenderTexture();
    texture.initWithSize(this._width, this._height);
    texture.update();
    this._fontDefDictionary._texture = texture;
  },
  getLetter: function getLetter(key) {
    return this._fontDefDictionary._letterDefinitions[key];
  },
  getTexture: function getTexture() {
    return this._fontDefDictionary.getTexture();
  },
  getLetterDefinitionForChar: function getLetterDefinitionForChar(_char3, labelInfo) {
    var hash = _char3.charCodeAt(0) + labelInfo.hash;
    var letter = this._fontDefDictionary._letterDefinitions[hash];

    if (!letter) {
      var temp = new LetterTexture(_char3, labelInfo);
      temp.updateRenderData();
      letter = this.insertLetterTexture(temp);
      temp.destroy();
    }

    return letter;
  }
});

function computeHash(labelInfo) {
  var hashData = '';
  var color = labelInfo.color.toHEX();
  var out = '';

  if (labelInfo.isOutlined && labelInfo.margin > 0) {
    out = out + labelInfo.margin + labelInfo.out.toHEX();
  }

  return hashData + labelInfo.fontSize + labelInfo.fontFamily + color + out;
}

var _shareAtlas = null;
var _atlasWidth = 2048;
var _atlasHeight = 2048;
var _isBold = false;

var LetterFontAssembler = /*#__PURE__*/function (_WebglBmfontAssembler) {
  _inheritsLoose(LetterFontAssembler, _WebglBmfontAssembler);

  function LetterFontAssembler() {
    return _WebglBmfontAssembler.apply(this, arguments) || this;
  }

  var _proto = LetterFontAssembler.prototype;

  _proto._getAssemblerData = function _getAssemblerData() {
    if (!_shareAtlas) {
      _shareAtlas = new LetterAtlas(_atlasWidth, _atlasHeight);
      cc.Label._shareAtlas = _shareAtlas;
    }

    return _shareAtlas.getTexture();
  };

  _proto._updateFontFamily = function _updateFontFamily(comp) {
    shareLabelInfo.fontAtlas = _shareAtlas;
    shareLabelInfo.fontFamily = getFontFamily(comp); // outline

    var outline = OUTLINE_SUPPORTED && comp.getComponent(LabelOutline);

    if (outline && outline.enabled) {
      shareLabelInfo.isOutlined = true;
      shareLabelInfo.margin = outline.width;
      shareLabelInfo.out = outline.color.clone();
      shareLabelInfo.out.a = outline.color.a * comp.node.color.a / 255.0;
    } else {
      shareLabelInfo.isOutlined = false;
      shareLabelInfo.margin = 0;
    }
  };

  _proto._updateLabelInfo = function _updateLabelInfo(comp) {
    shareLabelInfo.fontDesc = this._getFontDesc();
    shareLabelInfo.color = comp.node.color;
    shareLabelInfo.hash = computeHash(shareLabelInfo);
  };

  _proto._getFontDesc = function _getFontDesc() {
    var fontDesc = shareLabelInfo.fontSize.toString() + 'px ';
    fontDesc = fontDesc + shareLabelInfo.fontFamily;

    if (_isBold) {
      fontDesc = "bold " + fontDesc;
    }

    return fontDesc;
  };

  _proto._computeHorizontalKerningForText = function _computeHorizontalKerningForText() {};

  _proto._determineRect = function _determineRect(tempRect) {
    return false;
  };

  return LetterFontAssembler;
}(_bmfont["default"]);

exports["default"] = LetterFontAssembler;
module.exports = exports["default"];
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC9jb3JlL3JlbmRlcmVyL3V0aWxzL2xhYmVsL2xldHRlci1mb250LmpzIl0sIm5hbWVzIjpbIkxhYmVsIiwicmVxdWlyZSIsIkxhYmVsT3V0bGluZSIsInRleHRVdGlscyIsIkNvbXBvbmVudCIsIlJlbmRlclRleHR1cmUiLCJPVVRMSU5FX1NVUFBPUlRFRCIsImNjIiwianMiLCJpc0NoaWxkQ2xhc3NPZiIsImdldEZvbnRGYW1pbHkiLCJzaGFyZUxhYmVsSW5mbyIsIkZvbnRMZXR0ZXJEZWZpbml0aW9uIiwiQml0bWFwRm9udCIsIkZvbnRBdGxhcyIsIldISVRFIiwiQ29sb3IiLCJzcGFjZSIsImJsZWVkIiwiX2ludmlzaWJsZUFscGhhIiwidG9GaXhlZCIsIkxldHRlclRleHR1cmUiLCJjaGFyIiwibGFiZWxJbmZvIiwiX3RleHR1cmUiLCJfbGFiZWxJbmZvIiwiX2NoYXIiLCJfaGFzaCIsIl9kYXRhIiwiX2NhbnZhcyIsIl9jb250ZXh0IiwiX3dpZHRoIiwiX2hlaWdodCIsIl9vZmZzZXRZIiwiY2hhckNvZGVBdCIsImhhc2giLCJwcm90b3R5cGUiLCJjb25zdHJ1Y3RvciIsInVwZGF0ZVJlbmRlckRhdGEiLCJfdXBkYXRlUHJvcGVydGllcyIsIl91cGRhdGVUZXh0dXJlIiwiVGV4dHVyZTJEIiwiX2NhbnZhc1Bvb2wiLCJnZXQiLCJjYW52YXMiLCJjb250ZXh0IiwiZm9udCIsImZvbnREZXNjIiwid2lkdGgiLCJzYWZlTWVhc3VyZVRleHQiLCJibGFuayIsIm1hcmdpbiIsInBhcnNlRmxvYXQiLCJCQVNFTElORV9SQVRJTyIsImZvbnRTaXplIiwiaGVpZ2h0IiwiaW5pdFdpdGhFbGVtZW50Iiwic3RhcnRYIiwic3RhcnRZIiwiTUlERExFX1JBVElPIiwiQkFTRUxJTkVfT0ZGU0VUIiwiY29sb3IiLCJ0ZXh0QWxpZ24iLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJyIiwiZyIsImIiLCJmaWxsUmVjdCIsImlzT3V0bGluZWQiLCJzdHJva2VDb2xvciIsIm91dCIsInN0cm9rZVN0eWxlIiwiYSIsImxpbmVXaWR0aCIsInN0cm9rZVRleHQiLCJmaWxsVGV4dCIsImhhbmRsZUxvYWRlZFRleHR1cmUiLCJkZXN0cm95IiwicHV0IiwiTGV0dGVyQXRsYXMiLCJ0ZXh0dXJlIiwiaW5pdFdpdGhTaXplIiwidXBkYXRlIiwiX2ZvbnREZWZEaWN0aW9uYXJ5IiwiX3giLCJfeSIsIl9uZXh0eSIsImRpcmVjdG9yIiwib24iLCJEaXJlY3RvciIsIkVWRU5UX0JFRk9SRV9TQ0VORV9MQVVOQ0giLCJiZWZvcmVTY2VuZUxvYWQiLCJtaXhpbiIsImluc2VydExldHRlclRleHR1cmUiLCJsZXR0ZXJUZXh0dXJlIiwiZHJhd1RleHR1cmVBdCIsIl9kaXJ0eSIsImxldHRlciIsInUiLCJ2IiwidmFsaWQiLCJ3IiwiaCIsInhBZHZhbmNlIiwib2Zmc2V0WSIsImFkZExldHRlckRlZmluaXRpb25zIiwicmVzZXQiLCJjaGFycyIsIl9sZXR0ZXJEZWZpbml0aW9ucyIsImkiLCJsIiwibGVuZ3RoIiwiaXNWYWxpZCIsImNsZWFyIiwiY2xlYXJBbGxDYWNoZSIsImdldExldHRlciIsImtleSIsImdldFRleHR1cmUiLCJnZXRMZXR0ZXJEZWZpbml0aW9uRm9yQ2hhciIsInRlbXAiLCJjb21wdXRlSGFzaCIsImhhc2hEYXRhIiwidG9IRVgiLCJmb250RmFtaWx5IiwiX3NoYXJlQXRsYXMiLCJfYXRsYXNXaWR0aCIsIl9hdGxhc0hlaWdodCIsIl9pc0JvbGQiLCJMZXR0ZXJGb250QXNzZW1ibGVyIiwiX2dldEFzc2VtYmxlckRhdGEiLCJfdXBkYXRlRm9udEZhbWlseSIsImNvbXAiLCJmb250QXRsYXMiLCJvdXRsaW5lIiwiZ2V0Q29tcG9uZW50IiwiZW5hYmxlZCIsImNsb25lIiwibm9kZSIsIl91cGRhdGVMYWJlbEluZm8iLCJfZ2V0Rm9udERlc2MiLCJ0b1N0cmluZyIsIl9jb21wdXRlSG9yaXpvbnRhbEtlcm5pbmdGb3JUZXh0IiwiX2RldGVybWlu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QTFCO0FBQ0FqSSxJQUFBQSxjQUFjLENBQUNrRCxLQUFmLEdBQXVCdUUsSUFBSSxDQUFDTSxJQUFMLENBQVU3RSxLQUFqQztBQUNBbEQsSUFBQUEsY0FBYyxDQUFDd0IsSUFBZixHQUFzQnNGLFdBQVcsQ0FBQzlHLGNBQUQsQ0FBakM7QUFDSDs7U0FFRGlJLGVBQUEsd0JBQWdCO0FBQ1osUUFBSTdGLFFBQVEsR0FBR3BDLGNBQWMsQ0FBQzJDLFFBQWYsQ0FBd0J1RixRQUF4QixLQUFxQyxLQUFwRDtBQUNBOUYsSUFBQUEsUUFBUSxHQUFHQSxRQUFRLEdBQUdwQyxjQUFjLENBQUNpSCxVQUFyQzs7QUFDQSxRQUFJSSxPQUFKLEVBQWE7QUFDVGpGLE1BQUFBLFFBQVEsR0FBRyxVQUFVQSxRQUFyQjtBQUNIOztBQUVELFdBQU9BLFFBQVA7QUFDSDs7U0FDRCtGLG1DQUFBLDRDQUFvQyxDQUFFOztTQUN0Q0MsaUJBQUEsd0JBQWdCQyxRQUFoQixFQUEwQjtBQUN0QixXQUFPLEtBQVA7QUFDSDs7O0VBOUM0Q0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IFdlYmdsQm1mb250QXNzZW1ibGVyIGZyb20gJy4uLy4uL3dlYmdsL2Fzc2VtYmxlcnMvbGFiZWwvMmQvYm1mb250JztcblxuY29uc3QgTGFiZWwgPSByZXF1aXJlKCcuLi8uLi8uLi9jb21wb25lbnRzL0NDTGFiZWwnKTtcbmNvbnN0IExhYmVsT3V0bGluZSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvQ0NMYWJlbE91dGxpbmUnKTtcbmNvbnN0IHRleHRVdGlscyA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWxzL3RleHQtdXRpbHMnKTtcbmNvbnN0IENvbXBvbmVudCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbXBvbmVudHMvQ0NDb21wb25lbnQnKTtcbmNvbnN0IFJlbmRlclRleHR1cmUgPSByZXF1aXJlKCcuLi8uLi8uLi9hc3NldHMvQ0NSZW5kZXJUZXh0dXJlJyk7XG5jb25zdCBPVVRMSU5FX1NVUFBPUlRFRCA9IGNjLmpzLmlzQ2hpbGRDbGFzc09mKExhYmVsT3V0bGluZSwgQ29tcG9uZW50KTtcbmNvbnN0IGdldEZvbnRGYW1pbHkgPSByZXF1aXJlKCcuLi91dGlscycpLmdldEZvbnRGYW1pbHk7XG5jb25zdCBzaGFyZUxhYmVsSW5mbyA9IHJlcXVpcmUoJy4uL3V0aWxzJykuc2hhcmVMYWJlbEluZm87XG5cblxuY29uc3QgRm9udExldHRlckRlZmluaXRpb24gPSBjYy5CaXRtYXBGb250LkZvbnRMZXR0ZXJEZWZpbml0aW9uO1xuY29uc3QgRm9udEF0bGFzID0gY2MuQml0bWFwRm9udC5Gb250QXRsYXM7XG5cbmNvbnN0IFdISVRFID0gY2MuQ29sb3IuV0hJVEU7XG5jb25zdCBzcGFjZSA9IDA7XG5jb25zdCBibGVlZCA9IDI7XG5jb25zdCBfaW52aXNpYmxlQWxwaGEgPSAoMSAvIDI1NSkudG9GaXhlZCgzKTtcblxuZnVuY3Rpb24gTGV0dGVyVGV4dHVyZShjaGFyLCBsYWJlbEluZm8pIHtcbiAgICB0aGlzLl90ZXh0dXJlID0gbnVsbDtcbiAgICB0aGlzLl9sYWJlbEluZm8gPSBsYWJlbEluZm87XG4gICAgdGhpcy5fY2hhciA9IGNoYXI7XG4gICAgdGhpcy5faGFzaCA9IG51bGw7XG4gICAgdGhpcy5fZGF0YSA9IG51bGw7XG4gICAgdGhpcy5fY2FudmFzID0gbnVsbDtcbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLl93aWR0aCA9IDA7XG4gICAgdGhpcy5faGVpZ2h0ID0gMDtcbiAgICB0aGlzLl9vZmZzZXRZID0gMDtcbiAgICB0aGlzLl9oYXNoID0gY2hhci5jaGFyQ29kZUF0KDApICsgbGFiZWxJbmZvLmhhc2g7XG59XG5cbkxldHRlclRleHR1cmUucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBMZXR0ZXJUZXh0dXJlLFxuXG4gICAgdXBkYXRlUmVuZGVyRGF0YSAoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlVGV4dHVyZSgpO1xuICAgIH0sXG4gICAgX3VwZGF0ZVByb3BlcnRpZXMgKCkge1xuICAgICAgICB0aGlzLl90ZXh0dXJlID0gbmV3IGNjLlRleHR1cmUyRCgpO1xuICAgICAgICB0aGlzLl9kYXRhID0gTGFiZWwuX2NhbnZhc1Bvb2wuZ2V0KCk7XG4gICAgICAgIHRoaXMuX2NhbnZhcyA9IHRoaXMuX2RhdGEuY2FudmFzO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fZGF0YS5jb250ZXh0O1xuICAgICAgICB0aGlzLl9jb250ZXh0LmZvbnQgPSB0aGlzLl9sYWJlbEluZm8uZm9udERlc2M7XG4gICAgICAgIGxldCB3aWR0aCA9IHRleHRVdGlscy5zYWZlTWVhc3VyZVRleHQodGhpcy5fY29udGV4dCwgdGhpcy5fY2hhciwgdGhpcy5fbGFiZWxJbmZvLmZvbnREZXNjKTtcbiAgICAgICAgbGV0IGJsYW5rID0gdGhpcy5fbGFiZWxJbmZvLm1hcmdpbiAqIDIgKyBibGVlZDtcbiAgICAgICAgdGhpcy5fd2lkdGggPSBwYXJzZUZsb2F0KHdpZHRoLnRvRml4ZWQoMikpICsgYmxhbms7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9ICgxICsgdGV4dFV0aWxzLkJBU0VMSU5FX1JBVElPKSAqIHRoaXMuX2xhYmVsSW5mby5mb250U2l6ZSArIGJsYW5rO1xuICAgICAgICB0aGlzLl9vZmZzZXRZID0gLSAodGhpcy5fbGFiZWxJbmZvLmZvbnRTaXplICogdGV4dFV0aWxzLkJBU0VMSU5FX1JBVElPKSAvIDI7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NhbnZhcy53aWR0aCAhPT0gdGhpcy5fd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IHRoaXMuX3dpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2NhbnZhcy5oZWlnaHQgIT09IHRoaXMuX2hlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IHRoaXMuX2hlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RleHR1cmUuaW5pdFdpdGhFbGVtZW50KHRoaXMuX2NhbnZhcyk7XG4gICAgfSxcbiAgICBfdXBkYXRlVGV4dHVyZSAoKSB7XG4gICAgICAgIGxldCBjb250ZXh0ID0gdGhpcy5fY29udGV4dDtcbiAgICAgICAgbGV0IGxhYmVsSW5mbyA9IHRoaXMuX2xhYmVsSW5mbyxcbiAgICAgICAgICAgIHdpZHRoID0gdGhpcy5fY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5fY2FudmFzLmhlaWdodDtcblxuICAgICAgICBjb25zdCBmb250U2l6ZSA9IHRoaXMuX2xhYmVsSW5mby5mb250U2l6ZTtcbiAgICAgICAgbGV0IHN0YXJ0WCA9IHdpZHRoIC8gMjtcbiAgICAgICAgbGV0IHN0YXJ0WSA9IGhlaWdodCAvIDIgKyAgZm9udFNpemUgKiB0ZXh0VXRpbHMuTUlERExFX1JBVElPICsgZm9udFNpemUgKiB0ZXh0VXRpbHMuQkFTRUxJTkVfT0ZGU0VUO1xuICAgICAgICBsZXQgY29sb3IgPSBsYWJlbEluZm8uY29sb3I7XG5cbiAgICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIC8vQWRkIGEgd2hpdGUgYmFja2dyb3VuZCB0byBhdm9pZCBibGFjayBlZGdlcy5cbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBgcmdiYSgke2NvbG9yLnJ9LCAke2NvbG9yLmd9LCAke2NvbG9yLmJ9LCAke19pbnZpc2libGVBbHBoYX0pYDtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5mb250ID0gbGFiZWxJbmZvLmZvbnREZXNjO1xuXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gYHJnYmEoJHtjb2xvci5yfSwgJHtjb2xvci5nfSwgJHtjb2xvci5ifSwgMSlgO1xuICAgICAgICBpZiAobGFiZWxJbmZvLmlzT3V0bGluZWQgJiYgbGFiZWxJbmZvLm1hcmdpbiA+IDApIHtcbiAgICAgICAgICAgIGxldCBzdHJva2VDb2xvciA9IGxhYmVsSW5mby5vdXQgfHwgV0hJVEU7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gYHJnYmEoJHtzdHJva2VDb2xvci5yfSwgJHtzdHJva2VDb2xvci5nfSwgJHtzdHJva2VDb2xvci5ifSwgJHtzdHJva2VDb2xvci5hIC8gMjU1fSlgO1xuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBsYWJlbEluZm8ubWFyZ2luICogMjtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dCh0aGlzLl9jaGFyLCBzdGFydFgsIHN0YXJ0WSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5maWxsVGV4dCh0aGlzLl9jaGFyLCBzdGFydFgsIHN0YXJ0WSk7XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZS5oYW5kbGVMb2FkZWRUZXh0dXJlKCk7XG4gICAgfSxcblxuICAgIGRlc3Ryb3kgKCkge1xuICAgICAgICB0aGlzLl90ZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG51bGw7XG4gICAgICAgIExhYmVsLl9jYW52YXNQb29sLnB1dCh0aGlzLl9kYXRhKTtcbiAgICB9LFxufVxuXG5mdW5jdGlvbiBMZXR0ZXJBdGxhcyAod2lkdGgsIGhlaWdodCkge1xuICAgIGxldCB0ZXh0dXJlID0gbmV3IFJlbmRlclRleHR1cmUoKTtcbiAgICB0ZXh0dXJlLmluaXRXaXRoU2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB0ZXh0dXJlLnVwZGF0ZSgpO1xuXG4gICAgdGhpcy5fZm9udERlZkRpY3Rpb25hcnkgPSBuZXcgRm9udEF0bGFzKHRleHR1cmUpO1xuICAgIFxuICAgIHRoaXMuX3ggPSBzcGFjZTtcbiAgICB0aGlzLl95ID0gc3BhY2U7XG4gICAgdGhpcy5fbmV4dHkgPSBzcGFjZTtcblxuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgY2MuZGlyZWN0b3Iub24oY2MuRGlyZWN0b3IuRVZFTlRfQkVGT1JFX1NDRU5FX0xBVU5DSCwgdGhpcy5iZWZvcmVTY2VuZUxvYWQsIHRoaXMpO1xufVxuXG5jYy5qcy5taXhpbihMZXR0ZXJBdGxhcy5wcm90b3R5cGUsIHtcbiAgICBpbnNlcnRMZXR0ZXJUZXh0dXJlIChsZXR0ZXJUZXh0dXJlKSB7XG4gICAgICAgIGxldCB0ZXh0dXJlID0gbGV0dGVyVGV4dHVyZS5fdGV4dHVyZTtcbiAgICAgICAgbGV0IHdpZHRoID0gdGV4dHVyZS53aWR0aCwgaGVpZ2h0ID0gdGV4dHVyZS5oZWlnaHQ7ICAgICAgICBcblxuICAgICAgICBpZiAoKHRoaXMuX3ggKyB3aWR0aCArIHNwYWNlKSA+IHRoaXMuX3dpZHRoKSB7XG4gICAgICAgICAgICB0aGlzLl94ID0gc3BhY2U7XG4gICAgICAgICAgICB0aGlzLl95ID0gdGhpcy5fbmV4dHk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRoaXMuX3kgKyBoZWlnaHQpID4gdGhpcy5fbmV4dHkpIHtcbiAgICAgICAgICAgIHRoaXMuX25leHR5ID0gdGhpcy5feSArIGhlaWdodCArIHNwYWNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX25leHR5ID4gdGhpcy5faGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2ZvbnREZWZEaWN0aW9uYXJ5Ll90ZXh0dXJlLmRyYXdUZXh0dXJlQXQodGV4dHVyZSwgdGhpcy5feCwgdGhpcy5feSk7XG5cbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgbGV0IGxldHRlciA9IG5ldyBGb250TGV0dGVyRGVmaW5pdGlvbigpO1xuICAgICAgICBsZXR0ZXIudSA9IHRoaXMuX3ggKyBibGVlZC8yO1xuICAgICAgICBsZXR0ZXIudiA9IHRoaXMuX3kgKyBibGVlZC8yO1xuICAgICAgICBsZXR0ZXIudGV4dHVyZSA9IHRoaXMuX2ZvbnREZWZEaWN0aW9uYXJ5Ll90ZXh0dXJlO1xuICAgICAgICBsZXR0ZXIudmFsaWQgPSB0cnVlO1xuICAgICAgICBsZXR0ZXIudyA9IGxldHRlclRleHR1cmUuX3dpZHRoIC0gYmxlZWQ7XG4gICAgICAgIGxldHRlci5oID0gbGV0dGVyVGV4dHVyZS5faGVpZ2h0IC0gYmxlZWQ7XG4gICAgICAgIGxldHRlci54QWR2YW5jZSA9IGxldHRlci53O1xuICAgICAgICBsZXR0ZXIub2Zmc2V0WSA9IGxldHRlclRleHR1cmUuX29mZnNldFk7XG5cbiAgICAgICAgdGhpcy5feCArPSB3aWR0aCArIHNwYWNlO1xuXG4gICAgICAgIHRoaXMuX2ZvbnREZWZEaWN0aW9uYXJ5LmFkZExldHRlckRlZmluaXRpb25zKGxldHRlclRleHR1cmUuX2hhc2gsIGxldHRlcik7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbGV0dGVyXG4gICAgfSxcblxuICAgIHVwZGF0ZSAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fZGlydHkpIHJldHVybjtcbiAgICAgICAgdGhpcy5fZm9udERlZkRpY3Rpb25hcnkuX3RleHR1cmUudXBkYXRlKCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG4gICAgfSxcblxuICAgIHJlc2V0ICgpIHtcbiAgICAgICAgdGhpcy5feCA9IHNwYWNlO1xuICAgICAgICB0aGlzLl95ID0gc3BhY2U7XG4gICAgICAgIHRoaXMuX25leHR5ID0gc3BhY2U7XG5cbiAgICAgICAgbGV0IGNoYXJzID0gdGhpcy5fZm9udERlZkRpY3Rpb25hcnkuX2xldHRlckRlZmluaXRpb25zO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGNoYXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoYXIgPSBjaGFyc1tpXTtcbiAgICAgICAgICAgIGlmICghY2hhci5pc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFyLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2ZvbnREZWZEaWN0aW9uYXJ5LmNsZWFyKCk7XG4gICAgfSxcblxuICAgIGRlc3Ryb3kgKCkge1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuX2ZvbnREZWZEaWN0aW9uYXJ5Ll90ZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5fZm9udERlZkRpY3Rpb25hcnkuX3RleHR1cmUgPSBudWxsO1xuICAgIH0sXG5cbiAgICBiZWZvcmVTY2VuZUxvYWQgKCkge1xuICAgICAgICB0aGlzLmNsZWFyQWxsQ2FjaGUoKTtcbiAgICB9LFxuXG4gICAgY2xlYXJBbGxDYWNoZSAoKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuXG4gICAgICAgIGxldCB0ZXh0dXJlID0gbmV3IFJlbmRlclRleHR1cmUoKTtcbiAgICAgICAgdGV4dHVyZS5pbml0V2l0aFNpemUodGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIHRleHR1cmUudXBkYXRlKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9mb250RGVmRGljdGlvbmFyeS5fdGV4dHVyZSA9IHRleHR1cmU7XG4gICAgfSxcblxuICAgIGdldExldHRlciAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb250RGVmRGljdGlvbmFyeS5fbGV0dGVyRGVmaW5pdGlvbnNba2V5XTtcbiAgICB9LFxuXG4gICAgZ2V0VGV4dHVyZSAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb250RGVmRGljdGlvbmFyeS5nZXRUZXh0dXJlKCk7XG4gICAgfSxcblxuICAgIGdldExldHRlckRlZmluaXRpb25Gb3JDaGFyOiBmdW5jdGlvbihjaGFyLCBsYWJlbEluZm8pIHtcbiAgICAgICAgbGV0IGhhc2ggPSBjaGFyLmNoYXJDb2RlQXQoMCkgKyBsYWJlbEluZm8uaGFzaDtcbiAgICAgICAgbGV0IGxldHRlciA9IHRoaXMuX2ZvbnREZWZEaWN0aW9uYXJ5Ll9sZXR0ZXJEZWZpbml0aW9uc1toYXNoXTtcbiAgICAgICAgaWYgKCFsZXR0ZXIpIHtcbiAgICAgICAgICAgIGxldCB0ZW1wID0gbmV3IExldHRlclRleHR1cmUoY2hhciwgbGFiZWxJbmZvKTtcbiAgICAgICAgICAgIHRlbXAudXBkYXRlUmVuZGVyRGF0YSgpO1xuICAgICAgICAgICAgbGV0dGVyID0gdGhpcy5pbnNlcnRMZXR0ZXJUZXh0dXJlKHRlbXApO1xuICAgICAgICAgICAgdGVtcC5kZXN0cm95KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGV0dGVyO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBjb21wdXRlSGFzaCAobGFiZWxJbmZvKSB7XG4gICAgbGV0IGhhc2hEYXRhID0gJyc7XG4gICAgbGV0IGNvbG9yID0gbGFiZWxJbmZvLmNvbG9yLnRvSEVYKCk7XG4gICAgbGV0IG91dCA9ICcnO1xuICAgIGlmIChsYWJlbEluZm8uaXNPdXRsaW5lZCAmJiBsYWJlbEluZm8ubWFyZ2luID4gMCkge1xuICAgICAgICBvdXQgPSBvdXQgKyBsYWJlbEluZm8ubWFyZ2luICsgbGFiZWxJbmZvLm91dC50b0hFWCgpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaGFzaERhdGEgKyBsYWJlbEluZm8uZm9udFNpemUgKyBsYWJlbEluZm8uZm9udEZhbWlseSArIGNvbG9yICsgb3V0O1xufVxuXG5sZXQgX3NoYXJlQXRsYXMgPSBudWxsO1xuXG5sZXQgX2F0bGFzV2lkdGggPSAyMDQ4O1xubGV0IF9hdGxhc0hlaWdodCA9IDIwNDg7XG5sZXQgX2lzQm9sZCA9IGZhbHNlO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMZXR0ZXJGb250QXNzZW1ibGVyIGV4dGVuZHMgV2ViZ2xCbWZvbnRBc3NlbWJsZXIge1xuICAgIF9nZXRBc3NlbWJsZXJEYXRhICgpIHtcbiAgICAgICAgaWYgKCFfc2hhcmVBdGxhcykge1xuICAgICAgICAgICAgX3NoYXJlQXRsYXMgPSBuZXcgTGV0dGVyQXRsYXMoX2F0bGFzV2lkdGgsIF9hdGxhc0hlaWdodCk7XG4gICAgICAgICAgICBjYy5MYWJlbC5fc2hhcmVBdGxhcyA9IF9zaGFyZUF0bGFzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gX3NoYXJlQXRsYXMuZ2V0VGV4dHVyZSgpO1xuICAgIH1cblxuICAgIF91cGRhdGVGb250RmFtaWx5IChjb21wKSB7XG4gICAgICAgIHNoYXJlTGFiZWxJbmZvLmZvbnRBdGxhcyA9IF9zaGFyZUF0bGFzO1xuICAgICAgICBzaGFyZUxhYmVsSW5mby5mb250RmFtaWx5ID0gZ2V0Rm9udEZhbWlseShjb21wKTtcblxuICAgICAgICAvLyBvdXRsaW5lXG4gICAgICAgIGxldCBvdXRsaW5lID0gT1VUTElORV9TVVBQT1JURUQgJiYgY29tcC5nZXRDb21wb25lbnQoTGFiZWxPdXRsaW5lKTtcbiAgICAgICAgaWYgKG91dGxpbmUgJiYgb3V0bGluZS5lbmFibGVkKSB7XG4gICAgICAgICAgICBzaGFyZUxhYmVsSW5mby5pc091dGxpbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHNoYXJlTGFiZWxJbmZvLm1hcmdpbiA9IG91dGxpbmUud2lkdGg7XG4gICAgICAgICAgICBzaGFyZUxhYmVsSW5mby5vdXQgPSBvdXRsaW5lLmNvbG9yLmNsb25lKCk7XG4gICAgICAgICAgICBzaGFyZUxhYmVsSW5mby5vdXQuYSA9IG91dGxpbmUuY29sb3IuYSAqIGNvbXAubm9kZS5jb2xvci5hIC8gMjU1LjA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaGFyZUxhYmVsSW5mby5pc091dGxpbmVkID0gZmFsc2U7XG4gICAgICAgICAgICBzaGFyZUxhYmVsSW5mby5tYXJnaW4gPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VwZGF0ZUxhYmVsSW5mbyAoY29tcCkge1xuICAgICAgICBzaGFyZUxhYmVsSW5mby5mb250RGVzYyA9IHRoaXMuX2dldEZvbnREZXNjKCk7XG4gICAgICAgIHNoYXJlTGFiZWxJbmZvLmNvbG9yID0gY29tcC5ub2RlLmNvbG9yO1xuICAgICAgICBzaGFyZUxhYmVsSW5mby5oYXNoID0gY29tcHV0ZUhhc2goc2hhcmVMYWJlbEluZm8pO1xuICAgIH1cblxuICAgIF9nZXRGb250RGVzYyAoKSB7XG4gICAgICAgIGxldCBmb250RGVzYyA9IHNoYXJlTGFiZWxJbmZvLmZvbnRTaXplLnRvU3RyaW5nKCkgKyAncHggJztcbiAgICAgICAgZm9udERlc2MgPSBmb250RGVzYyArIHNoYXJlTGFiZWxJbmZvLmZvbnRGYW1pbHk7XG4gICAgICAgIGlmIChfaXNCb2xkKSB7XG4gICAgICAgICAgICBmb250RGVzYyA9IFwiYm9sZCBcIiArIGZvbnREZXNjO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbnREZXNjO1xuICAgIH1cbiAgICBfY29tcHV0ZUhvcml6b250YWxLZXJuaW5nRm9yVGV4dCAoKSB7fVxuICAgIF9kZXRlcm1pbmVSZWN0ICh0ZW1wUmVjdCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiLyJ9
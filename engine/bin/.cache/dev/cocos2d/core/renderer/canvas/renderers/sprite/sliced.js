
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/canvas/renderers/sprite/sliced.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _assembler = _interopRequireDefault(require("../../../assembler"));

var _renderData = _interopRequireDefault(require("../render-data"));

var _simple = _interopRequireDefault(require("./simple"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }

var utils = require('../utils');

var CanvasSlicedSprite = /*#__PURE__*/function (_CanvasSimpleSprite) {
  _inheritsLoose(CanvasSlicedSprite, _CanvasSimpleSprite);

  function CanvasSlicedSprite() {
    return _CanvasSimpleSprite.apply(this, arguments) || this;
  }

  var _proto = CanvasSlicedSprite.prototype;

  _proto.init = function init() {
    this._renderData = new _renderData["default"]();
    this._renderData.dataLength = 4;
  };

  _proto.updateUVs = function updateUVs(sprite) {
    var frame = sprite.spriteFrame;
    var renderData = this._renderData;
    var rect = frame._rect; // caculate texture coordinate

    var leftWidth = frame.insetLeft;
    var rightWidth = frame.insetRight;
    var centerWidth = rect.width - leftWidth - rightWidth;
    var topHeight = frame.insetTop;
    var bottomHeight = frame.insetBottom;
    var centerHeight = rect.height - topHeight - bottomHeight; // uv computation should take spritesheet into account.

    var verts = renderData.vertices;

    if (frame._rotated) {
      verts[0].u = rect.x;
      verts[1].u = bottomHeight + rect.x;
      verts[2].u = bottomHeight + centerHeight + rect.x;
      verts[3].u = rect.x + rect.height;
      verts[3].v = rect.y;
      verts[2].v = leftWidth + rect.y;
      verts[1].v = leftWidth + centerWidth + rect.y;
      verts[0].v = rect.y + rect.width;
    } else {
      verts[0].u = rect.x;
      verts[1].u = leftWidth + rect.x;
      verts[2].u = leftWidth + centerWidth + rect.x;
      verts[3].u = rect.x + rect.width;
      verts[3].v = rect.y;
      verts[2].v = topHeight + rect.y;
      verts[1].v = topHeight + centerHeight + rect.y;
      verts[0].v = rect.y + rect.height;
    }
  };

  _proto.updateVerts = function updateVerts(sprite) {
    var renderData = this._renderData,
        verts = renderData.vertices,
        node = sprite.node,
        width = node.width,
        height = node.height,
        appx = node.anchorX * width,
        appy = node.anchorY * height;
    var frame = sprite.spriteFrame;
    var leftWidth = frame.insetLeft;
    var rightWidth = frame.insetRight;
    var topHeight = frame.insetTop;
    var bottomHeight = frame.insetBottom;
    var sizableWidth = width - leftWidth - rightWidth;
    var sizableHeight = height - topHeight - bottomHeight;
    var xScale = width / (leftWidth + rightWidth);
    var yScale = height / (topHeight + bottomHeight);
    xScale = isNaN(xScale) || xScale > 1 ? 1 : xScale;
    yScale = isNaN(yScale) || yScale > 1 ? 1 : yScale;
    sizableWidth = sizableWidth < 0 ? 0 : sizableWidth;
    sizableHeight = sizableHeight < 0 ? 0 : sizableHeight;

    if (frame._rotated) {
      verts[0].y = -appx;
      verts[0].x = -appy;
      verts[1].y = rightWidth * xScale - appx;
      verts[1].x = bottomHeight * yScale - appy;
      verts[2].y = verts[1].y + sizableWidth;
      verts[2].x = verts[1].x + sizableHeight;
      verts[3].y = width - appx;
      verts[3].x = height - appy;
    } else {
      verts[0].x = -appx;
      verts[0].y = -appy;
      verts[1].x = leftWidth * xScale - appx;
      verts[1].y = bottomHeight * yScale - appy;
      verts[2].x = verts[1].x + sizableWidth;
      verts[2].y = verts[1].y + sizableHeight;
      verts[3].x = width - appx;
      verts[3].y = height - appy;
    }

    sprite._vertsDirty = false;
  };

  _proto.draw = function draw(ctx, comp) {
    var node = comp.node;
    var frame = comp._spriteFrame; // Transform

    var matrix = node._worldMatrix;
    var matrixm = matrix.m;
    var a = matrixm[0],
        b = matrixm[1],
        c = matrixm[4],
        d = matrixm[5],
        tx = matrixm[12],
        ty = matrixm[13];
    ctx.transform(a, b, c, d, tx, ty);
    ctx.scale(1, -1);

    if (frame._rotated) {
      ctx.rotate(-Math.PI / 2);
    } // TODO: handle blend function
    // opacity


    utils.context.setGlobalAlpha(ctx, node.opacity / 255);
    var tex = frame._texture,
        verts = this._renderData.vertices;
    var image = utils.getColorizedImage(tex, node._color);
    var drawCall = 0;
    var off, ld, rd, td, bd, x, y, w, h, sx, sy, sw, sh;

    for (var r = 0; r < 3; ++r) {
      bd = verts[r];
      td = verts[r + 1];

      for (var _c = 0; _c < 3; ++_c) {
        ld = verts[_c];
        rd = verts[_c + 1];
        x = ld.x;
        y = bd.y;
        w = rd.x - x;
        h = td.y - y;
        y = -y - h;
        sx = ld.u; // invert texture because texture uv is in UI coordinates (origin at top left)

        sy = td.v;
        sw = rd.u - sx;
        sh = bd.v - sy;

        if (sw > 0 && sh > 0 && w > 0 && h > 0) {
          ctx.drawImage(image, sx, sy, sw, sh, x, y, w, h);
          drawCall++;
        }
      }
    }

    return drawCall;
  };

  return CanvasSlicedSprite;
}(_simple["default"]);

exports["default"] = CanvasSlicedSprite;
module.exports = exports["default"];
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC9jb3JlL3JlbmRlcmVyL2NhbnZhcy9yZW5kZXJlcnMvc3ByaXRlL3NsaWNlZC5qcyJdLCJuYW1lcyI6WyJ1dGlscyIsInJlcXVpcmUiLCJDYW52YXNTbGljZWRTcHJpdGUiLCJpbml0IiwiX3JlbmRlckRhdGEiLCJSZW5kZXJEYXRhIiwiZGF0YUxlbmd0aCIsInVwZGF0ZVVWcyIsInNwcml0ZSIsImZyYW1lIiwic3ByaXRlRnJhbWUiLCJyZW5kZXJEYXRhIiwicmVjdCIsIl9yZWN0IiwibGVmdFdpZHRoIiwiaW5zZXRMZWZ0IiwicmlnaHRXaWR0aCIsImluc2V0UmlnaHQiLCJjZW50ZXJXaWR0aCIsIndpZHRoIiwidG9wSGVpZ2h0IiwiaW5zZXRUb3AiLCJib3R0b21IZWlnaHQiLCJpbnNldEJvdHRvbSIsImNlbnRlckhlaWdodCIsImhlaWdodCIsInZlcnRzIiwidmVydGljZXMiLCJfcm90YXRlZCIsInUiLCJ4IiwidiIsInkiLCJ1cGRhdGVWZXJ0cyIsIm5vZGUiLCJhcHB4IiwiYW5jaG9yWCIsImFwcHkiLCJhbmNob3JZIiwic2l6YWJsZVdpZHRoIiwic2l6YWJsZUhlaWdodCIsInhTY2FsZSIsInlTY2FsZSIsImlzTmFOIiwiX3ZlcnRzRGlydHkiLCJkcmF3IiwiY3R4IiwiY29tcCIsIl9zcHJpdGVGcmFtZSIsIm1hdHJpeCIsIl93b3JsZE1hdHJpeCIsIm1hdHJpeG0iLCJtIiwiYSIsImIiLCJjIiwiZCIsInR4IiwidHkiLCJ0cmFuc2Zvcm0iLCJzY2FsZSIsInJvdGF0ZSIsIk1hdGgiLCJQSSIsImNvbnRleHQiLCJzZXRHbG9iYWxBbHBoYSIsIm9wYWNpdHkiLCJ0ZXgiLCJfdGV4dHVyZSIsImltYWdlIiwiZ2V0Q29sb3JpemVkSW1hZ2UiLCJfY29sb3IiLCJkcmF3Q2FsbCIsIm9mZiIsImxkIiwicmQiLCJ0ZCIsImJkIiwidyIsImgiLCJzeCIsInN5Iiwic3ciLCJzaCIsInIiLCJkcmF3SW1hZ2UiLCJDYW52YXNT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RUFBRSxHQUFHTCxFQUFFLENBQUM3QyxDQUFSO0FBQ0FtRCxRQUFBQSxFQUFFLEdBQUdQLEVBQUUsQ0FBQzlDLENBQUgsR0FBT21ELEVBQVo7QUFDQUcsUUFBQUEsRUFBRSxHQUFHTixFQUFFLENBQUM5QyxDQUFILEdBQU9rRCxFQUFaOztBQUVBLFlBQUlDLEVBQUUsR0FBRyxDQUFMLElBQVVDLEVBQUUsR0FBRyxDQUFmLElBQW9CTCxDQUFDLEdBQUcsQ0FBeEIsSUFBNkJDLENBQUMsR0FBRyxDQUFyQyxFQUF3QztBQUNwQ2pDLFVBQUFBLEdBQUcsQ0FBQ3VDLFNBQUosQ0FBY2hCLEtBQWQsRUFDSVcsRUFESixFQUNRQyxFQURSLEVBQ1lDLEVBRFosRUFDZ0JDLEVBRGhCLEVBRUlyRCxDQUZKLEVBRU9FLENBRlAsRUFFVThDLENBRlYsRUFFYUMsQ0FGYjtBQUdBUCxVQUFBQSxRQUFRO0FBQ1g7QUFDSjtBQUNKOztBQUNELFdBQU9BLFFBQVA7QUFDSDs7O0VBOUkyQ2MiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IEFzc2VtYmxlciBmcm9tICcuLi8uLi8uLi9hc3NlbWJsZXInO1xuaW1wb3J0IFJlbmRlckRhdGEgZnJvbSAnLi4vcmVuZGVyLWRhdGEnO1xuaW1wb3J0IENhbnZhc1NpbXBsZVNwcml0ZSBmcm9tICcuL3NpbXBsZSc7XG5cbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzU2xpY2VkU3ByaXRlIGV4dGVuZHMgQ2FudmFzU2ltcGxlU3ByaXRlIHtcbiAgICBpbml0ICgpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyRGF0YSA9IG5ldyBSZW5kZXJEYXRhKCk7XG4gICAgICAgIHRoaXMuX3JlbmRlckRhdGEuZGF0YUxlbmd0aCA9IDQ7XG4gICAgfVxuXG4gICAgdXBkYXRlVVZzIChzcHJpdGUpIHtcbiAgICAgICAgbGV0IGZyYW1lID0gc3ByaXRlLnNwcml0ZUZyYW1lO1xuICAgICAgICBsZXQgcmVuZGVyRGF0YSA9IHRoaXMuX3JlbmRlckRhdGE7XG4gICAgICAgIGxldCByZWN0ID0gZnJhbWUuX3JlY3Q7XG4gICAgXG4gICAgICAgIC8vIGNhY3VsYXRlIHRleHR1cmUgY29vcmRpbmF0ZVxuICAgICAgICBsZXQgbGVmdFdpZHRoID0gZnJhbWUuaW5zZXRMZWZ0O1xuICAgICAgICBsZXQgcmlnaHRXaWR0aCA9IGZyYW1lLmluc2V0UmlnaHQ7XG4gICAgICAgIGxldCBjZW50ZXJXaWR0aCA9IHJlY3Qud2lkdGggLSBsZWZ0V2lkdGggLSByaWdodFdpZHRoO1xuICAgICAgICBsZXQgdG9wSGVpZ2h0ID0gZnJhbWUuaW5zZXRUb3A7XG4gICAgICAgIGxldCBib3R0b21IZWlnaHQgPSBmcmFtZS5pbnNldEJvdHRvbTtcbiAgICAgICAgbGV0IGNlbnRlckhlaWdodCA9IHJlY3QuaGVpZ2h0IC0gdG9wSGVpZ2h0IC0gYm90dG9tSGVpZ2h0O1xuICAgIFxuICAgICAgICAvLyB1diBjb21wdXRhdGlvbiBzaG91bGQgdGFrZSBzcHJpdGVzaGVldCBpbnRvIGFjY291bnQuXG4gICAgICAgIGxldCB2ZXJ0cyA9IHJlbmRlckRhdGEudmVydGljZXM7XG4gICAgICAgIGlmIChmcmFtZS5fcm90YXRlZCkge1xuICAgICAgICAgICAgdmVydHNbMF0udSA9IHJlY3QueDtcbiAgICAgICAgICAgIHZlcnRzWzFdLnUgPSBib3R0b21IZWlnaHQgKyByZWN0Lng7XG4gICAgICAgICAgICB2ZXJ0c1syXS51ID0gYm90dG9tSGVpZ2h0ICsgY2VudGVySGVpZ2h0ICsgcmVjdC54O1xuICAgICAgICAgICAgdmVydHNbM10udSA9IHJlY3QueCArIHJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgdmVydHNbM10udiA9IHJlY3QueTtcbiAgICAgICAgICAgIHZlcnRzWzJdLnYgPSBsZWZ0V2lkdGggKyByZWN0Lnk7XG4gICAgICAgICAgICB2ZXJ0c1sxXS52ID0gbGVmdFdpZHRoICsgY2VudGVyV2lkdGggKyByZWN0Lnk7XG4gICAgICAgICAgICB2ZXJ0c1swXS52ID0gcmVjdC55ICsgcmVjdC53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZlcnRzWzBdLnUgPSByZWN0Lng7XG4gICAgICAgICAgICB2ZXJ0c1sxXS51ID0gbGVmdFdpZHRoICsgcmVjdC54O1xuICAgICAgICAgICAgdmVydHNbMl0udSA9IGxlZnRXaWR0aCArIGNlbnRlcldpZHRoICsgcmVjdC54O1xuICAgICAgICAgICAgdmVydHNbM10udSA9IHJlY3QueCArIHJlY3Qud2lkdGg7XG4gICAgICAgICAgICB2ZXJ0c1szXS52ID0gcmVjdC55O1xuICAgICAgICAgICAgdmVydHNbMl0udiA9IHRvcEhlaWdodCArIHJlY3QueTtcbiAgICAgICAgICAgIHZlcnRzWzFdLnYgPSB0b3BIZWlnaHQgKyBjZW50ZXJIZWlnaHQgKyByZWN0Lnk7XG4gICAgICAgICAgICB2ZXJ0c1swXS52ID0gcmVjdC55ICsgcmVjdC5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdXBkYXRlVmVydHMgKHNwcml0ZSkge1xuICAgICAgICBsZXQgcmVuZGVyRGF0YSA9IHRoaXMuX3JlbmRlckRhdGEsXG4gICAgICAgICAgICB2ZXJ0cyA9IHJlbmRlckRhdGEudmVydGljZXMsXG4gICAgICAgICAgICBub2RlID0gc3ByaXRlLm5vZGUsXG4gICAgICAgICAgICB3aWR0aCA9IG5vZGUud2lkdGgsIGhlaWdodCA9IG5vZGUuaGVpZ2h0LFxuICAgICAgICAgICAgYXBweCA9IG5vZGUuYW5jaG9yWCAqIHdpZHRoLCBhcHB5ID0gbm9kZS5hbmNob3JZICogaGVpZ2h0O1xuICAgIFxuICAgICAgICBsZXQgZnJhbWUgPSBzcHJpdGUuc3ByaXRlRnJhbWU7XG4gICAgICAgIGxldCBsZWZ0V2lkdGggPSBmcmFtZS5pbnNldExlZnQ7XG4gICAgICAgIGxldCByaWdodFdpZHRoID0gZnJhbWUuaW5zZXRSaWdodDtcbiAgICAgICAgbGV0IHRvcEhlaWdodCA9IGZyYW1lLmluc2V0VG9wO1xuICAgICAgICBsZXQgYm90dG9tSGVpZ2h0ID0gZnJhbWUuaW5zZXRCb3R0b207XG4gICAgXG4gICAgICAgIGxldCBzaXphYmxlV2lkdGggPSB3aWR0aCAtIGxlZnRXaWR0aCAtIHJpZ2h0V2lkdGg7XG4gICAgICAgIGxldCBzaXphYmxlSGVpZ2h0ID0gaGVpZ2h0IC0gdG9wSGVpZ2h0IC0gYm90dG9tSGVpZ2h0O1xuICAgICAgICBsZXQgeFNjYWxlID0gd2lkdGggLyAobGVmdFdpZHRoICsgcmlnaHRXaWR0aCk7XG4gICAgICAgIGxldCB5U2NhbGUgPSBoZWlnaHQgLyAodG9wSGVpZ2h0ICsgYm90dG9tSGVpZ2h0KTtcbiAgICAgICAgeFNjYWxlID0gKGlzTmFOKHhTY2FsZSkgfHwgeFNjYWxlID4gMSkgPyAxIDogeFNjYWxlO1xuICAgICAgICB5U2NhbGUgPSAoaXNOYU4oeVNjYWxlKSB8fCB5U2NhbGUgPiAxKSA/IDEgOiB5U2NhbGU7XG4gICAgICAgIHNpemFibGVXaWR0aCA9IHNpemFibGVXaWR0aCA8IDAgPyAwIDogc2l6YWJsZVdpZHRoO1xuICAgICAgICBzaXphYmxlSGVpZ2h0ID0gc2l6YWJsZUhlaWdodCA8IDAgPyAwIDogc2l6YWJsZUhlaWdodDtcbiAgICAgICAgXG4gICAgICAgIGlmIChmcmFtZS5fcm90YXRlZCkge1xuICAgICAgICAgICAgdmVydHNbMF0ueSA9IC1hcHB4O1xuICAgICAgICAgICAgdmVydHNbMF0ueCA9IC1hcHB5O1xuICAgICAgICAgICAgdmVydHNbMV0ueSA9IHJpZ2h0V2lkdGggKiB4U2NhbGUgLSBhcHB4O1xuICAgICAgICAgICAgdmVydHNbMV0ueCA9IGJvdHRvbUhlaWdodCAqIHlTY2FsZSAtIGFwcHk7XG4gICAgICAgICAgICB2ZXJ0c1syXS55ID0gdmVydHNbMV0ueSArIHNpemFibGVXaWR0aDtcbiAgICAgICAgICAgIHZlcnRzWzJdLnggPSB2ZXJ0c1sxXS54ICsgc2l6YWJsZUhlaWdodDtcbiAgICAgICAgICAgIHZlcnRzWzNdLnkgPSB3aWR0aCAtIGFwcHg7XG4gICAgICAgICAgICB2ZXJ0c1szXS54ID0gaGVpZ2h0IC0gYXBweTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZlcnRzWzBdLnggPSAtYXBweDtcbiAgICAgICAgICAgIHZlcnRzWzBdLnkgPSAtYXBweTtcbiAgICAgICAgICAgIHZlcnRzWzFdLnggPSBsZWZ0V2lkdGggKiB4U2NhbGUgLSBhcHB4O1xuICAgICAgICAgICAgdmVydHNbMV0ueSA9IGJvdHRvbUhlaWdodCAqIHlTY2FsZSAtIGFwcHk7XG4gICAgICAgICAgICB2ZXJ0c1syXS54ID0gdmVydHNbMV0ueCArIHNpemFibGVXaWR0aDtcbiAgICAgICAgICAgIHZlcnRzWzJdLnkgPSB2ZXJ0c1sxXS55ICsgc2l6YWJsZUhlaWdodDtcbiAgICAgICAgICAgIHZlcnRzWzNdLnggPSB3aWR0aCAtIGFwcHg7XG4gICAgICAgICAgICB2ZXJ0c1szXS55ID0gaGVpZ2h0IC0gYXBweTtcbiAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIHNwcml0ZS5fdmVydHNEaXJ0eSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGRyYXcgKGN0eCwgY29tcCkge1xuICAgICAgICBsZXQgbm9kZSA9IGNvbXAubm9kZTtcbiAgICAgICAgbGV0IGZyYW1lID0gY29tcC5fc3ByaXRlRnJhbWU7XG4gICAgICAgIC8vIFRyYW5zZm9ybVxuICAgICAgICBsZXQgbWF0cml4ID0gbm9kZS5fd29ybGRNYXRyaXg7XG4gICAgICAgIGxldCBtYXRyaXhtID0gbWF0cml4Lm07XG4gICAgICAgIGxldCBhID0gbWF0cml4bVswXSwgYiA9IG1hdHJpeG1bMV0sIGMgPSBtYXRyaXhtWzRdLCBkID0gbWF0cml4bVs1XSxcbiAgICAgICAgICAgIHR4ID0gbWF0cml4bVsxMl0sIHR5ID0gbWF0cml4bVsxM107XG4gICAgICAgIGN0eC50cmFuc2Zvcm0oYSwgYiwgYywgZCwgdHgsIHR5KTtcbiAgICAgICAgY3R4LnNjYWxlKDEsIC0xKTtcbiAgICAgICAgaWYgKGZyYW1lLl9yb3RhdGVkKSB7XG4gICAgICAgICAgICBjdHgucm90YXRlKC0gTWF0aC5QSSAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IGhhbmRsZSBibGVuZCBmdW5jdGlvblxuXG4gICAgICAgIC8vIG9wYWNpdHlcbiAgICAgICAgdXRpbHMuY29udGV4dC5zZXRHbG9iYWxBbHBoYShjdHgsIG5vZGUub3BhY2l0eSAvIDI1NSk7XG5cbiAgICAgICAgbGV0IHRleCA9IGZyYW1lLl90ZXh0dXJlLFxuICAgICAgICAgICAgdmVydHMgPSB0aGlzLl9yZW5kZXJEYXRhLnZlcnRpY2VzO1xuXG4gICAgICAgIGxldCBpbWFnZSA9IHV0aWxzLmdldENvbG9yaXplZEltYWdlKHRleCwgbm9kZS5fY29sb3IpO1xuXG4gICAgICAgIGxldCBkcmF3Q2FsbCA9IDA7XG4gICAgICAgIGxldCBvZmYsIGxkLCByZCwgdGQsIGJkLFxuICAgICAgICAgICAgeCwgeSwgdywgaCxcbiAgICAgICAgICAgIHN4LCBzeSwgc3csIHNoO1xuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IDM7ICsrcikge1xuICAgICAgICAgICAgYmQgPSB2ZXJ0c1tyXTtcbiAgICAgICAgICAgIHRkID0gdmVydHNbcisxXTtcbiAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgMzsgKytjKSB7XG4gICAgICAgICAgICAgICAgbGQgPSB2ZXJ0c1tjXTtcbiAgICAgICAgICAgICAgICByZCA9IHZlcnRzW2MrMV07XG4gICAgICAgICAgICAgICAgeCA9IGxkLng7XG4gICAgICAgICAgICAgICAgeSA9IGJkLnk7XG4gICAgICAgICAgICAgICAgdyA9IHJkLnggLSB4O1xuICAgICAgICAgICAgICAgIGggPSB0ZC55IC0geTtcbiAgICAgICAgICAgICAgICB5ID0gLSB5IC0gaDtcblxuICAgICAgICAgICAgICAgIHN4ID0gbGQudTtcbiAgICAgICAgICAgICAgICAvLyBpbnZlcnQgdGV4dHVyZSBiZWNhdXNlIHRleHR1cmUgdXYgaXMgaW4gVUkgY29vcmRpbmF0ZXMgKG9yaWdpbiBhdCB0b3AgbGVmdClcbiAgICAgICAgICAgICAgICBzeSA9IHRkLnY7XG4gICAgICAgICAgICAgICAgc3cgPSByZC51IC0gc3g7XG4gICAgICAgICAgICAgICAgc2ggPSBiZC52IC0gc3k7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3cgPiAwICYmIHNoID4gMCAmJiB3ID4gMCAmJiBoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3gsIHN5LCBzdywgc2gsXG4gICAgICAgICAgICAgICAgICAgICAgICB4LCB5LCB3LCBoKTtcbiAgICAgICAgICAgICAgICAgICAgZHJhd0NhbGwrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRyYXdDYWxsO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiLyJ9
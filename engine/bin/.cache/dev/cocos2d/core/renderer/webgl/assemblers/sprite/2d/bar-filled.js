
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/webgl/assemblers/sprite/2d/bar-filled.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _assembler2d = _interopRequireDefault(require("../../../../assembler-2d"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }

var Sprite = require('../../../../../components/CCSprite');

var FillType = Sprite.FillType;

var BarFilledAssembler = /*#__PURE__*/function (_Assembler2D) {
  _inheritsLoose(BarFilledAssembler, _Assembler2D);

  function BarFilledAssembler() {
    return _Assembler2D.apply(this, arguments) || this;
  }

  var _proto = BarFilledAssembler.prototype;

  _proto.updateRenderData = function updateRenderData(sprite) {
    var frame = sprite._spriteFrame;
    this.packToDynamicAtlas(sprite, frame);

    if (!sprite._vertsDirty) {
      return;
    }

    var fillStart = sprite._fillStart;
    var fillRange = sprite._fillRange;

    if (fillRange < 0) {
      fillStart += fillRange;
      fillRange = -fillRange;
    }

    fillRange = fillStart + fillRange;
    fillStart = fillStart > 1.0 ? 1.0 : fillStart;
    fillStart = fillStart < 0.0 ? 0.0 : fillStart;
    fillRange = fillRange > 1.0 ? 1.0 : fillRange;
    fillRange = fillRange < 0.0 ? 0.0 : fillRange;
    fillRange = fillRange - fillStart;
    fillRange = fillRange < 0 ? 0 : fillRange;
    var fillEnd = fillStart + fillRange;
    fillEnd = fillEnd > 1 ? 1 : fillEnd;
    this.updateUVs(sprite, fillStart, fillEnd);
    this.updateVerts(sprite, fillStart, fillEnd);
    sprite._vertsDirty = false;
  };

  _proto.updateUVs = function updateUVs(sprite, fillStart, fillEnd) {
    var spriteFrame = sprite._spriteFrame; //build uvs

    var atlasWidth = spriteFrame._texture.width;
    var atlasHeight = spriteFrame._texture.height;
    var textureRect = spriteFrame._rect; //uv computation should take spritesheet into account.

    var ul, vb, ur, vt;
    var quadUV0, quadUV1, quadUV2, quadUV3, quadUV4, quadUV5, quadUV6, quadUV7;

    if (spriteFrame._rotated) {
      ul = textureRect.x / atlasWidth;
      vb = (textureRect.y + textureRect.width) / atlasHeight;
      ur = (textureRect.x + textureRect.height) / atlasWidth;
      vt = textureRect.y / atlasHeight;
      quadUV0 = quadUV2 = ul;
      quadUV4 = quadUV6 = ur;
      quadUV3 = quadUV7 = vb;
      quadUV1 = quadUV5 = vt;
    } else {
      ul = textureRect.x / atlasWidth;
      vb = (textureRect.y + textureRect.height) / atlasHeight;
      ur = (textureRect.x + textureRect.width) / atlasWidth;
      vt = textureRect.y / atlasHeight;
      quadUV0 = quadUV4 = ul;
      quadUV2 = quadUV6 = ur;
      quadUV1 = quadUV3 = vb;
      quadUV5 = quadUV7 = vt;
    }

    var verts = this._renderData.vDatas[0];
    var uvOffset = this.uvOffset;
    var floatsPerVert = this.floatsPerVert;

    switch (sprite._fillType) {
      case FillType.HORIZONTAL:
        verts[uvOffset] = quadUV0 + (quadUV2 - quadUV0) * fillStart;
        verts[uvOffset + 1] = quadUV1 + (quadUV3 - quadUV1) * fillStart;
        verts[uvOffset + floatsPerVert] = quadUV0 + (quadUV2 - quadUV0) * fillEnd;
        verts[uvOffset + floatsPerVert + 1] = quadUV1 + (quadUV3 - quadUV1) * fillEnd;
        verts[uvOffset + floatsPerVert * 2] = quadUV4 + (quadUV6 - quadUV4) * fillStart;
        verts[uvOffset + floatsPerVert * 2 + 1] = quadUV5 + (quadUV7 - quadUV5) * fillStart;
        verts[uvOffset + floatsPerVert * 3] = quadUV4 + (quadUV6 - quadUV4) * fillEnd;
        verts[uvOffset + floatsPerVert * 3 + 1] = quadUV5 + (quadUV7 - quadUV5) * fillEnd;
        break;

      case FillType.VERTICAL:
        verts[uvOffset] = quadUV0 + (quadUV4 - quadUV0) * fillStart;
        verts[uvOffset + 1] = quadUV1 + (quadUV5 - quadUV1) * fillStart;
        verts[uvOffset + floatsPerVert] = quadUV2 + (quadUV6 - quadUV2) * fillStart;
        verts[uvOffset + floatsPerVert + 1] = quadUV3 + (quadUV7 - quadUV3) * fillStart;
        verts[uvOffset + floatsPerVert * 2] = quadUV0 + (quadUV4 - quadUV0) * fillEnd;
        verts[uvOffset + floatsPerVert * 2 + 1] = quadUV1 + (quadUV5 - quadUV1) * fillEnd;
        verts[uvOffset + floatsPerVert * 3] = quadUV2 + (quadUV6 - quadUV2) * fillEnd;
        verts[uvOffset + floatsPerVert * 3 + 1] = quadUV3 + (quadUV7 - quadUV3) * fillEnd;
        break;

      default:
        cc.errorID(2626);
        break;
    }
  };

  _proto.updateVerts = function updateVerts(sprite, fillStart, fillEnd) {
    var node = sprite.node,
        width = node.width,
        height = node.height,
        appx = node.anchorX * width,
        appy = node.anchorY * height;
    var l = -appx,
        b = -appy,
        r = width - appx,
        t = height - appy;
    var progressStart, progressEnd;

    switch (sprite._fillType) {
      case FillType.HORIZONTAL:
        progressStart = l + (r - l) * fillStart;
        progressEnd = l + (r - l) * fillEnd;
        l = progressStart;
        r = progressEnd;
        break;

      case FillType.VERTICAL:
        progressStart = b + (t - b) * fillStart;
        progressEnd = b + (t - b) * fillEnd;
        b = progressStart;
        t = progressEnd;
        break;

      default:
        cc.errorID(2626);
        break;
    }

    var local = this._local;
    local[0] = l;
    local[1] = b;
    local[2] = r;
    local[3] = t;
    this.updateWorldVerts(sprite);
  };

  return BarFilledAssembler;
}(_assembler2d["default"]);

exports["default"] = BarFilledAssembler;
module.exports = exports["default"];
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC9jb3JlL3JlbmRlcmVyL3dlYmdsL2Fzc2VtYmxlcnMvc3ByaXRlLzJkL2Jhci1maWxsZWQuanMiXSwibmFtZXMiOlsiU3ByaXRlIiwicmVxdWlyZSIsIkZpbGxUeXBlIiwiQmFyRmlsbGVkQXNzZW1ibGVyIiwidXBkYXRlUmVuZGVyRGF0YSIsInNwcml0ZSIsImZyYW1lIiwiX3Nwcml0ZUZyYW1lIiwicGFja1RvRHluYW1pY0F0bGFzIiwiX3ZlcnRzRGlydHkiLCJmaWxsU3RhcnQiLCJfZmlsbFN0YXJ0IiwiZmlsbFJhbmdlIiwiX2ZpbGxSYW5nZSIsImZpbGxFbmQiLCJ1cGRhdGVVVnMiLCJ1cGRhdGVWZXJ0cyIsInNwcml0ZUZyYW1lIiwiYXRsYXNXaWR0aCIsIl90ZXh0dXJlIiwid2lkdGgiLCJhdGxhc0hlaWdodCIsImhlaWdodCIsInRleHR1cmVSZWN0IiwiX3JlY3QiLCJ1bCIsInZiIiwidXIiLCJ2dCIsInF1YWRVVjAiLCJxdWFkVVYxIiwicXVhZFVWMiIsInF1YWRVVjMiLCJxdWFkVVY0IiwicXVhZFVWNSIsInF1YWRVVjYiLCJxdWFkVVY3IiwiX3JvdGF0ZWQiLCJ4IiwieSIsInZlcnRzIiwiX3JlbmRlckRhdGEiLCJ2RGF0YXMiLCJ1dk9mZnNldCIsImZsb2F0c1BlclZlcnQiLCJfZmlsbFR5cGUiLCJIT1JJWk9OVEFMIiwiVkVSVElDQUwiLCJjYyIsImVycm9ySUQiLCJub2RlIiwiYXBweCIsImFuY2hvclgiLCJhcHB5IiwiYW5jaG9yWSIsImwiLCJiIiwiciIsInQiLCJwcm9ncmVzc1N0YXJ0IiwicHJvZ3Jlc3NFbmQiLCJsb2NhbCIsIl9sb2NhbCIsInVwZGF0ZVdvcmxkVmVydHMiLCJBc3NlbWJsZXIyRCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQXlCQTs7Ozs7O0FBRUEsSUFBTUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsb0NBQUQsQ0FBdEI7O0FBQ0EsSUFBTUMsUUFBUSxHQUFHRixNQUFN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LElBQUFBLEtBQUssQ0FBQyxDQUFELENBQUwsR0FBV04sQ0FBWDtBQUNBTSxJQUFBQSxLQUFLLENBQUMsQ0FBRCxDQUFMLEdBQVdMLENBQVg7QUFDQUssSUFBQUEsS0FBSyxDQUFDLENBQUQsQ0FBTCxHQUFXSixDQUFYO0FBQ0FJLElBQUFBLEtBQUssQ0FBQyxDQUFELENBQUwsR0FBV0gsQ0FBWDtBQUVBLFNBQUtLLGdCQUFMLENBQXNCMUQsTUFBdEI7QUFDSDs7O0VBdkkyQzJEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IEFzc2VtYmxlcjJEIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2VtYmxlci0yZCc7XG5cbmNvbnN0IFNwcml0ZSA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uLy4uL2NvbXBvbmVudHMvQ0NTcHJpdGUnKTtcbmNvbnN0IEZpbGxUeXBlID0gU3ByaXRlLkZpbGxUeXBlO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXJGaWxsZWRBc3NlbWJsZXIgZXh0ZW5kcyBBc3NlbWJsZXIyRCB7XG4gICAgdXBkYXRlUmVuZGVyRGF0YSAoc3ByaXRlKSB7XG4gICAgICAgIGxldCBmcmFtZSA9IHNwcml0ZS5fc3ByaXRlRnJhbWU7XG4gICAgICAgIHRoaXMucGFja1RvRHluYW1pY0F0bGFzKHNwcml0ZSwgZnJhbWUpO1xuXG4gICAgICAgIGlmICghc3ByaXRlLl92ZXJ0c0RpcnR5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmlsbFN0YXJ0ID0gc3ByaXRlLl9maWxsU3RhcnQ7XG4gICAgICAgIGxldCBmaWxsUmFuZ2UgPSBzcHJpdGUuX2ZpbGxSYW5nZTtcblxuICAgICAgICBpZiAoZmlsbFJhbmdlIDwgMCkge1xuICAgICAgICAgICAgZmlsbFN0YXJ0ICs9IGZpbGxSYW5nZTtcbiAgICAgICAgICAgIGZpbGxSYW5nZSA9IC1maWxsUmFuZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBmaWxsUmFuZ2UgPSBmaWxsU3RhcnQgKyBmaWxsUmFuZ2U7XG5cbiAgICAgICAgZmlsbFN0YXJ0ID0gZmlsbFN0YXJ0ID4gMS4wID8gMS4wIDogZmlsbFN0YXJ0O1xuICAgICAgICBmaWxsU3RhcnQgPSBmaWxsU3RhcnQgPCAwLjAgPyAwLjAgOiBmaWxsU3RhcnQ7XG5cbiAgICAgICAgZmlsbFJhbmdlID0gZmlsbFJhbmdlID4gMS4wID8gMS4wIDogZmlsbFJhbmdlO1xuICAgICAgICBmaWxsUmFuZ2UgPSBmaWxsUmFuZ2UgPCAwLjAgPyAwLjAgOiBmaWxsUmFuZ2U7XG4gICAgICAgIGZpbGxSYW5nZSA9IGZpbGxSYW5nZSAtIGZpbGxTdGFydDtcbiAgICAgICAgZmlsbFJhbmdlID0gZmlsbFJhbmdlIDwgMCA/IDAgOiBmaWxsUmFuZ2U7XG5cbiAgICAgICAgbGV0IGZpbGxFbmQgPSBmaWxsU3RhcnQgKyBmaWxsUmFuZ2U7XG4gICAgICAgIGZpbGxFbmQgPSBmaWxsRW5kID4gMSA/IDEgOiBmaWxsRW5kO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVVZzKHNwcml0ZSwgZmlsbFN0YXJ0LCBmaWxsRW5kKTtcbiAgICAgICAgdGhpcy51cGRhdGVWZXJ0cyhzcHJpdGUsIGZpbGxTdGFydCwgZmlsbEVuZCk7XG5cbiAgICAgICAgc3ByaXRlLl92ZXJ0c0RpcnR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdXBkYXRlVVZzIChzcHJpdGUsIGZpbGxTdGFydCwgZmlsbEVuZCkge1xuICAgICAgICBsZXQgc3ByaXRlRnJhbWUgPSBzcHJpdGUuX3Nwcml0ZUZyYW1lO1xuXG4gICAgICAgIC8vYnVpbGQgdXZzXG4gICAgICAgIGxldCBhdGxhc1dpZHRoID0gc3ByaXRlRnJhbWUuX3RleHR1cmUud2lkdGg7XG4gICAgICAgIGxldCBhdGxhc0hlaWdodCA9IHNwcml0ZUZyYW1lLl90ZXh0dXJlLmhlaWdodDtcbiAgICAgICAgbGV0IHRleHR1cmVSZWN0ID0gc3ByaXRlRnJhbWUuX3JlY3Q7XG4gICAgICAgIC8vdXYgY29tcHV0YXRpb24gc2hvdWxkIHRha2Ugc3ByaXRlc2hlZXQgaW50byBhY2NvdW50LlxuICAgICAgICBsZXQgdWwsIHZiLCB1ciwgdnQ7XG4gICAgICAgIGxldCBxdWFkVVYwLCBxdWFkVVYxLCBxdWFkVVYyLCBxdWFkVVYzLCBxdWFkVVY0LCBxdWFkVVY1LCBxdWFkVVY2LCBxdWFkVVY3O1xuICAgICAgICBpZiAoc3ByaXRlRnJhbWUuX3JvdGF0ZWQpIHtcbiAgICAgICAgICAgIHVsID0gKHRleHR1cmVSZWN0LngpIC8gYXRsYXNXaWR0aDtcbiAgICAgICAgICAgIHZiID0gKHRleHR1cmVSZWN0LnkgKyB0ZXh0dXJlUmVjdC53aWR0aCkgLyBhdGxhc0hlaWdodDtcbiAgICAgICAgICAgIHVyID0gKHRleHR1cmVSZWN0LnggKyB0ZXh0dXJlUmVjdC5oZWlnaHQpIC8gYXRsYXNXaWR0aDtcbiAgICAgICAgICAgIHZ0ID0gKHRleHR1cmVSZWN0LnkpIC8gYXRsYXNIZWlnaHQ7XG5cbiAgICAgICAgICAgIHF1YWRVVjAgPSBxdWFkVVYyID0gdWw7XG4gICAgICAgICAgICBxdWFkVVY0ID0gcXVhZFVWNiA9IHVyO1xuICAgICAgICAgICAgcXVhZFVWMyA9IHF1YWRVVjcgPSB2YjtcbiAgICAgICAgICAgIHF1YWRVVjEgPSBxdWFkVVY1ID0gdnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1bCA9ICh0ZXh0dXJlUmVjdC54KSAvIGF0bGFzV2lkdGg7XG4gICAgICAgICAgICB2YiA9ICh0ZXh0dXJlUmVjdC55ICsgdGV4dHVyZVJlY3QuaGVpZ2h0KSAvIGF0bGFzSGVpZ2h0O1xuICAgICAgICAgICAgdXIgPSAodGV4dHVyZVJlY3QueCArIHRleHR1cmVSZWN0LndpZHRoKSAvIGF0bGFzV2lkdGg7XG4gICAgICAgICAgICB2dCA9ICh0ZXh0dXJlUmVjdC55KSAvIGF0bGFzSGVpZ2h0O1xuXG4gICAgICAgICAgICBxdWFkVVYwID0gcXVhZFVWNCA9IHVsO1xuICAgICAgICAgICAgcXVhZFVWMiA9IHF1YWRVVjYgPSB1cjtcbiAgICAgICAgICAgIHF1YWRVVjEgPSBxdWFkVVYzID0gdmI7XG4gICAgICAgICAgICBxdWFkVVY1ID0gcXVhZFVWNyA9IHZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHZlcnRzID0gdGhpcy5fcmVuZGVyRGF0YS52RGF0YXNbMF07XG4gICAgICAgIGxldCB1dk9mZnNldCA9IHRoaXMudXZPZmZzZXQ7XG4gICAgICAgIGxldCBmbG9hdHNQZXJWZXJ0ID0gdGhpcy5mbG9hdHNQZXJWZXJ0O1xuICAgICAgICBzd2l0Y2ggKHNwcml0ZS5fZmlsbFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgRmlsbFR5cGUuSE9SSVpPTlRBTDpcbiAgICAgICAgICAgICAgICB2ZXJ0c1t1dk9mZnNldF0gPSBxdWFkVVYwICsgKHF1YWRVVjIgLSBxdWFkVVYwKSAqIGZpbGxTdGFydDtcbiAgICAgICAgICAgICAgICB2ZXJ0c1t1dk9mZnNldCArIDFdID0gcXVhZFVWMSArIChxdWFkVVYzIC0gcXVhZFVWMSkgKiBmaWxsU3RhcnQ7XG4gICAgICAgICAgICAgICAgdmVydHNbdXZPZmZzZXQgKyBmbG9hdHNQZXJWZXJ0XSA9IHF1YWRVVjAgKyAocXVhZFVWMiAtIHF1YWRVVjApICogZmlsbEVuZDtcbiAgICAgICAgICAgICAgICB2ZXJ0c1t1dk9mZnNldCArIGZsb2F0c1BlclZlcnQgKyAxXSA9IHF1YWRVVjEgKyAocXVhZFVWMyAtIHF1YWRVVjEpICogZmlsbEVuZDtcbiAgICAgICAgICAgICAgICB2ZXJ0c1t1dk9mZnNldCArIGZsb2F0c1BlclZlcnQgKiAyXSA9IHF1YWRVVjQgKyAocXVhZFVWNiAtIHF1YWRVVjQpICogZmlsbFN0YXJ0O1xuICAgICAgICAgICAgICAgIHZlcnRzW3V2T2Zmc2V0ICsgZmxvYXRzUGVyVmVydCAqIDIgKyAxXSA9IHF1YWRVVjUgKyAocXVhZFVWNyAtIHF1YWRVVjUpICogZmlsbFN0YXJ0O1xuICAgICAgICAgICAgICAgIHZlcnRzW3V2T2Zmc2V0ICsgZmxvYXRzUGVyVmVydCAqIDNdID0gcXVhZFVWNCArIChxdWFkVVY2IC0gcXVhZFVWNCkgKiBmaWxsRW5kO1xuICAgICAgICAgICAgICAgIHZlcnRzW3V2T2Zmc2V0ICsgZmxvYXRzUGVyVmVydCAqIDMgKyAxXSA9IHF1YWRVVjUgKyAocXVhZFVWNyAtIHF1YWRVVjUpICogZmlsbEVuZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRmlsbFR5cGUuVkVSVElDQUw6XG4gICAgICAgICAgICAgICAgdmVydHNbdXZPZmZzZXRdID0gcXVhZFVWMCArIChxdWFkVVY0IC0gcXVhZFVWMCkgKiBmaWxsU3RhcnQ7XG4gICAgICAgICAgICAgICAgdmVydHNbdXZPZmZzZXQgKyAxXSA9IHF1YWRVVjEgKyAocXVhZFVWNSAtIHF1YWRVVjEpICogZmlsbFN0YXJ0O1xuICAgICAgICAgICAgICAgIHZlcnRzW3V2T2Zmc2V0ICsgZmxvYXRzUGVyVmVydF0gPSBxdWFkVVYyICsgKHF1YWRVVjYgLSBxdWFkVVYyKSAqIGZpbGxTdGFydDtcbiAgICAgICAgICAgICAgICB2ZXJ0c1t1dk9mZnNldCArIGZsb2F0c1BlclZlcnQgKyAxXSA9IHF1YWRVVjMgKyAocXVhZFVWNyAtIHF1YWRVVjMpICogZmlsbFN0YXJ0O1xuICAgICAgICAgICAgICAgIHZlcnRzW3V2T2Zmc2V0ICsgZmxvYXRzUGVyVmVydCAqIDJdID0gcXVhZFVWMCArIChxdWFkVVY0IC0gcXVhZFVWMCkgKiBmaWxsRW5kO1xuICAgICAgICAgICAgICAgIHZlcnRzW3V2T2Zmc2V0ICsgZmxvYXRzUGVyVmVydCAqIDIgKyAxXSA9IHF1YWRVVjEgKyAocXVhZFVWNSAtIHF1YWRVVjEpICogZmlsbEVuZDtcbiAgICAgICAgICAgICAgICB2ZXJ0c1t1dk9mZnNldCArIGZsb2F0c1BlclZlcnQgKiAzXSA9IHF1YWRVVjIgKyAocXVhZFVWNiAtIHF1YWRVVjIpICogZmlsbEVuZDtcbiAgICAgICAgICAgICAgICB2ZXJ0c1t1dk9mZnNldCArIGZsb2F0c1BlclZlcnQgKiAzICsgMV0gPSBxdWFkVVYzICsgKHF1YWRVVjcgLSBxdWFkVVYzKSAqIGZpbGxFbmQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNjLmVycm9ySUQoMjYyNik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVWZXJ0cyAoc3ByaXRlLCBmaWxsU3RhcnQsIGZpbGxFbmQpIHtcbiAgICAgICAgbGV0IG5vZGUgPSBzcHJpdGUubm9kZSxcbiAgICAgICAgICAgIHdpZHRoID0gbm9kZS53aWR0aCwgaGVpZ2h0ID0gbm9kZS5oZWlnaHQsXG4gICAgICAgICAgICBhcHB4ID0gbm9kZS5hbmNob3JYICogd2lkdGgsIGFwcHkgPSBub2RlLmFuY2hvclkgKiBoZWlnaHQ7XG5cbiAgICAgICAgbGV0IGwgPSAtYXBweCwgYiA9IC1hcHB5LFxuICAgICAgICAgICAgciA9IHdpZHRoIC0gYXBweCwgdCA9IGhlaWdodCAtIGFwcHk7XG5cbiAgICAgICAgbGV0IHByb2dyZXNzU3RhcnQsIHByb2dyZXNzRW5kO1xuICAgICAgICBzd2l0Y2ggKHNwcml0ZS5fZmlsbFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgRmlsbFR5cGUuSE9SSVpPTlRBTDpcbiAgICAgICAgICAgICAgICBwcm9ncmVzc1N0YXJ0ID0gbCArIChyIC0gbCkgKiBmaWxsU3RhcnQ7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NFbmQgPSBsICsgKHIgLSBsKSAqIGZpbGxFbmQ7XG5cbiAgICAgICAgICAgICAgICBsID0gcHJvZ3Jlc3NTdGFydDtcbiAgICAgICAgICAgICAgICByID0gcHJvZ3Jlc3NFbmQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEZpbGxUeXBlLlZFUlRJQ0FMOlxuICAgICAgICAgICAgICAgIHByb2dyZXNzU3RhcnQgPSBiICsgKHQgLSBiKSAqIGZpbGxTdGFydDtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0VuZCA9IGIgKyAodCAtIGIpICogZmlsbEVuZDtcblxuICAgICAgICAgICAgICAgIGIgPSBwcm9ncmVzc1N0YXJ0O1xuICAgICAgICAgICAgICAgIHQgPSBwcm9ncmVzc0VuZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY2MuZXJyb3JJRCgyNjI2KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2NhbCA9IHRoaXMuX2xvY2FsO1xuICAgICAgICBsb2NhbFswXSA9IGw7XG4gICAgICAgIGxvY2FsWzFdID0gYjtcbiAgICAgICAgbG9jYWxbMl0gPSByO1xuICAgICAgICBsb2NhbFszXSA9IHQ7XG5cbiAgICAgICAgdGhpcy51cGRhdGVXb3JsZFZlcnRzKHNwcml0ZSk7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvIn0=
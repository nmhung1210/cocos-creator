
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/webgl/assemblers/label/2d/bmfont.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _bmfont = _interopRequireDefault(require("../../../../utils/label/bmfont"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }

var _dataOffset = 0;

var WebglBmfontAssembler = /*#__PURE__*/function (_BmfontAssembler) {
  _inheritsLoose(WebglBmfontAssembler, _BmfontAssembler);

  function WebglBmfontAssembler() {
    return _BmfontAssembler.apply(this, arguments) || this;
  }

  var _proto = WebglBmfontAssembler.prototype;

  _proto.initData = function initData() {
    this._renderData.createFlexData(0, 4, 6, this.getVfmt());
  };

  _proto._reserveQuads = function _reserveQuads(comp, count) {
    var verticesCount = count * 4;
    var indicesCount = count * 6;
    var flexBuffer = this._renderData._flexBuffer;
    flexBuffer.reserve(verticesCount, indicesCount);
    flexBuffer.used(verticesCount, indicesCount);
    var iData = this._renderData.iDatas[0];

    for (var i = 0, vid = 0, l = indicesCount; i < l; i += 6, vid += 4) {
      iData[i] = vid;
      iData[i + 1] = vid + 1;
      iData[i + 2] = vid + 2;
      iData[i + 3] = vid + 1;
      iData[i + 4] = vid + 3;
      iData[i + 5] = vid + 2;
    }

    _dataOffset = 0;
  };

  _proto._quadsUpdated = function _quadsUpdated(comp) {
    _dataOffset = 0;
    var flexBuffer = this._renderData._flexBuffer;
    flexBuffer.used(this.verticesCount, this.indicesCount);
  };

  _proto._getColor = function _getColor(comp) {
    return comp.node._color._val;
  };

  _proto.appendQuad = function appendQuad(comp, texture, rect, rotated, x, y, scale) {
    var renderData = this._renderData;
    var verts = renderData.vDatas[0],
        uintVerts = renderData.uintVDatas[0];
    this.verticesCount += 4;
    this.indicesCount = this.verticesCount / 2 * 3;

    var texw = texture.width,
        texh = texture.height,
        rectWidth = rect.width,
        rectHeight = rect.height,
        color = this._getColor(comp);

    var l, b, r, t;
    var floatsPerVert = this.floatsPerVert; // uvs

    var uvDataOffset = _dataOffset + this.uvOffset;

    if (!rotated) {
      l = rect.x / texw;
      r = (rect.x + rectWidth) / texw;
      b = (rect.y + rectHeight) / texh;
      t = rect.y / texh;
      verts[uvDataOffset] = l;
      verts[uvDataOffset + 1] = b;
      uvDataOffset += floatsPerVert;
      verts[uvDataOffset] = r;
      verts[uvDataOffset + 1] = b;
      uvDataOffset += floatsPerVert;
      verts[uvDataOffset] = l;
      verts[uvDataOffset + 1] = t;
      uvDataOffset += floatsPerVert;
      verts[uvDataOffset] = r;
      verts[uvDataOffset + 1] = t;
    } else {
      l = rect.x / texw;
      r = (rect.x + rectHeight) / texw;
      b = (rect.y + rectWidth) / texh;
      t = rect.y / texh;
      verts[uvDataOffset] = l;
      verts[uvDataOffset + 1] = t;
      uvDataOffset += floatsPerVert;
      verts[uvDataOffset] = l;
      verts[uvDataOffset + 1] = b;
      uvDataOffset += floatsPerVert;
      verts[uvDataOffset] = r;
      verts[uvDataOffset + 1] = t;
      uvDataOffset += floatsPerVert;
      verts[uvDataOffset] = r;
      verts[uvDataOffset + 1] = b;
    } // positions


    l = x;
    r = x + rectWidth * scale;
    b = y - rectHeight * scale;
    t = y;
    this.appendVerts(comp, _dataOffset, l, r, b, t); // colors

    var colorOffset = _dataOffset + this.colorOffset;

    for (var i = 0; i < 4; i++) {
      uintVerts[colorOffset] = color;
      colorOffset += floatsPerVert;
    }

    _dataOffset += this.floatsPerVert * 4;
  };

  _proto.appendVerts = function appendVerts(comp, offset, l, r, b, t) {
    var local = this._local;
    var floatsPerVert = this.floatsPerVert;
    local[offset] = l;
    local[offset + 1] = b;
    offset += floatsPerVert;
    local[offset] = r;
    local[offset + 1] = b;
    offset += floatsPerVert;
    local[offset] = l;
    local[offset + 1] = t;
    offset += floatsPerVert;
    local[offset] = r;
    local[offset + 1] = t;
  };

  _proto.updateWorldVerts = function updateWorldVerts(comp) {
    var node = comp.node;
    var matrix = node._worldMatrix;
    var matrixm = matrix.m,
        a = matrixm[0],
        b = matrixm[1],
        c = matrixm[4],
        d = matrixm[5],
        tx = matrixm[12],
        ty = matrixm[13];
    var local = this._local;
    var world = this._renderData.vDatas[0];
    var floatsPerVert = this.floatsPerVert;

    for (var offset = 0; offset < local.length; offset += floatsPerVert) {
      var x = local[offset];
      var y = local[offset + 1];
      world[offset] = x * a + y * c + tx;
      world[offset + 1] = x * b + y * d + ty;
    }
  };

  return WebglBmfontAssembler;
}(_bmfont["default"]);

exports["default"] = WebglBmfontAssembler;
module.exports = exports["default"];
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC9jb3JlL3JlbmRlcmVyL3dlYmdsL2Fzc2VtYmxlcnMvbGFiZWwvMmQvYm1mb250LmpzIl0sIm5hbWVzIjpbIl9kYXRhT2Zmc2V0IiwiV2ViZ2xCbWZvbnRBc3NlbWJsZXIiLCJpbml0RGF0YSIsIl9yZW5kZXJEYXRhIiwiY3JlYXRlRmxleERhdGEiLCJnZXRWZm10IiwiX3Jlc2VydmVRdWFkcyIsImNvbXAiLCJjb3VudCIsInZlcnRpY2VzQ291bnQiLCJpbmRpY2VzQ291bnQiLCJmbGV4QnVmZmVyIiwiX2ZsZXhCdWZmZXIiLCJyZXNlcnZlIiwidXNlZCIsImlEYXRhIiwiaURhdGFzIiwiaSIsInZpZCIsImwiLCJfcXVhZHNVcGRhdGVkIiwiX2dldENvbG9yIiwibm9kZSIsIl9jb2xvciIsIl92YWwiLCJhcHBlbmRRdWFkIiwidGV4dHVyZSIsInJlY3QiLCJyb3RhdGVkIiwieCIsInkiLCJzY2FsZSIsInJlbmRlckRhdGEiLCJ2ZXJ0cyIsInZEYXRhcyIsInVpbnRWZXJ0cyIsInVpbnRWRGF0YXMiLCJ0ZXh3Iiwid2lkdGgiLCJ0ZXhoIiwiaGVpZ2h0IiwicmVjdFdpZHRoIiwicmVjdEhlaWdodCIsImNvbG9yIiwiYiIsInIiLCJ0IiwiZmxvYXRzUGVyVmVydCIsInV2RGF0YU9mZnNldCIsInV2T2Zmc2V0IiwiYXBwZW5kVmVydHMiLCJjb2xvck9mZnNldCIsIm9mZnNldCIsImxvY2FsIiwiX2xvY2FsIiwidXBkYXRlV29ybGRWZXJ0cyIsIm1hdHJpeCIsIl93b3JsZE1hdHJpeCIsIm1hdHJpeG0iLCJtIiwiYSIsImMiLCJkIiwidHgiLCJ0eSIsIndvcmxkIiwibGVuZ3RoIiwiQm1mb250QXNzZW1ibGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBOzs7Ozs7QUFFQSxJQUFJQSxXQUFXLEdBQUcsQ0FBbEI7O0lBRXFCQzs7Ozs7Ozs7O1NBQ2pCQyxXQUFBLG9CQUFZO0FBQ1IsU0FBS0MsV0FBTCxDQUFp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QUFNLEdBQUcsQ0FBVixDQUFiO0FBQ0FhLE1BQUFBLEtBQUssQ0FBQ2IsTUFBRCxDQUFMLEdBQWdCdkIsQ0FBQyxHQUFHK0IsQ0FBSixHQUFROUIsQ0FBQyxHQUFHK0IsQ0FBWixHQUFnQkUsRUFBaEM7QUFDQUUsTUFBQUEsS0FBSyxDQUFDYixNQUFNLEdBQUMsQ0FBUixDQUFMLEdBQWtCdkIsQ0FBQyxHQUFHZSxDQUFKLEdBQVFkLENBQUMsR0FBR2dDLENBQVosR0FBZ0JFLEVBQWxDO0FBQ0g7QUFDSjs7O0VBcEo2Q0ciLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxuIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcbiB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXG4gc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXG5cbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXG5cbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuIFRIRSBTT0ZUV0FSRS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgQm1mb250QXNzZW1ibGVyIGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL2xhYmVsL2JtZm9udCc7XG5cbmxldCBfZGF0YU9mZnNldCA9IDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYmdsQm1mb250QXNzZW1ibGVyIGV4dGVuZHMgQm1mb250QXNzZW1ibGVyIHtcbiAgICBpbml0RGF0YSAoKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlckRhdGEuY3JlYXRlRmxleERhdGEoMCwgNCwgNiwgdGhpcy5nZXRWZm10KCkpO1xuICAgIH1cblxuICAgIF9yZXNlcnZlUXVhZHMgKGNvbXAsIGNvdW50KSB7XG4gICAgICAgIGxldCB2ZXJ0aWNlc0NvdW50ID0gY291bnQgKiA0O1xuICAgICAgICBsZXQgaW5kaWNlc0NvdW50ID0gY291bnQgKiA2O1xuICAgICAgICBcbiAgICAgICAgbGV0IGZsZXhCdWZmZXIgPSB0aGlzLl9yZW5kZXJEYXRhLl9mbGV4QnVmZmVyO1xuICAgICAgICBmbGV4QnVmZmVyLnJlc2VydmUodmVydGljZXNDb3VudCwgaW5kaWNlc0NvdW50KTtcbiAgICAgICAgZmxleEJ1ZmZlci51c2VkKHZlcnRpY2VzQ291bnQsIGluZGljZXNDb3VudCk7XG4gICAgICAgXG4gICAgICAgIGxldCBpRGF0YSA9IHRoaXMuX3JlbmRlckRhdGEuaURhdGFzWzBdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB2aWQgPSAwLCBsID0gaW5kaWNlc0NvdW50OyBpIDwgbDsgaSArPSA2LCB2aWQgKz0gNCkge1xuICAgICAgICAgICAgaURhdGFbaV0gPSB2aWQ7XG4gICAgICAgICAgICBpRGF0YVtpICsgMV0gPSB2aWQgKyAxO1xuICAgICAgICAgICAgaURhdGFbaSArIDJdID0gdmlkICsgMjtcbiAgICAgICAgICAgIGlEYXRhW2kgKyAzXSA9IHZpZCArIDE7XG4gICAgICAgICAgICBpRGF0YVtpICsgNF0gPSB2aWQgKyAzO1xuICAgICAgICAgICAgaURhdGFbaSArIDVdID0gdmlkICsgMjtcbiAgICAgICAgfVxuXG4gICAgICAgIF9kYXRhT2Zmc2V0ID0gMDtcbiAgICB9XG5cbiAgICBfcXVhZHNVcGRhdGVkIChjb21wKSB7XG4gICAgICAgIF9kYXRhT2Zmc2V0ID0gMDtcblxuICAgICAgICBsZXQgZmxleEJ1ZmZlciA9IHRoaXMuX3JlbmRlckRhdGEuX2ZsZXhCdWZmZXI7XG4gICAgICAgIGZsZXhCdWZmZXIudXNlZCh0aGlzLnZlcnRpY2VzQ291bnQsIHRoaXMuaW5kaWNlc0NvdW50KTtcbiAgICB9XG5cbiAgICBfZ2V0Q29sb3IgKGNvbXApIHtcbiAgICAgICAgcmV0dXJuIGNvbXAubm9kZS5fY29sb3IuX3ZhbDtcbiAgICB9XG5cbiAgICBhcHBlbmRRdWFkIChjb21wLCB0ZXh0dXJlLCByZWN0LCByb3RhdGVkLCB4LCB5LCBzY2FsZSkge1xuICAgICAgICBsZXQgcmVuZGVyRGF0YSA9IHRoaXMuX3JlbmRlckRhdGE7XG4gICAgICAgIGxldCB2ZXJ0cyA9IHJlbmRlckRhdGEudkRhdGFzWzBdLFxuICAgICAgICAgICAgdWludFZlcnRzID0gcmVuZGVyRGF0YS51aW50VkRhdGFzWzBdO1xuXG4gICAgICAgIHRoaXMudmVydGljZXNDb3VudCArPSA0O1xuICAgICAgICB0aGlzLmluZGljZXNDb3VudCA9IHRoaXMudmVydGljZXNDb3VudCAvIDIgKiAzO1xuXG4gICAgICAgIGxldCB0ZXh3ID0gdGV4dHVyZS53aWR0aCxcbiAgICAgICAgICAgIHRleGggPSB0ZXh0dXJlLmhlaWdodCxcbiAgICAgICAgICAgIHJlY3RXaWR0aCA9IHJlY3Qud2lkdGgsXG4gICAgICAgICAgICByZWN0SGVpZ2h0ID0gcmVjdC5oZWlnaHQsXG4gICAgICAgICAgICBjb2xvciA9IHRoaXMuX2dldENvbG9yKGNvbXApO1xuXG4gICAgICAgIGxldCBsLCBiLCByLCB0O1xuICAgICAgICBsZXQgZmxvYXRzUGVyVmVydCA9IHRoaXMuZmxvYXRzUGVyVmVydDtcbiAgICAgICAgLy8gdXZzXG4gICAgICAgIGxldCB1dkRhdGFPZmZzZXQgPSBfZGF0YU9mZnNldCArIHRoaXMudXZPZmZzZXQ7XG4gICAgICAgIGlmICghcm90YXRlZCkge1xuICAgICAgICAgICAgbCA9IChyZWN0LngpIC8gdGV4dztcbiAgICAgICAgICAgIHIgPSAocmVjdC54ICsgcmVjdFdpZHRoKSAvIHRleHc7XG4gICAgICAgICAgICBiID0gKHJlY3QueSArIHJlY3RIZWlnaHQpIC8gdGV4aDtcbiAgICAgICAgICAgIHQgPSAocmVjdC55KSAvIHRleGg7XG5cbiAgICAgICAgICAgIHZlcnRzW3V2RGF0YU9mZnNldF0gPSBsO1xuICAgICAgICAgICAgdmVydHNbdXZEYXRhT2Zmc2V0ICsgMV0gPSBiO1xuICAgICAgICAgICAgdXZEYXRhT2Zmc2V0ICs9IGZsb2F0c1BlclZlcnQ7XG4gICAgICAgICAgICB2ZXJ0c1t1dkRhdGFPZmZzZXRdID0gcjtcbiAgICAgICAgICAgIHZlcnRzW3V2RGF0YU9mZnNldCArIDFdID0gYjtcbiAgICAgICAgICAgIHV2RGF0YU9mZnNldCArPSBmbG9hdHNQZXJWZXJ0O1xuICAgICAgICAgICAgdmVydHNbdXZEYXRhT2Zmc2V0XSA9IGw7XG4gICAgICAgICAgICB2ZXJ0c1t1dkRhdGFPZmZzZXQgKyAxXSA9IHQ7XG4gICAgICAgICAgICB1dkRhdGFPZmZzZXQgKz0gZmxvYXRzUGVyVmVydDtcbiAgICAgICAgICAgIHZlcnRzW3V2RGF0YU9mZnNldF0gPSByO1xuICAgICAgICAgICAgdmVydHNbdXZEYXRhT2Zmc2V0ICsgMV0gPSB0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbCA9IChyZWN0LngpIC8gdGV4dztcbiAgICAgICAgICAgIHIgPSAocmVjdC54ICsgcmVjdEhlaWdodCkgLyB0ZXh3O1xuICAgICAgICAgICAgYiA9IChyZWN0LnkgKyByZWN0V2lkdGgpIC8gdGV4aDtcbiAgICAgICAgICAgIHQgPSAocmVjdC55KSAvIHRleGg7XG5cbiAgICAgICAgICAgIHZlcnRzW3V2RGF0YU9mZnNldF0gPSBsO1xuICAgICAgICAgICAgdmVydHNbdXZEYXRhT2Zmc2V0ICsgMV0gPSB0O1xuICAgICAgICAgICAgdXZEYXRhT2Zmc2V0ICs9IGZsb2F0c1BlclZlcnQ7XG4gICAgICAgICAgICB2ZXJ0c1t1dkRhdGFPZmZzZXRdID0gbDtcbiAgICAgICAgICAgIHZlcnRzW3V2RGF0YU9mZnNldCArIDFdID0gYjtcbiAgICAgICAgICAgIHV2RGF0YU9mZnNldCArPSBmbG9hdHNQZXJWZXJ0O1xuICAgICAgICAgICAgdmVydHNbdXZEYXRhT2Zmc2V0XSA9IHI7XG4gICAgICAgICAgICB2ZXJ0c1t1dkRhdGFPZmZzZXQgKyAxXSA9IHQ7XG4gICAgICAgICAgICB1dkRhdGFPZmZzZXQgKz0gZmxvYXRzUGVyVmVydDtcbiAgICAgICAgICAgIHZlcnRzW3V2RGF0YU9mZnNldF0gPSByO1xuICAgICAgICAgICAgdmVydHNbdXZEYXRhT2Zmc2V0ICsgMV0gPSBiO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyBwb3NpdGlvbnNcbiAgICAgICAgbCA9IHg7XG4gICAgICAgIHIgPSB4ICsgcmVjdFdpZHRoICogc2NhbGU7XG4gICAgICAgIGIgPSB5IC0gcmVjdEhlaWdodCAqIHNjYWxlO1xuICAgICAgICB0ID0geTtcblxuICAgICAgICB0aGlzLmFwcGVuZFZlcnRzKGNvbXAsIF9kYXRhT2Zmc2V0LCBsLCByLCBiLCB0KTtcblxuICAgICAgICAvLyBjb2xvcnNcbiAgICAgICAgbGV0IGNvbG9yT2Zmc2V0ID0gX2RhdGFPZmZzZXQgKyB0aGlzLmNvbG9yT2Zmc2V0O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgdWludFZlcnRzW2NvbG9yT2Zmc2V0XSA9IGNvbG9yO1xuICAgICAgICAgICAgY29sb3JPZmZzZXQgKz0gZmxvYXRzUGVyVmVydDtcbiAgICAgICAgfVxuXG4gICAgICAgIF9kYXRhT2Zmc2V0ICs9IHRoaXMuZmxvYXRzUGVyVmVydCAqIDQ7XG4gICAgfVxuXG4gICAgYXBwZW5kVmVydHMgKGNvbXAsIG9mZnNldCwgbCwgciwgYiwgdCkge1xuICAgICAgICBsZXQgbG9jYWwgPSB0aGlzLl9sb2NhbDtcbiAgICAgICAgbGV0IGZsb2F0c1BlclZlcnQgPSB0aGlzLmZsb2F0c1BlclZlcnQ7XG5cbiAgICAgICAgbG9jYWxbb2Zmc2V0XSA9IGw7XG4gICAgICAgIGxvY2FsW29mZnNldCArIDFdID0gYjtcblxuICAgICAgICBvZmZzZXQgKz0gZmxvYXRzUGVyVmVydDtcbiAgICAgICAgbG9jYWxbb2Zmc2V0XSA9IHI7XG4gICAgICAgIGxvY2FsW29mZnNldCArIDFdID0gYjtcblxuICAgICAgICBvZmZzZXQgKz0gZmxvYXRzUGVyVmVydDtcbiAgICAgICAgbG9jYWxbb2Zmc2V0XSA9IGw7XG4gICAgICAgIGxvY2FsW29mZnNldCArIDFdID0gdDtcblxuICAgICAgICBvZmZzZXQgKz0gZmxvYXRzUGVyVmVydDtcbiAgICAgICAgbG9jYWxbb2Zmc2V0XSA9IHI7XG4gICAgICAgIGxvY2FsW29mZnNldCArIDFdID0gdDtcbiAgICB9XG5cbiAgICB1cGRhdGVXb3JsZFZlcnRzIChjb21wKSB7XG4gICAgICAgIGxldCBub2RlID0gY29tcC5ub2RlO1xuXG4gICAgICAgIGxldCBtYXRyaXggPSBub2RlLl93b3JsZE1hdHJpeDtcbiAgICAgICAgbGV0IG1hdHJpeG0gPSBtYXRyaXgubSxcbiAgICAgICAgICAgIGEgPSBtYXRyaXhtWzBdLCBiID0gbWF0cml4bVsxXSwgYyA9IG1hdHJpeG1bNF0sIGQgPSBtYXRyaXhtWzVdLFxuICAgICAgICAgICAgdHggPSBtYXRyaXhtWzEyXSwgdHkgPSBtYXRyaXhtWzEzXTtcblxuICAgICAgICBsZXQgbG9jYWwgPSB0aGlzLl9sb2NhbDtcbiAgICAgICAgbGV0IHdvcmxkID0gdGhpcy5fcmVuZGVyRGF0YS52RGF0YXNbMF07XG4gICAgICAgIGxldCBmbG9hdHNQZXJWZXJ0ID0gdGhpcy5mbG9hdHNQZXJWZXJ0O1xuICAgICAgICBmb3IgKGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBsb2NhbC5sZW5ndGg7IG9mZnNldCArPSBmbG9hdHNQZXJWZXJ0KSB7XG4gICAgICAgICAgICBsZXQgeCA9IGxvY2FsW29mZnNldF07XG4gICAgICAgICAgICBsZXQgeSA9IGxvY2FsW29mZnNldCArIDFdO1xuICAgICAgICAgICAgd29ybGRbb2Zmc2V0XSA9IHggKiBhICsgeSAqIGMgKyB0eDtcbiAgICAgICAgICAgIHdvcmxkW29mZnNldCsxXSA9IHggKiBiICsgeSAqIGQgKyB0eTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuIl0sInNvdXJjZVJvb3QiOiIvIn0=
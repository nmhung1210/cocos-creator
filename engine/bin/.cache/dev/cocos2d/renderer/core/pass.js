
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/renderer/core/pass.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _gfx = _interopRequireDefault(require("../gfx"));

var _enums = _interopRequireDefault(require("../enums"));

var _valueType = _interopRequireDefault(require("../../core/value-types/value-type"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

// Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.
var Pass = /*#__PURE__*/function () {
  function Pass(name, detailName, programName, stage, properties, defines) {
    if (properties === void 0) {
      properties = {};
    }

    if (defines === void 0) {
      defines = {};
    }

    this._name = name;
    this._detailName = detailName;
    this._programName = programName;
    this._stage = stage;
    this._properties = properties;
    this._defines = defines; // cullmode

    this._cullMode = _gfx["default"].CULL_BACK; // blending

    this._blend = false;
    this._blendEq = _gfx["default"].BLEND_FUNC_ADD;
    this._blendAlphaEq = _gfx["default"].BLEND_FUNC_ADD;
    this._blendSrc = _gfx["default"].BLEND_SRC_ALPHA;
    this._blendDst = _gfx["default"].BLEND_ONE_MINUS_SRC_ALPHA;
    this._blendSrcAlpha = _gfx["default"].BLEND_SRC_ALPHA;
    this._blendDstAlpha = _gfx["default"].BLEND_ONE_MINUS_SRC_ALPHA;
    this._blendColor = 0xffffffff; // depth

    this._depthTest = false;
    this._depthWrite = false;
    this._depthFunc = _gfx["default"].DS_FUNC_LESS, // stencil
    this._stencilTest = _gfx["default"].STENCIL_INHERIT; // front

    this._stencilFuncFront = _gfx["default"].DS_FUNC_ALWAYS;
    this._stencilRefFront = 0;
    this._stencilMaskFront = 0xff;
    this._stencilFailOpFront = _gfx["default"].STENCIL_OP_KEEP;
    this._stencilZFailOpFront = _gfx["default"].STENCIL_OP_KEEP;
    this._stencilZPassOpFront = _gfx["default"].STENCIL_OP_KEEP;
    this._stencilWriteMaskFront = 0xff; // back

    this._stencilFuncBack = _gfx["default"].DS_FUNC_ALWAYS;
    this._stencilRefBack = 0;
    this._stencilMaskBack = 0xff;
    this._stencilFailOpBack = _gfx["default"].STENCIL_OP_KEEP;
    this._stencilZFailOpBack = _gfx["default"].STENCIL_OP_KEEP;
    this._stencilZPassOpBack = _gfx["default"].STENCIL_OP_KEEP;
    this._stencilWriteMaskBack = 0xff;
  }

  var _proto = Pass.prototype;

  _proto.setCullMode = function setCullMode(cullMode) {
    if (cullMode === void 0) {
      cullMode = _gfx["default"].CULL_BACK;
    }

    this._cullMode = cullMode;
  };

  _proto.setBlend = function setBlend(enabled, blendEq, blendSrc, blendDst, blendAlphaEq, blendSrcAlpha, blendDstAlpha, blendColor) {
    if (enabled === void 0) {
      enabled = false;
    }

    if (blendEq === void 0) {
      blendEq = _gfx["default"].BLEND_FUNC_ADD;
    }

    if (blendSrc === void 0) {
      blendSrc = _gfx["default"].BLEND_SRC_ALPHA;
    }

    if (blendDst === void 0) {
      blendDst = _gfx["default"].BLEND_ONE_MINUS_SRC_ALPHA;
    }

    if (blendAlphaEq === void 0) {
      blendAlphaEq = _gfx["default"].BLEND_FUNC_ADD;
    }

    if (blendSrcAlpha === void 0) {
      blendSrcAlpha = _gfx["default"].BLEND_SRC_ALPHA;
    }

    if (blendDstAlpha === void 0) {
      blendDstAlpha = _gfx["default"].BLEND_ONE_MINUS_SRC_ALPHA;
    }

    if (blendColor === void 0) {
      blendColor = 0xffffffff;
    }

    this._blend = enabled;
    this._blendEq = blendEq;
    this._blendSrc = blendSrc;
    this._blendDst = blendDst;
    this._blendAlphaEq = blendAlphaEq;
    this._blendSrcAlpha = blendSrcAlpha;
    this._blendDstAlpha = blendDstAlpha;
    this._blendColor = blendColor;
  };

  _proto.setDepth = function setDepth(depthTest, depthWrite, depthFunc) {
    if (depthTest === void 0) {
      depthTest = false;
    }

    if (depthWrite === void 0) {
      depthWrite = false;
    }

    if (depthFunc === void 0) {
      depthFunc = _gfx["default"].DS_FUNC_LESS;
    }

    this._depthTest = depthTest;
    this._depthWrite = depthWrite;
    this._depthFunc = depthFunc;
  };

  _proto.setStencilFront = function setStencilFront(enabled, stencilFunc, stencilRef, stencilMask, stencilFailOp, stencilZFailOp, stencilZPassOp, stencilWriteMask) {
    if (enabled === void 0) {
      enabled = _gfx["default"].STENCIL_INHERIT;
    }

    if (stencilFunc === void 0) {
      stencilFunc = _gfx["default"].DS_FUNC_ALWAYS;
    }

    if (stencilRef === void 0) {
      stencilRef = 0;
    }

    if (stencilMask === void 0) {
      stencilMask = 0xff;
    }

    if (stencilFailOp === void 0) {
      stencilFailOp = _gfx["default"].STENCIL_OP_KEEP;
    }

    if (stencilZFailOp === void 0) {
      stencilZFailOp = _gfx["default"].STENCIL_OP_KEEP;
    }

    if (stencilZPassOp === void 0) {
      stencilZPassOp = _gfx["default"].STENCIL_OP_KEEP;
    }

    if (stencilWriteMask === void 0) {
      stencilWriteMask = 0xff;
    }

    this._stencilTest = enabled;
    this._stencilFuncFront = stencilFunc;
    this._stencilRefFront = stencilRef;
    this._stencilMaskFront = stencilMask;
    this._stencilFailOpFront = stencilFailOp;
    this._stencilZFailOpFront = stencilZFailOp;
    this._stencilZPassOpFront = stencilZPassOp;
    this._stencilWriteMaskFront = stencilWriteMask;
  };

  _proto.setStencilEnabled = function setStencilEnabled(stencilTest) {
    if (stencilTest === void 0) {
      stencilTest = _gfx["default"].STENCIL_INHERIT;
    }

    this._stencilTest = stencilTest;
  };

  _proto.setStencilBack = function setStencilBack(stencilTest, stencilFunc, stencilRef, stencilMask, stencilFailOp, stencilZFailOp, stencilZPassOp, stencilWriteMask) {
    if (stencilTest === void 0) {
      stencilTest = _gfx["default"].STENCIL_INHERIT;
    }

    if (stencilFunc === void 0) {
      stencilFunc = _gfx["default"].DS_FUNC_ALWAYS;
    }

    if (stencilRef === void 0) {
      stencilRef = 0;
    }

    if (stencilMask === void 0) {
      stencilMask = 0xff;
    }

    if (stencilFailOp === void 0) {
      stencilFailOp = _gfx["default"].STENCIL_OP_KEEP;
    }

    if (stencilZFailOp === void 0) {
      stencilZFailOp = _gfx["default"].STENCIL_OP_KEEP;
    }

    if (stencilZPassOp === void 0) {
      stencilZPassOp = _gfx["default"].STENCIL_OP_KEEP;
    }

    if (stencilWriteMask === void 0) {
      stencilWriteMask = 0xff;
    }

    this._stencilTest = stencilTest;
    this._stencilFuncBack = stencilFunc;
    this._stencilRefBack = stencilRef;
    this._stencilMaskBack = stencilMask;
    this._stencilFailOpBack = stencilFailOp;
    this._stencilZFailOpBack = stencilZFailOp;
    this._stencilZPassOpBack = stencilZPassOp;
    this._stencilWriteMaskBack = stencilWriteMask;
  };

  _proto.setStage = function setStage(stage) {
    this._stage = stage;
  };

  _proto.setProperties = function setProperties(properties) {
    this._properties = properties;
  };

  _proto.getProperty = function getProperty(name) {
    if (!this._properties[name]) {
      return;
    }

    return this._properties[name].value;
  };

  _proto.setProperty = function setProperty(name, value, directly) {
    var prop = this._properties[name];

    if (!prop) {
      return false;
    }

    prop.directly = directly;

    if (Array.isArray(value)) {
      var array = prop.value;

      if (array.length !== value.length) {
        cc.warnID(9105, this._name, name);
        return;
      }

      for (var i = 0; i < value.length; i++) {
        array[i] = value[i];
      }
    } else {
      if (value && !ArrayBuffer.isView(value)) {
        if (prop.type === _enums["default"].PARAM_TEXTURE_2D) {
          prop.value = value.getImpl();
        } else if (value instanceof _valueType["default"]) {
          value.constructor.toArray(prop.value, value);
        } else {
          if (typeof value === 'object') {
            cc.warnID(9106, this._name, name);
          }

          prop.value = value;
        }
      } else {
        prop.value = value;
      }
    }

    return true;
  };

  _proto.getDefine = function getDefine(name) {
    return this._defines[name];
  };

  _proto.define = function define(name, value, force) {
    if (!force) {
      var def = this._defines[name];

      if (def === undefined) {
        return false;
      }
    }

    this._defines[name] = value;
    return true;
  };

  _proto.clone = function clone() {
    var pass = new Pass(this._programName);
    Object.assign(pass, this);
    var newProperties = {};
    var properties = this._properties;

    for (var name in properties) {
      var prop = properties[name];
      var newProp = newProperties[name] = {};
      var value = prop.value;

      if (Array.isArray(value)) {
        newProp.value = value.concat();
      } else if (ArrayBuffer.isView(value)) {
        newProp.value = new value.__proto__.constructor(value);
      } else {
        newProp.value = value;
      }

      for (var _name in prop) {
        if (_name === 'value') continue;
        newProp[_name] = prop[_name];
      }
    }

    pass._properties = newProperties;
    pass._defines = Object.assign({}, this._defines);
    return pass;
  };

  return Pass;
}();

exports["default"] = Pass;
module.exports = exports["default"];
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC9yZW5kZXJlci9jb3JlL3Bhc3MuanMiXSwibmFtZXMiOlsiUGFzcyIsIm5hbWUiLCJkZXRhaWxOYW1lIiwicHJvZ3JhbU5hbWUiLCJzdGFnZSIsInByb3BlcnRpZXMiLCJkZWZpbmVzIiwiX25hbWUiLCJfZGV0YWlsTmFtZSIsIl9wcm9ncmFtTmFtZSIsIl9zdGFnZSIsIl9wcm9wZXJ0aWVzIiwiX2RlZmluZXMiLCJfY3VsbE1vZGUiLCJnZngiLCJDVUxMX0JBQ0siLCJfYmxlbmQiLCJfYmxlbmRFcSIsIkJMRU5EX0ZVTkNfQUREIiwiX2JsZW5kQWxwaGFFcSIsIl9ibGVuZFNyYyIsIkJMRU5EX1NSQ19BTFBIQSIsIl9ibGVuZERzdCIsIkJMRU5EX09ORV9NSU5VU19TUkNfQUxQSEEiLCJfYmxlbmRTcmNBbHBoYSIsIl9ibGVuZERzdEFscGhhIiwiX2JsZW5kQ29sb3IiLCJfZGVwdGhUZXN0IiwiX2RlcHRoV3JpdGUiLCJfZGVwdGhGdW5jIiwiRFNfRlVOQ19MRVNTIiwiX3N0ZW5jaWxUZXN0IiwiU1RFTkNJTF9JTkhFUklUIiwiX3N0ZW5jaWxGdW5jRnJvbnQiLCJEU19GVU5DX0FMV0FZUyIsIl9zdGVuY2lsUmVmRnJvbnQiLCJfc3RlbmNpbE1hc2tGcm9udCIsIl9zdGVuY2lsRmFpbE9wRnJvbnQiLCJTVEVOQ0lMX09QX0tFRVAiLCJfc3RlbmNpbFpGYWlsT3BGcm9udCIsIl9zdGVuY2lsWlBhc3NPcEZyb250IiwiX3N0ZW5jaWxXcml0ZU1hc2tGcm9udCIsIl9zdGVuY2lsRnVuY0JhY2siLCJfc3RlbmNpbFJlZkJhY2siLCJfc3RlbmNpbE1hc2tCYWNrIiwiX3N0ZW5jaWxGYWlsT3BCYWNrIiwiX3N0ZW5jaWxaRmFpbE9wQmFjayIsIl9zdGVuY2lsWlBhc3NPcEJhY2siLCJfc3RlbmNpbFdyaXRlTWFza0JhY2siLCJzZXRDdWxsTW9kZSIsImN1bGxNb2RlIiwic2V0QmxlbmQiLCJlbmFibGVkIiwiYmxlbmRFcSIsImJsZW5kU3JjIiwiYmxlbmREc3QiLCJibGVuZEFscGhhRXEiLCJibGVuZFNyY0FscGhhIiwiYmxlbmREc3RBbHBoYSIsImJsZW5kQ29sb3IiLCJzZXREZXB0aCIsImRlcHRoVGVzdCIsImRlcHRoV3JpdGUiLCJkZXB0aEZ1bmMiLCJzZXRTdGVuY2lsRnJvbnQiLCJzdGVuY2lsRnVuYyIsInN0ZW5jaWxSZWYiLCJzdGVuY2lsTWFzayIsInN0ZW5jaWxGYWlsT3AiLCJzdGVuY2lsWkZhaWxPcCIsInN0ZW5jaWxaUGFzc09wIiwic3RlbmNpbFdyaXRlTWFzayIsInNldFN0ZW5jaWxFbmFibGVkIiwic3RlbmNpbFRlc3QiLCJzZXRTdGVuY2lsQmFjayIsInNldFN0YWdlIiwic2V0UHJvcGVydGllcyIsImdldFByb3BlcnR5IiwidmFsdWUiLCJzZXRQcm9wZXJ0eSIsImRpcmVjdGx5IiwicHJvcCIsIkFycmF5IiwiaXNBcnJheSIsImFycmF5IiwibGVuZ3RoIiwiY2MiLCJ3YXJuSUQiLCJpIiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJ0eXBlIiwiZW51bXMiLCJQQVJBTV9URVhUVVJFXzJEIiwiZ2V0SW1wbCIsIlZhbHVlVHlwZSIsImNvbnN0cnVjdG9yIiwidG9BcnJheSIsImdldERlZmluZSIsImRlZmluZSIsImZvcmNlIiwiZGVmIiwidW5kZWZpbmVkIiwiY2xvbmUiLCJwYXNzIiwiT2JqZWN0IiwiYXNzaWduIiwibmV3UHJvcGVydGllcyIsIm5ld1Byb3AiLCJjb25jYXQiLCJfX3Byb3RvX18iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUpBO0lBTXFCQTtBQUNqQixnQkFBYUMsSUFBYixFQUFtQkMsVUFBbkIsRUFBK0JDLFdBQS9CLEVBQTRDQyxLQUE1QyxFQUFtREMsVUFBbkQsRUFBb0VDLE9BQXBFLEVBQWtGO0FBQUEsUUFBL0JELFVBQStCO0FBQS9CQSxNQUFBQSxVQUErQixHQUFsQixFQUFrQjtBQUFBOztBQUFBLFFBQWRDLE9BQWM7QUFBZEEsTUFB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RCxDQUFyQjtBQUNBLFVBQUkyRyxPQUFPLEdBQUdELGFBQWEsQ0FBQzFHLElBQUQsQ0FBYixHQUFzQixFQUFwQztBQUVBLFVBQUk2RSxLQUFLLEdBQUdHLElBQUksQ0FBQ0gsS0FBakI7O0FBQ0EsVUFBSUksS0FBSyxDQUFDQyxPQUFOLENBQWNMLEtBQWQsQ0FBSixFQUEwQjtBQUN0QjhCLFFBQUFBLE9BQU8sQ0FBQzlCLEtBQVIsR0FBZ0JBLEtBQUssQ0FBQytCLE1BQU4sRUFBaEI7QUFDSCxPQUZELE1BR0ssSUFBSXBCLFdBQVcsQ0FBQ0MsTUFBWixDQUFtQlosS0FBbkIsQ0FBSixFQUErQjtBQUNoQzhCLFFBQUFBLE9BQU8sQ0FBQzlCLEtBQVIsR0FBZ0IsSUFBSUEsS0FBSyxDQUFDZ0MsU0FBTixDQUFnQmQsV0FBcEIsQ0FBZ0NsQixLQUFoQyxDQUFoQjtBQUNILE9BRkksTUFHQTtBQUNEOEIsUUFBQUEsT0FBTyxDQUFDOUIsS0FBUixHQUFnQkEsS0FBaEI7QUFDSDs7QUFFRCxXQUFLLElBQUk3RSxLQUFULElBQWlCZ0YsSUFBakIsRUFBdUI7QUFDbkIsWUFBSWhGLEtBQUksS0FBSyxPQUFiLEVBQXNCO0FBQ3RCMkcsUUFBQUEsT0FBTyxDQUFDM0csS0FBRCxDQUFQLEdBQWdCZ0YsSUFBSSxDQUFDaEYsS0FBRCxDQUFwQjtBQUNIO0FBQ0o7O0FBRUR1RyxJQUFBQSxJQUFJLENBQUM3RixXQUFMLEdBQW1CZ0csYUFBbkI7QUFDQUgsSUFBQUEsSUFBSSxDQUFDNUYsUUFBTCxHQUFnQjZGLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjLEVBQWQsRUFBa0IsS0FBSzlGLFFBQXZCLENBQWhCO0FBRUEsV0FBTzRGLElBQVA7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG5pbXBvcnQgZ2Z4IGZyb20gJy4uL2dmeCc7XG5pbXBvcnQgZW51bXMgZnJvbSAnLi4vZW51bXMnO1xuaW1wb3J0IFZhbHVlVHlwZSBmcm9tICcuLi8uLi9jb3JlL3ZhbHVlLXR5cGVzL3ZhbHVlLXR5cGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXNzIHtcbiAgICBjb25zdHJ1Y3RvciAobmFtZSwgZGV0YWlsTmFtZSwgcHJvZ3JhbU5hbWUsIHN0YWdlLCBwcm9wZXJ0aWVzID0ge30sIGRlZmluZXMgPSB7fSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fZGV0YWlsTmFtZSA9IGRldGFpbE5hbWU7XG4gICAgICAgIHRoaXMuX3Byb2dyYW1OYW1lID0gcHJvZ3JhbU5hbWU7XG4gICAgICAgIHRoaXMuX3N0YWdlID0gc3RhZ2U7XG4gICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgICAgICB0aGlzLl9kZWZpbmVzID0gZGVmaW5lcztcblxuICAgICAgICAvLyBjdWxsbW9kZVxuICAgICAgICB0aGlzLl9jdWxsTW9kZSA9IGdmeC5DVUxMX0JBQ0s7XG5cbiAgICAgICAgLy8gYmxlbmRpbmdcbiAgICAgICAgdGhpcy5fYmxlbmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYmxlbmRFcSA9IGdmeC5CTEVORF9GVU5DX0FERDtcbiAgICAgICAgdGhpcy5fYmxlbmRBbHBoYUVxID0gZ2Z4LkJMRU5EX0ZVTkNfQUREO1xuICAgICAgICB0aGlzLl9ibGVuZFNyYyA9IGdmeC5CTEVORF9TUkNfQUxQSEE7XG4gICAgICAgIHRoaXMuX2JsZW5kRHN0ID0gZ2Z4LkJMRU5EX09ORV9NSU5VU19TUkNfQUxQSEE7XG4gICAgICAgIHRoaXMuX2JsZW5kU3JjQWxwaGEgPSBnZnguQkxFTkRfU1JDX0FMUEhBO1xuICAgICAgICB0aGlzLl9ibGVuZERzdEFscGhhID0gZ2Z4LkJMRU5EX09ORV9NSU5VU19TUkNfQUxQSEE7XG4gICAgICAgIHRoaXMuX2JsZW5kQ29sb3IgPSAweGZmZmZmZmZmO1xuXG4gICAgICAgIC8vIGRlcHRoXG4gICAgICAgIHRoaXMuX2RlcHRoVGVzdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kZXB0aFdyaXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2RlcHRoRnVuYyA9IGdmeC5EU19GVU5DX0xFU1MsXG5cbiAgICAgICAgLy8gc3RlbmNpbFxuICAgICAgICB0aGlzLl9zdGVuY2lsVGVzdCA9IGdmeC5TVEVOQ0lMX0lOSEVSSVQ7XG4gICAgICAgIFxuICAgICAgICAvLyBmcm9udFxuICAgICAgICB0aGlzLl9zdGVuY2lsRnVuY0Zyb250ID0gZ2Z4LkRTX0ZVTkNfQUxXQVlTO1xuICAgICAgICB0aGlzLl9zdGVuY2lsUmVmRnJvbnQgPSAwO1xuICAgICAgICB0aGlzLl9zdGVuY2lsTWFza0Zyb250ID0gMHhmZjtcbiAgICAgICAgdGhpcy5fc3RlbmNpbEZhaWxPcEZyb250ID0gZ2Z4LlNURU5DSUxfT1BfS0VFUDtcbiAgICAgICAgdGhpcy5fc3RlbmNpbFpGYWlsT3BGcm9udCA9IGdmeC5TVEVOQ0lMX09QX0tFRVA7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxaUGFzc09wRnJvbnQgPSBnZnguU1RFTkNJTF9PUF9LRUVQO1xuICAgICAgICB0aGlzLl9zdGVuY2lsV3JpdGVNYXNrRnJvbnQgPSAweGZmO1xuICAgICAgICAvLyBiYWNrXG4gICAgICAgIHRoaXMuX3N0ZW5jaWxGdW5jQmFjayA9IGdmeC5EU19GVU5DX0FMV0FZUztcbiAgICAgICAgdGhpcy5fc3RlbmNpbFJlZkJhY2sgPSAwO1xuICAgICAgICB0aGlzLl9zdGVuY2lsTWFza0JhY2sgPSAweGZmO1xuICAgICAgICB0aGlzLl9zdGVuY2lsRmFpbE9wQmFjayA9IGdmeC5TVEVOQ0lMX09QX0tFRVA7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxaRmFpbE9wQmFjayA9IGdmeC5TVEVOQ0lMX09QX0tFRVA7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxaUGFzc09wQmFjayA9IGdmeC5TVEVOQ0lMX09QX0tFRVA7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxXcml0ZU1hc2tCYWNrID0gMHhmZjtcbiAgICB9XG5cbiAgICBzZXRDdWxsTW9kZSAoY3VsbE1vZGUgPSBnZnguQ1VMTF9CQUNLKSB7XG4gICAgICAgIHRoaXMuX2N1bGxNb2RlID0gY3VsbE1vZGU7XG4gICAgfVxuXG4gICAgc2V0QmxlbmQgKFxuICAgICAgICBlbmFibGVkID0gZmFsc2UsXG4gICAgICAgIGJsZW5kRXEgPSBnZnguQkxFTkRfRlVOQ19BREQsXG4gICAgICAgIGJsZW5kU3JjID0gZ2Z4LkJMRU5EX1NSQ19BTFBIQSxcbiAgICAgICAgYmxlbmREc3QgPSBnZnguQkxFTkRfT05FX01JTlVTX1NSQ19BTFBIQSxcbiAgICAgICAgYmxlbmRBbHBoYUVxID0gZ2Z4LkJMRU5EX0ZVTkNfQURELFxuICAgICAgICBibGVuZFNyY0FscGhhID0gZ2Z4LkJMRU5EX1NSQ19BTFBIQSxcbiAgICAgICAgYmxlbmREc3RBbHBoYSA9IGdmeC5CTEVORF9PTkVfTUlOVVNfU1JDX0FMUEhBLFxuICAgICAgICBibGVuZENvbG9yID0gMHhmZmZmZmZmZlxuICAgICkge1xuICAgICAgICB0aGlzLl9ibGVuZCA9IGVuYWJsZWQ7XG4gICAgICAgIHRoaXMuX2JsZW5kRXEgPSBibGVuZEVxO1xuICAgICAgICB0aGlzLl9ibGVuZFNyYyA9IGJsZW5kU3JjO1xuICAgICAgICB0aGlzLl9ibGVuZERzdCA9IGJsZW5kRHN0O1xuICAgICAgICB0aGlzLl9ibGVuZEFscGhhRXEgPSBibGVuZEFscGhhRXE7XG4gICAgICAgIHRoaXMuX2JsZW5kU3JjQWxwaGEgPSBibGVuZFNyY0FscGhhO1xuICAgICAgICB0aGlzLl9ibGVuZERzdEFscGhhID0gYmxlbmREc3RBbHBoYTtcbiAgICAgICAgdGhpcy5fYmxlbmRDb2xvciA9IGJsZW5kQ29sb3I7XG4gICAgfVxuXG4gICAgc2V0RGVwdGggKFxuICAgICAgICBkZXB0aFRlc3QgPSBmYWxzZSxcbiAgICAgICAgZGVwdGhXcml0ZSA9IGZhbHNlLFxuICAgICAgICBkZXB0aEZ1bmMgPSBnZnguRFNfRlVOQ19MRVNTXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2RlcHRoVGVzdCA9IGRlcHRoVGVzdDtcbiAgICAgICAgdGhpcy5fZGVwdGhXcml0ZSA9IGRlcHRoV3JpdGU7XG4gICAgICAgIHRoaXMuX2RlcHRoRnVuYyA9IGRlcHRoRnVuYztcbiAgICB9XG5cbiAgICBzZXRTdGVuY2lsRnJvbnQgKFxuICAgICAgICBlbmFibGVkID0gZ2Z4LlNURU5DSUxfSU5IRVJJVCxcbiAgICAgICAgc3RlbmNpbEZ1bmMgPSBnZnguRFNfRlVOQ19BTFdBWVMsXG4gICAgICAgIHN0ZW5jaWxSZWYgPSAwLFxuICAgICAgICBzdGVuY2lsTWFzayA9IDB4ZmYsXG4gICAgICAgIHN0ZW5jaWxGYWlsT3AgPSBnZnguU1RFTkNJTF9PUF9LRUVQLFxuICAgICAgICBzdGVuY2lsWkZhaWxPcCA9IGdmeC5TVEVOQ0lMX09QX0tFRVAsXG4gICAgICAgIHN0ZW5jaWxaUGFzc09wID0gZ2Z4LlNURU5DSUxfT1BfS0VFUCxcbiAgICAgICAgc3RlbmNpbFdyaXRlTWFzayA9IDB4ZmZcbiAgICApIHtcbiAgICAgICAgdGhpcy5fc3RlbmNpbFRlc3QgPSBlbmFibGVkO1xuICAgICAgICB0aGlzLl9zdGVuY2lsRnVuY0Zyb250ID0gc3RlbmNpbEZ1bmM7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxSZWZGcm9udCA9IHN0ZW5jaWxSZWY7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxNYXNrRnJvbnQgPSBzdGVuY2lsTWFzaztcbiAgICAgICAgdGhpcy5fc3RlbmNpbEZhaWxPcEZyb250ID0gc3RlbmNpbEZhaWxPcDtcbiAgICAgICAgdGhpcy5fc3RlbmNpbFpGYWlsT3BGcm9udCA9IHN0ZW5jaWxaRmFpbE9wO1xuICAgICAgICB0aGlzLl9zdGVuY2lsWlBhc3NPcEZyb250ID0gc3RlbmNpbFpQYXNzT3A7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxXcml0ZU1hc2tGcm9udCA9IHN0ZW5jaWxXcml0ZU1hc2s7XG4gICAgfVxuXG4gICAgc2V0U3RlbmNpbEVuYWJsZWQgKHN0ZW5jaWxUZXN0ID0gZ2Z4LlNURU5DSUxfSU5IRVJJVCkge1xuICAgICAgICB0aGlzLl9zdGVuY2lsVGVzdCA9IHN0ZW5jaWxUZXN0O1xuICAgIH1cblxuICAgIHNldFN0ZW5jaWxCYWNrIChcbiAgICAgICAgc3RlbmNpbFRlc3QgPSBnZnguU1RFTkNJTF9JTkhFUklULFxuICAgICAgICBzdGVuY2lsRnVuYyA9IGdmeC5EU19GVU5DX0FMV0FZUyxcbiAgICAgICAgc3RlbmNpbFJlZiA9IDAsXG4gICAgICAgIHN0ZW5jaWxNYXNrID0gMHhmZixcbiAgICAgICAgc3RlbmNpbEZhaWxPcCA9IGdmeC5TVEVOQ0lMX09QX0tFRVAsXG4gICAgICAgIHN0ZW5jaWxaRmFpbE9wID0gZ2Z4LlNURU5DSUxfT1BfS0VFUCxcbiAgICAgICAgc3RlbmNpbFpQYXNzT3AgPSBnZnguU1RFTkNJTF9PUF9LRUVQLFxuICAgICAgICBzdGVuY2lsV3JpdGVNYXNrID0gMHhmZlxuICAgICkge1xuICAgICAgICB0aGlzLl9zdGVuY2lsVGVzdCA9IHN0ZW5jaWxUZXN0O1xuICAgICAgICB0aGlzLl9zdGVuY2lsRnVuY0JhY2sgPSBzdGVuY2lsRnVuYztcbiAgICAgICAgdGhpcy5fc3RlbmNpbFJlZkJhY2sgPSBzdGVuY2lsUmVmO1xuICAgICAgICB0aGlzLl9zdGVuY2lsTWFza0JhY2sgPSBzdGVuY2lsTWFzaztcbiAgICAgICAgdGhpcy5fc3RlbmNpbEZhaWxPcEJhY2sgPSBzdGVuY2lsRmFpbE9wO1xuICAgICAgICB0aGlzLl9zdGVuY2lsWkZhaWxPcEJhY2sgPSBzdGVuY2lsWkZhaWxPcDtcbiAgICAgICAgdGhpcy5fc3RlbmNpbFpQYXNzT3BCYWNrID0gc3RlbmNpbFpQYXNzT3A7XG4gICAgICAgIHRoaXMuX3N0ZW5jaWxXcml0ZU1hc2tCYWNrID0gc3RlbmNpbFdyaXRlTWFzaztcbiAgICB9XG5cbiAgICBzZXRTdGFnZSAoc3RhZ2UpIHtcbiAgICAgICAgdGhpcy5fc3RhZ2UgPSBzdGFnZTtcbiAgICB9XG5cbiAgICBzZXRQcm9wZXJ0aWVzIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgIH1cblxuICAgIGdldFByb3BlcnR5IChuYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5fcHJvcGVydGllc1tuYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wZXJ0aWVzW25hbWVdLnZhbHVlO1xuICAgIH1cblxuICAgIHNldFByb3BlcnR5IChuYW1lLCB2YWx1ZSwgZGlyZWN0bHkpIHtcbiAgICAgICAgbGV0IHByb3AgPSB0aGlzLl9wcm9wZXJ0aWVzW25hbWVdO1xuICAgICAgICBpZiAoIXByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3AuZGlyZWN0bHkgPSBkaXJlY3RseTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGxldCBhcnJheSA9IHByb3AudmFsdWU7XG4gICAgICAgICAgICBpZiAoYXJyYXkubGVuZ3RoICE9PSB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYy53YXJuSUQoOTEwNSwgdGhpcy5fbmFtZSwgbmFtZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFycmF5W2ldID0gdmFsdWVbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgIUFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcC50eXBlID09PSBlbnVtcy5QQVJBTV9URVhUVVJFXzJEKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3AudmFsdWUgPSB2YWx1ZS5nZXRJbXBsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVmFsdWVUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLnRvQXJyYXkocHJvcC52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLndhcm5JRCg5MTA2LCB0aGlzLl9uYW1lLCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9wLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJvcC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZ2V0RGVmaW5lIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZpbmVzW25hbWVdO1xuICAgIH1cblxuICAgIGRlZmluZSAobmFtZSwgdmFsdWUsIGZvcmNlKSB7XG4gICAgICAgIGlmICghZm9yY2UpIHtcbiAgICAgICAgICAgIGxldCBkZWYgPSB0aGlzLl9kZWZpbmVzW25hbWVdO1xuICAgICAgICAgICAgaWYgKGRlZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZGVmaW5lc1tuYW1lXSA9IHZhbHVlO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNsb25lICgpIHtcbiAgICAgICAgbGV0IHBhc3MgPSBuZXcgUGFzcyh0aGlzLl9wcm9ncmFtTmFtZSk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocGFzcywgdGhpcyk7XG5cbiAgICAgICAgbGV0IG5ld1Byb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgbGV0IHByb3BlcnRpZXMgPSB0aGlzLl9wcm9wZXJ0aWVzO1xuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGxldCBwcm9wID0gcHJvcGVydGllc1tuYW1lXTtcbiAgICAgICAgICAgIGxldCBuZXdQcm9wID0gbmV3UHJvcGVydGllc1tuYW1lXSA9IHt9O1xuXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBwcm9wLnZhbHVlO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbmV3UHJvcC52YWx1ZSA9IHZhbHVlLmNvbmNhdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG5ld1Byb3AudmFsdWUgPSBuZXcgdmFsdWUuX19wcm90b19fLmNvbnN0cnVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1Byb3AudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBwcm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd2YWx1ZScpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG5ld1Byb3BbbmFtZV0gPSBwcm9wW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcGFzcy5fcHJvcGVydGllcyA9IG5ld1Byb3BlcnRpZXM7XG4gICAgICAgIHBhc3MuX2RlZmluZXMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9kZWZpbmVzKTtcblxuICAgICAgICByZXR1cm4gcGFzcztcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIvIn0=
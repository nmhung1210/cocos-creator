
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/node-activator.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2013-2016 Chukong Technologies Inc.
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
  worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
  not use Cocos Creator software for developing other software or tools that's
  used for developing games. You are not granted to publish, distribute,
  sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var CompScheduler = require('./component-scheduler');

var Flags = require('./platform/CCObject').Flags;

var js = require('./platform/js');

var callerFunctor = CC_EDITOR && require('./utils/misc').tryCatchFunctor_EDITOR;

var MAX_POOL_SIZE = 4;
var IsPreloadStarted = Flags.IsPreloadStarted;
var IsOnLoadStarted = Flags.IsOnLoadStarted;
var IsOnLoadCalled = Flags.IsOnLoadCalled;
var Deactivating = Flags.Deactivating;
var callPreloadInTryCatch = CC_EDITOR && callerFunctor('__preload');

var callOnLoadInTryCatch = CC_EDITOR && function (c) {
  try {
    c.onLoad();
  } catch (e) {
    cc._throw(e);
  }

  c._objFlags |= IsOnLoadCalled;

  _onLoadInEditor(c);
};

var callOnDestroyInTryCatch = CC_EDITOR && callerFunctor('onDestroy');
var callOnFocusInTryCatch = CC_EDITOR && callerFunctor('onFocusInEditor');
var callOnLostFocusInTryCatch = CC_EDITOR && callerFunctor('onLostFocusInEditor'); // for __preload: use internally, no sort

var UnsortedInvoker = cc.Class({
  "extends": CompScheduler.LifeCycleInvoker,
  add: function add(comp) {
    this._zero.array.push(comp);
  },
  remove: function remove(comp) {
    this._zero.fastRemove(comp);
  },
  cancelInactive: function cancelInactive(flagToClear) {
    CompScheduler.LifeCycleInvoker.stableRemoveInactive(this._zero, flagToClear);
  },
  invoke: function invoke() {
    this._invoke(this._zero);

    this._zero.array.length = 0;
  }
});
var invokePreload = CC_SUPPORT_JIT ? CompScheduler.createInvokeImpl('c.__preload();') : CompScheduler.createInvokeImpl(function (c) {
  c.__preload();
}, false, undefined, function (iterator) {
  var array = iterator.array;

  for (iterator.i = 0; iterator.i < array.length; ++iterator.i) {
    array[iterator.i].__preload();
  }
});
var invokeOnLoad = CC_SUPPORT_JIT ? CompScheduler.createInvokeImpl('c.onLoad();c._objFlags|=' + IsOnLoadCalled, false, IsOnLoadCalled) : CompScheduler.createInvokeImpl(function (c) {
  c.onLoad();
  c._objFlags |= IsOnLoadCalled;
}, false, IsOnLoadCalled, function (iterator) {
  var array = iterator.array;

  for (iterator.i = 0; iterator.i < array.length; ++iterator.i) {
    var comp = array[iterator.i];
    comp.onLoad();
    comp._objFlags |= IsOnLoadCalled;
  }
});
var activateTasksPool = new js.Pool(MAX_POOL_SIZE);

activateTasksPool.get = function getActivateTask() {
  var task = this._get() || {
    preload: new UnsortedInvoker(invokePreload),
    onLoad: new CompScheduler.OneOffInvoker(invokeOnLoad),
    onEnable: new CompScheduler.OneOffInvoker(CompScheduler.invokeOnEnable)
  }; // reset index to -1 so we can skip invoked component in cancelInactive

  task.preload._zero.i = -1;
  var invoker = task.onLoad;
  invoker._zero.i = -1;
  invoker._neg.i = -1;
  invoker._pos.i = -1;
  invoker = task.onEnable;
  invoker._zero.i = -1;
  invoker._neg.i = -1;
  invoker._pos.i = -1;
  return task;
};

function _componentCorrupted(node, comp, index) {
  if (CC_DEV) {
    cc.errorID(3817, node.name, index);
    console.log('Corrupted component value:', comp);
  }

  if (comp) {
    node._removeComponent(comp);
  } else {
    js.array.removeAt(node._components, index);
  }
}

function _onLoadInEditor(comp) {
  if (comp.onLoad && !cc.engine._isPlaying) {
    var focused = Editor.Selection.curActivate('node') === comp.node.uuid;

    if (focused) {
      comp.onFocusInEditor && callOnFocusInTryCatch(comp);
    } else {
      comp.onLostFocusInEditor && callOnLostFocusInTryCatch(comp);
    }
  }

  if (!CC_TEST) {
    _Scene.AssetsWatcher.start(comp);
  }
}
/**
 * The class used to perform activating and deactivating operations of node and component.
 */


function ctor() {
  // a stack of node's activating tasks
  this._activatingStack = [];
}

var NodeActivator = cc.Class({
  ctor: ctor,
  reset: ctor,
  _activateNodeRecursively: function _activateNodeRecursively(node, preloadInvoker, onLoadInvoker, onEnableInvoker) {
    if (node._objFlags & Deactivating) {
      // en:
      // Forbid reactive the same node during its deactivating procedure
      // to avoid endless loop and simplify the implementation.
      // zh:
      // 对相同节点而言，无法撤销反激活，防止反激活 - 激活 - 反激活的死循环发生。
      // 这样设计简化了一些引擎的实现，而且对调用者来说能保证反激活操作都能成功。
      cc.errorID(3816, node.name);
      return;
    }

    node._activeInHierarchy = true; // component maybe added during onEnable, and the onEnable of new component is already called
    // so we should record the origin length

    var originCount = node._components.length; // activate components

    for (var i = 0; i < originCount; ++i) {
      var component = node._components[i];

      if (component instanceof cc.Component) {
        this.activateComp(component, preloadInvoker, onLoadInvoker, onEnableInvoker);
      } else {
        _componentCorrupted(node, component, i);

        --i;
        --originCount;
      }
    }

    node._childArrivalOrder = node._children.length; // activate children recursively

    for (var _i = 0, len = node._children.length; _i < len; ++_i) {
      var child = node._children[_i];
      child._localZOrder = child._localZOrder & 0xffff0000 | _i + 1;

      if (child._active) {
        this._activateNodeRecursively(child, preloadInvoker, onLoadInvoker, onEnableInvoker);
      }
    }

    node._onPostActivated(true);
  },
  _deactivateNodeRecursively: function _deactivateNodeRecursively(node) {
    if (CC_DEV) {
      cc.assert(!(node._objFlags & Deactivating), 'node should not deactivating'); // ensures _activeInHierarchy is always changing when Deactivating flagged

      cc.assert(node._activeInHierarchy, 'node should not deactivated');
    }

    node._objFlags |= Deactivating;
    node._activeInHierarchy = false; // component maybe added during onEnable, and the onEnable of new component is already called
    // so we should record the origin length

    var originCount = node._components.length;

    for (var c = 0; c < originCount; ++c) {
      var component = node._components[c];

      if (component._enabled) {
        cc.director._compScheduler.disableComp(component);

        if (node._activeInHierarchy) {
          // reactivated from root
          node._objFlags &= ~Deactivating;
          return;
        }
      }
    }

    for (var i = 0, len = node._children.length; i < len; ++i) {
      var child = node._children[i];

      if (child._activeInHierarchy) {
        this._deactivateNodeRecursively(child);

        if (node._activeInHierarchy) {
          // reactivated from root
          node._objFlags &= ~Deactivating;
          return;
        }
      }
    }

    node._onPostActivated(false);

    node._objFlags &= ~Deactivating;
  },
  activateNode: function activateNode(node, active) {
    if (active) {
      var task = activateTasksPool.get();

      this._activatingStack.push(task);

      this._activateNodeRecursively(node, task.preload, task.onLoad, task.onEnable);

      task.preload.invoke();
      task.onLoad.invoke();
      task.onEnable.invoke();

      this._activatingStack.pop();

      activateTasksPool.put(task);
    } else {
      this._deactivateNodeRecursively(node); // remove children of this node from previous activating tasks to debounce
      // (this is an inefficient operation but it ensures general case could be implemented in a efficient way)


      var stack = this._activatingStack;

      for (var i = 0; i < stack.length; i++) {
        var lastTask = stack[i];
        lastTask.preload.cancelInactive(IsPreloadStarted);
        lastTask.onLoad.cancelInactive(IsOnLoadStarted);
        lastTask.onEnable.cancelInactive();
      }
    }

    node.emit('active-in-hierarchy-changed', node);
  },
  activateComp: CC_EDITOR ? function (comp, preloadInvoker, onLoadInvoker, onEnableInvoker) {
    if (!cc.isValid(comp, true)) {
      // destroyed before activating
      return;
    }

    if (cc.engine._isPlaying || comp.constructor._executeInEditMode) {
      if (!(comp._objFlags & IsPreloadStarted)) {
        comp._objFlags |= IsPreloadStarted;

        if (comp.__preload) {
          if (preloadInvoker) {
            preloadInvoker.add(comp);
          } else {
            callPreloadInTryCatch(comp);
          }
        }
      }

      if (!(comp._objFlags & IsOnLoadStarted)) {
        comp._objFlags |= IsOnLoadStarted;

        if (comp.onLoad) {
          if (onLoadInvoker) {
            onLoadInvoker.add(comp);
          } else {
            callOnLoadInTryCatch(comp);
          }
        } else {
          comp._objFlags |= IsOnLoadCalled;

          _onLoadInEditor(comp);
        }
      }
    }

    if (comp._enabled) {
      var deactivatedOnLoading = !comp.node._activeInHierarchy;

      if (deactivatedOnLoading) {
        return;
      }

      cc.director._compScheduler.enableComp(comp, onEnableInvoker);
    }
  } : function (comp, preloadInvoker, onLoadInvoker, onEnableInvoker) {
    if (!cc.isValid(comp, true)) {
      // destroyed before activating
      return;
    }

    if (!(comp._objFlags & IsPreloadStarted)) {
      comp._objFlags |= IsPreloadStarted;

      if (comp.__preload) {
        if (preloadInvoker) {
          preloadInvoker.add(comp);
        } else {
          comp.__preload();
        }
      }
    }

    if (!(comp._objFlags & IsOnLoadStarted)) {
      comp._objFlags |= IsOnLoadStarted;

      if (comp.onLoad) {
        if (onLoadInvoker) {
          onLoadInvoker.add(comp);
        } else {
          comp.onLoad();
          comp._objFlags |= IsOnLoadCalled;
        }
      } else {
        comp._objFlags |= IsOnLoadCalled;
      }
    }

    if (comp._enabled) {
      var deactivatedOnLoading = !comp.node._activeInHierarchy;

      if (deactivatedOnLoading) {
        return;
      }

      cc.director._compScheduler.enableComp(comp, onEnableInvoker);
    }
  },
  destroyComp: CC_EDITOR ? function (comp) {
    // ensure onDisable called
    cc.director._compScheduler.disableComp(comp);

    if (comp.onDestroy && comp._objFlags & IsOnLoadCalled) {
      if (cc.engine._isPlaying || comp.constructor._executeInEditMode) {
        callOnDestroyInTryCatch(comp);
        comp._objFlags &= ~IsOnLoadCalled; // In case call onDestroy twice in undo operation
      }
    }
  } : function (comp) {
    // ensure onDisable called
    cc.director._compScheduler.disableComp(comp);

    if (comp.onDestroy && comp._objFlags & IsOnLoadCalled) {
      comp.onDestroy();
    }
  },
  resetComp: CC_EDITOR && function (comp, didResetToDefault) {
    if (comp.resetInEditor) {
      try {
        comp.resetInEditor(didResetToDefault);
      } catch (e) {
        cc._throw(e);
      }
    }
  }
});
module.exports = NodeActivator;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVuZ2luZS1kZXYvY29jb3MyZC9jb3JlL25vZGUtYWN0aXZhdG9yLmpzIl0sIm5hbWVzIjpbIkNvbXBTY2hlZHVsZXIiLCJyZXF1aXJlIiwiRmxhZ3MiLCJqcyIsImNhbGxlckZ1bmN0b3IiLCJDQ19FRElUT1IiLCJ0cnlDYXRjaEZ1bmN0b3JfRURJVE9SIiwiTUFYX1BPT0xfU0laRSIsIklzUHJlbG9hZFN0YXJ0ZWQiLCJJc09uTG9hZFN0YXJ0ZWQiLCJJc09uTG9hZENhbGxlZCIsIkRlYWN0aXZhdGluZyIsImNhbGxQcmVsb2FkSW5UcnlDYXRjaCIsImNhbGxPbkxvYWRJblRyeUNhdGNoIiwiYyIsIm9uTG9hZCIsImUiLCJjYyIsIl90aHJvdyIsIl9vYmpGbGFncyIsIl9vbkxvYWRJbkVkaXRvciIsImNhbGxPbkRlc3Ryb3lJblRyeUNhdGNoIiwiY2FsbE9uRm9jdXNJblRyeUNhdGNoIiwiY2FsbE9uTG9zdEZvY3VzSW5UcnlDYXRjaCIsIlVuc29ydGVkSW52b2tlciIsIkNsYXNzIiwiTGlmZUN5Y2xlSW52b2tlciIsImFkZCIsImNvbXAiLCJfemVybyIsImFycmF5IiwicHVzaCIsInJlbW92ZSIsImZhc3RSZW1vdmUiLCJjYW5jZWxJbmFjdGl2ZSIsImZsYWdUb0NsZWFyIiwic3RhYmxlUmVtb3ZlSW5hY3RpdmUiLCJpbnZva2UiLCJfaW52b2tlIiwibGVuZ3RoIiwiaW52b2tlUHJlbG9hZCIsIkNDX1NVUFBPUlRfSklUIiwiY3JlYXRlSW52b2tlSW1wbCIsIl9fcHJlbG9hZCIsInVuZGVmaW5lZCIsIml0ZXJhdG9yIiwiaSIsImludm9rZU9uTG9hZCIsImFjdGl2YXRlVGFza3NQb29sIiwiUG9vbCIsImdldCIsImdldEFjdGl2YXRlVGFzayIsInRhc2siLCJfZ2V0IiwicHJlbG9hZCIsIk9uZU9mZkludm9rZXIiLCJvbkVuYWJsZSIsImludm9rZU9uRW5hYmxlIiwiaW52b2tlciIsIl9uZWciLCJfcG9zIiwiX2NvbXBvbmVudENvcnJ1cHRlZCIsIm5vZGUiLCJpbmRleCIsIkNDX0RFViIsImVycm9ySUQiLCJuYW1lIiwiY29uc29sZSIsImxvZyIsIl9yZW1vdmVDb21wb25lbnQiLCJyZW1vdmVBdCIsIl9jb21wb25lbnRzIiwiZW5naW5lIiwiX2lzUGxheWluZyIsImZvY3VzZWQiLCJFZGl0b3IiLCJTZWxlY3Rpb24iLCJjdXJBY3RpdmF0ZSIsInV1aWQiLCJvbkZvY3VzSW5FZGl0b3IiLCJvbkxvc3RGb2N1c0luRWRpdG9yIiwiQ0NfVEVTVCIsIl9TY2VuZSIsIkFzc2V0c1dhdGNoZXIiLCJzdGFydCIsImN0b3IiLCJfYWN0aXZhdGluZ1N0YWNrIiwiTm9kZUFjdGl2YXRvciIsInJlc2V0IiwiX2FjdGl2YXRlTm9kZVJlY3Vyc2l2ZWx5IiwicHJlbG9hZEludm9rZXIiLCJvbkxvYWRJbnZva2VyIiwib25FbmFibGVJbnZva2VyIiwiX2FjdGl2ZUluSGllcmFyY2h5Iiwib3JpZ2luQ291bnQiLCJjb21wb25lbnQiLCJDb21wb25lbnQiLCJhY3RpdmF0ZUNvbXAiLCJfY2hpbGRBcnJpdmFsT3JkZXIiLCJfY2hpbGRyZW4iLCJsZW4iLCJjaGlsZCIsIl9sb2NhbFpPcmRlciIsIl9hY3RpdmUiLCJfb25Qb3N0QWN0aXZhdGVkIiwiX2RlYWN0aXZhdGVOb2RlUmVjdXJzaXZlbHkiLCJhc3NlcnQiLCJfZW5hYmxlZCIsImRpcmVjdG9yIiwiX2NvbXBTY2hlZHVsZXIiLCJkaXNhYmxlQ29tcCIsImFjdGl2YXRlTm9kZSIsImFjdGl2ZSIsInBvcCIsInB1dCIsInN0YWNrIiwibGFzdFRhc2siLCJlbWl0IiwiaXNWYWxpZCIsImNvbnN0cnVjdG9yIiwiX2V4ZWN1dGVJbkVkaXRNb2RlIiwiZGVhY3RpdmF0ZWRPbkxvYWRpbmciLCJlbmFibGVDb21wIiwiZGVzdHJveUNvbXAiLCJvbkRlc3Ryb3kiLCJyZXNldENvbXAiLCJkaWRSZXNldFRvRGVmYXVsdCIsInJlc2V0SW5FZGl0b3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7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RkQsQ0FHQSxPQUFPOUcsQ0FBUCxFQUFVO0FBQ05DLFFBQUFBLEVBQUUsQ0FBQ0MsTUFBSCxDQUFVRixDQUFWO0FBQ0g7QUFDSjtBQUNKO0FBak93QixDQUFULENBQXBCO0FBb09BZ0gsTUFBTSxDQUFDQyxPQUFQLEdBQWlCMUMsYUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxMy0yMDE2IENodWtvbmcgVGVjaG5vbG9naWVzIEluYy5cbiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiAgd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxuIHRvIHVzZSBDb2NvcyBDcmVhdG9yIHNvbGVseSB0byBkZXZlbG9wIGdhbWVzIG9uIHlvdXIgdGFyZ2V0IHBsYXRmb3Jtcy4gWW91IHNoYWxsXG4gIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcbiAgdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuICBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgQ29jb3MgQ3JlYXRvci5cblxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXG4gWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuIHJlc2VydmVzIGFsbCByaWdodHMgbm90IGV4cHJlc3NseSBncmFudGVkIHRvIHlvdS5cblxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gVEhFIFNPRlRXQVJFLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbnZhciBDb21wU2NoZWR1bGVyID0gcmVxdWlyZSgnLi9jb21wb25lbnQtc2NoZWR1bGVyJyk7XG52YXIgRmxhZ3MgPSByZXF1aXJlKCcuL3BsYXRmb3JtL0NDT2JqZWN0JykuRmxhZ3M7XG52YXIganMgPSByZXF1aXJlKCcuL3BsYXRmb3JtL2pzJyk7XG52YXIgY2FsbGVyRnVuY3RvciA9IENDX0VESVRPUiAmJiByZXF1aXJlKCcuL3V0aWxzL21pc2MnKS50cnlDYXRjaEZ1bmN0b3JfRURJVE9SO1xuXG52YXIgTUFYX1BPT0xfU0laRSA9IDQ7XG5cbnZhciBJc1ByZWxvYWRTdGFydGVkID0gRmxhZ3MuSXNQcmVsb2FkU3RhcnRlZDtcbnZhciBJc09uTG9hZFN0YXJ0ZWQgPSBGbGFncy5Jc09uTG9hZFN0YXJ0ZWQ7XG52YXIgSXNPbkxvYWRDYWxsZWQgPSBGbGFncy5Jc09uTG9hZENhbGxlZDtcbnZhciBEZWFjdGl2YXRpbmcgPSBGbGFncy5EZWFjdGl2YXRpbmc7XG5cbnZhciBjYWxsUHJlbG9hZEluVHJ5Q2F0Y2ggPSBDQ19FRElUT1IgJiYgY2FsbGVyRnVuY3RvcignX19wcmVsb2FkJyk7XG52YXIgY2FsbE9uTG9hZEluVHJ5Q2F0Y2ggPSBDQ19FRElUT1IgJiYgZnVuY3Rpb24gKGMpIHtcbiAgICB0cnkge1xuICAgICAgICBjLm9uTG9hZCgpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjYy5fdGhyb3coZSk7XG4gICAgfVxuICAgIGMuX29iakZsYWdzIHw9IElzT25Mb2FkQ2FsbGVkO1xuICAgIF9vbkxvYWRJbkVkaXRvcihjKTtcbn07XG52YXIgY2FsbE9uRGVzdHJveUluVHJ5Q2F0Y2ggPSBDQ19FRElUT1IgJiYgY2FsbGVyRnVuY3Rvcignb25EZXN0cm95Jyk7XG52YXIgY2FsbE9uRm9jdXNJblRyeUNhdGNoID0gQ0NfRURJVE9SICYmIGNhbGxlckZ1bmN0b3IoJ29uRm9jdXNJbkVkaXRvcicpO1xudmFyIGNhbGxPbkxvc3RGb2N1c0luVHJ5Q2F0Y2ggPSBDQ19FRElUT1IgJiYgY2FsbGVyRnVuY3Rvcignb25Mb3N0Rm9jdXNJbkVkaXRvcicpO1xuXG4vLyBmb3IgX19wcmVsb2FkOiB1c2UgaW50ZXJuYWxseSwgbm8gc29ydFxudmFyIFVuc29ydGVkSW52b2tlciA9IGNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBDb21wU2NoZWR1bGVyLkxpZmVDeWNsZUludm9rZXIsXG4gICAgYWRkIChjb21wKSB7XG4gICAgICAgIHRoaXMuX3plcm8uYXJyYXkucHVzaChjb21wKTtcbiAgICB9LFxuICAgIHJlbW92ZSAoY29tcCkge1xuICAgICAgICB0aGlzLl96ZXJvLmZhc3RSZW1vdmUoY29tcCk7XG4gICAgfSxcbiAgICBjYW5jZWxJbmFjdGl2ZSAoZmxhZ1RvQ2xlYXIpIHtcbiAgICAgICAgQ29tcFNjaGVkdWxlci5MaWZlQ3ljbGVJbnZva2VyLnN0YWJsZVJlbW92ZUluYWN0aXZlKHRoaXMuX3plcm8sIGZsYWdUb0NsZWFyKTtcbiAgICB9LFxuICAgIGludm9rZSAoKSB7XG4gICAgICAgIHRoaXMuX2ludm9rZSh0aGlzLl96ZXJvKTtcbiAgICAgICAgdGhpcy5femVyby5hcnJheS5sZW5ndGggPSAwO1xuICAgIH0sXG59KTtcblxudmFyIGludm9rZVByZWxvYWQgPSBDQ19TVVBQT1JUX0pJVCA/XG4gICAgQ29tcFNjaGVkdWxlci5jcmVhdGVJbnZva2VJbXBsKCdjLl9fcHJlbG9hZCgpOycpIDpcbiAgICBDb21wU2NoZWR1bGVyLmNyZWF0ZUludm9rZUltcGwoZnVuY3Rpb24gKGMpIHsgYy5fX3ByZWxvYWQoKTsgfSwgZmFsc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKGl0ZXJhdG9yKSB7XG4gICAgICAgIHZhciBhcnJheSA9IGl0ZXJhdG9yLmFycmF5O1xuICAgICAgICBmb3IgKGl0ZXJhdG9yLmkgPSAwOyBpdGVyYXRvci5pIDwgYXJyYXkubGVuZ3RoOyArK2l0ZXJhdG9yLmkpIHtcbiAgICAgICAgICAgIGFycmF5W2l0ZXJhdG9yLmldLl9fcHJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgfSk7XG52YXIgaW52b2tlT25Mb2FkID0gQ0NfU1VQUE9SVF9KSVQgP1xuICAgIENvbXBTY2hlZHVsZXIuY3JlYXRlSW52b2tlSW1wbCgnYy5vbkxvYWQoKTtjLl9vYmpGbGFnc3w9JyArIElzT25Mb2FkQ2FsbGVkLCBmYWxzZSwgSXNPbkxvYWRDYWxsZWQpIDpcbiAgICBDb21wU2NoZWR1bGVyLmNyZWF0ZUludm9rZUltcGwoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIGMub25Mb2FkKCk7XG4gICAgICAgICAgICBjLl9vYmpGbGFncyB8PSBJc09uTG9hZENhbGxlZDtcbiAgICAgICAgfSxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIElzT25Mb2FkQ2FsbGVkLFxuICAgICAgICBmdW5jdGlvbiAoaXRlcmF0b3IpIHtcbiAgICAgICAgICAgIHZhciBhcnJheSA9IGl0ZXJhdG9yLmFycmF5O1xuICAgICAgICAgICAgZm9yIChpdGVyYXRvci5pID0gMDsgaXRlcmF0b3IuaSA8IGFycmF5Lmxlbmd0aDsgKytpdGVyYXRvci5pKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbXAgPSBhcnJheVtpdGVyYXRvci5pXTtcbiAgICAgICAgICAgICAgICBjb21wLm9uTG9hZCgpO1xuICAgICAgICAgICAgICAgIGNvbXAuX29iakZsYWdzIHw9IElzT25Mb2FkQ2FsbGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcblxuXG52YXIgYWN0aXZhdGVUYXNrc1Bvb2wgPSBuZXcganMuUG9vbChNQVhfUE9PTF9TSVpFKTtcbmFjdGl2YXRlVGFza3NQb29sLmdldCA9IGZ1bmN0aW9uIGdldEFjdGl2YXRlVGFzayAoKSB7XG4gICAgdmFyIHRhc2sgPSB0aGlzLl9nZXQoKSB8fCB7XG4gICAgICAgIHByZWxvYWQ6IG5ldyBVbnNvcnRlZEludm9rZXIoaW52b2tlUHJlbG9hZCksXG4gICAgICAgIG9uTG9hZDogbmV3IENvbXBTY2hlZHVsZXIuT25lT2ZmSW52b2tlcihpbnZva2VPbkxvYWQpLFxuICAgICAgICBvbkVuYWJsZTogbmV3IENvbXBTY2hlZHVsZXIuT25lT2ZmSW52b2tlcihDb21wU2NoZWR1bGVyLmludm9rZU9uRW5hYmxlKVxuICAgIH07XG5cbiAgICAvLyByZXNldCBpbmRleCB0byAtMSBzbyB3ZSBjYW4gc2tpcCBpbnZva2VkIGNvbXBvbmVudCBpbiBjYW5jZWxJbmFjdGl2ZVxuICAgIHRhc2sucHJlbG9hZC5femVyby5pID0gLTE7XG4gICAgdmFyIGludm9rZXIgPSB0YXNrLm9uTG9hZDtcbiAgICBpbnZva2VyLl96ZXJvLmkgPSAtMTtcbiAgICBpbnZva2VyLl9uZWcuaSA9IC0xO1xuICAgIGludm9rZXIuX3Bvcy5pID0gLTE7XG4gICAgaW52b2tlciA9IHRhc2sub25FbmFibGU7XG4gICAgaW52b2tlci5femVyby5pID0gLTE7XG4gICAgaW52b2tlci5fbmVnLmkgPSAtMTtcbiAgICBpbnZva2VyLl9wb3MuaSA9IC0xO1xuXG4gICAgcmV0dXJuIHRhc2s7XG59O1xuXG5mdW5jdGlvbiBfY29tcG9uZW50Q29ycnVwdGVkIChub2RlLCBjb21wLCBpbmRleCkge1xuICAgIGlmIChDQ19ERVYpIHtcbiAgICAgICAgY2MuZXJyb3JJRCgzODE3LCBub2RlLm5hbWUsIGluZGV4KTtcbiAgICAgICAgY29uc29sZS5sb2coJ0NvcnJ1cHRlZCBjb21wb25lbnQgdmFsdWU6JywgY29tcCk7XG4gICAgfVxuICAgIGlmIChjb21wKSB7XG4gICAgICAgIG5vZGUuX3JlbW92ZUNvbXBvbmVudChjb21wKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGpzLmFycmF5LnJlbW92ZUF0KG5vZGUuX2NvbXBvbmVudHMsIGluZGV4KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9vbkxvYWRJbkVkaXRvciAoY29tcCkge1xuICAgIGlmIChjb21wLm9uTG9hZCAmJiAhY2MuZW5naW5lLl9pc1BsYXlpbmcpIHtcbiAgICAgICAgdmFyIGZvY3VzZWQgPSBFZGl0b3IuU2VsZWN0aW9uLmN1ckFjdGl2YXRlKCdub2RlJykgPT09IGNvbXAubm9kZS51dWlkO1xuICAgICAgICBpZiAoZm9jdXNlZCkge1xuICAgICAgICAgICAgY29tcC5vbkZvY3VzSW5FZGl0b3IgJiYgY2FsbE9uRm9jdXNJblRyeUNhdGNoKGNvbXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29tcC5vbkxvc3RGb2N1c0luRWRpdG9yICYmIGNhbGxPbkxvc3RGb2N1c0luVHJ5Q2F0Y2goY29tcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCAhQ0NfVEVTVCApIHtcbiAgICAgICAgX1NjZW5lLkFzc2V0c1dhdGNoZXIuc3RhcnQoY29tcCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSBjbGFzcyB1c2VkIHRvIHBlcmZvcm0gYWN0aXZhdGluZyBhbmQgZGVhY3RpdmF0aW5nIG9wZXJhdGlvbnMgb2Ygbm9kZSBhbmQgY29tcG9uZW50LlxuICovXG5mdW5jdGlvbiBjdG9yICgpIHtcbiAgICAvLyBhIHN0YWNrIG9mIG5vZGUncyBhY3RpdmF0aW5nIHRhc2tzXG4gICAgdGhpcy5fYWN0aXZhdGluZ1N0YWNrID0gW107XG59XG52YXIgTm9kZUFjdGl2YXRvciA9IGNjLkNsYXNzKHtcbiAgICBjdG9yOiBjdG9yLFxuICAgIHJlc2V0OiBjdG9yLFxuXG4gICAgX2FjdGl2YXRlTm9kZVJlY3Vyc2l2ZWx5IChub2RlLCBwcmVsb2FkSW52b2tlciwgb25Mb2FkSW52b2tlciwgb25FbmFibGVJbnZva2VyKSB7XG4gICAgICAgIGlmIChub2RlLl9vYmpGbGFncyAmIERlYWN0aXZhdGluZykge1xuICAgICAgICAgICAgLy8gZW46XG4gICAgICAgICAgICAvLyBGb3JiaWQgcmVhY3RpdmUgdGhlIHNhbWUgbm9kZSBkdXJpbmcgaXRzIGRlYWN0aXZhdGluZyBwcm9jZWR1cmVcbiAgICAgICAgICAgIC8vIHRvIGF2b2lkIGVuZGxlc3MgbG9vcCBhbmQgc2ltcGxpZnkgdGhlIGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgICAgLy8gemg6XG4gICAgICAgICAgICAvLyDlr7nnm7jlkIzoioLngrnogIzoqIDvvIzml6Dms5XmkqTplIDlj43mv4DmtLvvvIzpmLLmraLlj43mv4DmtLsgLSDmv4DmtLsgLSDlj43mv4DmtLvnmoTmrbvlvqrnjq/lj5HnlJ/jgIJcbiAgICAgICAgICAgIC8vIOi/meagt+iuvuiuoeeugOWMluS6huS4gOS6m+W8leaTjueahOWunueOsO+8jOiAjOS4lOWvueiwg+eUqOiAheadpeivtOiDveS/neivgeWPjea/gOa0u+aTjeS9nOmDveiDveaIkOWKn+OAglxuICAgICAgICAgICAgY2MuZXJyb3JJRCgzODE2LCBub2RlLm5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5fYWN0aXZlSW5IaWVyYXJjaHkgPSB0cnVlO1xuXG4gICAgICAgIC8vIGNvbXBvbmVudCBtYXliZSBhZGRlZCBkdXJpbmcgb25FbmFibGUsIGFuZCB0aGUgb25FbmFibGUgb2YgbmV3IGNvbXBvbmVudCBpcyBhbHJlYWR5IGNhbGxlZFxuICAgICAgICAvLyBzbyB3ZSBzaG91bGQgcmVjb3JkIHRoZSBvcmlnaW4gbGVuZ3RoXG4gICAgICAgIHZhciBvcmlnaW5Db3VudCA9IG5vZGUuX2NvbXBvbmVudHMubGVuZ3RoO1xuICAgICAgICAvLyBhY3RpdmF0ZSBjb21wb25lbnRzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JpZ2luQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IG5vZGUuX2NvbXBvbmVudHNbaV07XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgY2MuQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZUNvbXAoY29tcG9uZW50LCBwcmVsb2FkSW52b2tlciwgb25Mb2FkSW52b2tlciwgb25FbmFibGVJbnZva2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF9jb21wb25lbnRDb3JydXB0ZWQobm9kZSwgY29tcG9uZW50LCBpKTtcbiAgICAgICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICAgICAgLS1vcmlnaW5Db3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuX2NoaWxkQXJyaXZhbE9yZGVyID0gbm9kZS5fY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgLy8gYWN0aXZhdGUgY2hpbGRyZW4gcmVjdXJzaXZlbHlcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG5vZGUuX2NoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBub2RlLl9jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGNoaWxkLl9sb2NhbFpPcmRlciA9IChjaGlsZC5fbG9jYWxaT3JkZXIgJiAweGZmZmYwMDAwKSB8IChpICsgMSk7XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGl2YXRlTm9kZVJlY3Vyc2l2ZWx5KGNoaWxkLCBwcmVsb2FkSW52b2tlciwgb25Mb2FkSW52b2tlciwgb25FbmFibGVJbnZva2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBub2RlLl9vblBvc3RBY3RpdmF0ZWQodHJ1ZSk7XG4gICAgfSxcblxuICAgIF9kZWFjdGl2YXRlTm9kZVJlY3Vyc2l2ZWx5IChub2RlKSB7XG4gICAgICAgIGlmIChDQ19ERVYpIHtcbiAgICAgICAgICAgIGNjLmFzc2VydCghKG5vZGUuX29iakZsYWdzICYgRGVhY3RpdmF0aW5nKSwgJ25vZGUgc2hvdWxkIG5vdCBkZWFjdGl2YXRpbmcnKTtcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgX2FjdGl2ZUluSGllcmFyY2h5IGlzIGFsd2F5cyBjaGFuZ2luZyB3aGVuIERlYWN0aXZhdGluZyBmbGFnZ2VkXG4gICAgICAgICAgICBjYy5hc3NlcnQobm9kZS5fYWN0aXZlSW5IaWVyYXJjaHksICdub2RlIHNob3VsZCBub3QgZGVhY3RpdmF0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlLl9vYmpGbGFncyB8PSBEZWFjdGl2YXRpbmc7XG4gICAgICAgIG5vZGUuX2FjdGl2ZUluSGllcmFyY2h5ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gY29tcG9uZW50IG1heWJlIGFkZGVkIGR1cmluZyBvbkVuYWJsZSwgYW5kIHRoZSBvbkVuYWJsZSBvZiBuZXcgY29tcG9uZW50IGlzIGFscmVhZHkgY2FsbGVkXG4gICAgICAgIC8vIHNvIHdlIHNob3VsZCByZWNvcmQgdGhlIG9yaWdpbiBsZW5ndGhcbiAgICAgICAgdmFyIG9yaWdpbkNvdW50ID0gbm9kZS5fY29tcG9uZW50cy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgb3JpZ2luQ291bnQ7ICsrYykge1xuICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IG5vZGUuX2NvbXBvbmVudHNbY107XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuX2NvbXBTY2hlZHVsZXIuZGlzYWJsZUNvbXAoY29tcG9uZW50KTtcblxuICAgICAgICAgICAgICAgIGlmIChub2RlLl9hY3RpdmVJbkhpZXJhcmNoeSkge1xuICAgICAgICAgICAgICAgICAgICAvLyByZWFjdGl2YXRlZCBmcm9tIHJvb3RcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5fb2JqRmxhZ3MgJj0gfkRlYWN0aXZhdGluZztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZS5fY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IG5vZGUuX2NoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLl9hY3RpdmVJbkhpZXJhcmNoeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlYWN0aXZhdGVOb2RlUmVjdXJzaXZlbHkoY2hpbGQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuX2FjdGl2ZUluSGllcmFyY2h5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlYWN0aXZhdGVkIGZyb20gcm9vdFxuICAgICAgICAgICAgICAgICAgICBub2RlLl9vYmpGbGFncyAmPSB+RGVhY3RpdmF0aW5nO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbm9kZS5fb25Qb3N0QWN0aXZhdGVkKGZhbHNlKTtcbiAgICAgICAgbm9kZS5fb2JqRmxhZ3MgJj0gfkRlYWN0aXZhdGluZztcbiAgICB9LFxuXG4gICAgYWN0aXZhdGVOb2RlIChub2RlLCBhY3RpdmUpIHtcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSBhY3RpdmF0ZVRhc2tzUG9vbC5nZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX2FjdGl2YXRpbmdTdGFjay5wdXNoKHRhc2spO1xuXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmF0ZU5vZGVSZWN1cnNpdmVseShub2RlLCB0YXNrLnByZWxvYWQsIHRhc2sub25Mb2FkLCB0YXNrLm9uRW5hYmxlKTtcbiAgICAgICAgICAgIHRhc2sucHJlbG9hZC5pbnZva2UoKTtcbiAgICAgICAgICAgIHRhc2sub25Mb2FkLmludm9rZSgpO1xuICAgICAgICAgICAgdGFzay5vbkVuYWJsZS5pbnZva2UoKTtcblxuICAgICAgICAgICAgdGhpcy5fYWN0aXZhdGluZ1N0YWNrLnBvcCgpO1xuICAgICAgICAgICAgYWN0aXZhdGVUYXNrc1Bvb2wucHV0KHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZGVhY3RpdmF0ZU5vZGVSZWN1cnNpdmVseShub2RlKTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSBmcm9tIHByZXZpb3VzIGFjdGl2YXRpbmcgdGFza3MgdG8gZGVib3VuY2VcbiAgICAgICAgICAgIC8vICh0aGlzIGlzIGFuIGluZWZmaWNpZW50IG9wZXJhdGlvbiBidXQgaXQgZW5zdXJlcyBnZW5lcmFsIGNhc2UgY291bGQgYmUgaW1wbGVtZW50ZWQgaW4gYSBlZmZpY2llbnQgd2F5KVxuICAgICAgICAgICAgdmFyIHN0YWNrID0gdGhpcy5fYWN0aXZhdGluZ1N0YWNrO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBsYXN0VGFzayA9IHN0YWNrW2ldO1xuICAgICAgICAgICAgICAgIGxhc3RUYXNrLnByZWxvYWQuY2FuY2VsSW5hY3RpdmUoSXNQcmVsb2FkU3RhcnRlZCk7XG4gICAgICAgICAgICAgICAgbGFzdFRhc2sub25Mb2FkLmNhbmNlbEluYWN0aXZlKElzT25Mb2FkU3RhcnRlZCk7XG4gICAgICAgICAgICAgICAgbGFzdFRhc2sub25FbmFibGUuY2FuY2VsSW5hY3RpdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBub2RlLmVtaXQoJ2FjdGl2ZS1pbi1oaWVyYXJjaHktY2hhbmdlZCcsIG5vZGUpO1xuICAgIH0sXG5cbiAgICBhY3RpdmF0ZUNvbXA6IENDX0VESVRPUiA/IGZ1bmN0aW9uIChjb21wLCBwcmVsb2FkSW52b2tlciwgb25Mb2FkSW52b2tlciwgb25FbmFibGVJbnZva2VyKSB7XG4gICAgICAgIGlmICghY2MuaXNWYWxpZChjb21wLCB0cnVlKSkge1xuICAgICAgICAgICAgLy8gZGVzdHJveWVkIGJlZm9yZSBhY3RpdmF0aW5nXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNjLmVuZ2luZS5faXNQbGF5aW5nIHx8IGNvbXAuY29uc3RydWN0b3IuX2V4ZWN1dGVJbkVkaXRNb2RlKSB7XG4gICAgICAgICAgICBpZiAoIShjb21wLl9vYmpGbGFncyAmIElzUHJlbG9hZFN0YXJ0ZWQpKSB7XG4gICAgICAgICAgICAgICAgY29tcC5fb2JqRmxhZ3MgfD0gSXNQcmVsb2FkU3RhcnRlZDtcbiAgICAgICAgICAgICAgICBpZiAoY29tcC5fX3ByZWxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZWxvYWRJbnZva2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkSW52b2tlci5hZGQoY29tcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsUHJlbG9hZEluVHJ5Q2F0Y2goY29tcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIShjb21wLl9vYmpGbGFncyAmIElzT25Mb2FkU3RhcnRlZCkpIHtcbiAgICAgICAgICAgICAgICBjb21wLl9vYmpGbGFncyB8PSBJc09uTG9hZFN0YXJ0ZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXAub25Mb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkxvYWRJbnZva2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkxvYWRJbnZva2VyLmFkZChjb21wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxPbkxvYWRJblRyeUNhdGNoKGNvbXApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21wLl9vYmpGbGFncyB8PSBJc09uTG9hZENhbGxlZDtcbiAgICAgICAgICAgICAgICAgICAgX29uTG9hZEluRWRpdG9yKGNvbXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5fZW5hYmxlZCkge1xuICAgICAgICAgICAgdmFyIGRlYWN0aXZhdGVkT25Mb2FkaW5nID0gIWNvbXAubm9kZS5fYWN0aXZlSW5IaWVyYXJjaHk7XG4gICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZWRPbkxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5fY29tcFNjaGVkdWxlci5lbmFibGVDb21wKGNvbXAsIG9uRW5hYmxlSW52b2tlcik7XG4gICAgICAgIH1cbiAgICB9IDogZnVuY3Rpb24gKGNvbXAsIHByZWxvYWRJbnZva2VyLCBvbkxvYWRJbnZva2VyLCBvbkVuYWJsZUludm9rZXIpIHtcbiAgICAgICAgaWYgKCFjYy5pc1ZhbGlkKGNvbXAsIHRydWUpKSB7XG4gICAgICAgICAgICAvLyBkZXN0cm95ZWQgYmVmb3JlIGFjdGl2YXRpbmdcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShjb21wLl9vYmpGbGFncyAmIElzUHJlbG9hZFN0YXJ0ZWQpKSB7XG4gICAgICAgICAgICBjb21wLl9vYmpGbGFncyB8PSBJc1ByZWxvYWRTdGFydGVkO1xuICAgICAgICAgICAgaWYgKGNvbXAuX19wcmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZWxvYWRJbnZva2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWxvYWRJbnZva2VyLmFkZChjb21wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXAuX19wcmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghKGNvbXAuX29iakZsYWdzICYgSXNPbkxvYWRTdGFydGVkKSkge1xuICAgICAgICAgICAgY29tcC5fb2JqRmxhZ3MgfD0gSXNPbkxvYWRTdGFydGVkO1xuICAgICAgICAgICAgaWYgKGNvbXAub25Mb2FkKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uTG9hZEludm9rZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25Mb2FkSW52b2tlci5hZGQoY29tcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21wLm9uTG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICBjb21wLl9vYmpGbGFncyB8PSBJc09uTG9hZENhbGxlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wLl9vYmpGbGFncyB8PSBJc09uTG9hZENhbGxlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcC5fZW5hYmxlZCkge1xuICAgICAgICAgICAgdmFyIGRlYWN0aXZhdGVkT25Mb2FkaW5nID0gIWNvbXAubm9kZS5fYWN0aXZlSW5IaWVyYXJjaHk7XG4gICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZWRPbkxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5fY29tcFNjaGVkdWxlci5lbmFibGVDb21wKGNvbXAsIG9uRW5hYmxlSW52b2tlcik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVzdHJveUNvbXA6IENDX0VESVRPUiA/IGZ1bmN0aW9uIChjb21wKSB7XG4gICAgICAgIC8vIGVuc3VyZSBvbkRpc2FibGUgY2FsbGVkXG4gICAgICAgIGNjLmRpcmVjdG9yLl9jb21wU2NoZWR1bGVyLmRpc2FibGVDb21wKGNvbXApO1xuXG4gICAgICAgIGlmIChjb21wLm9uRGVzdHJveSAmJiAoY29tcC5fb2JqRmxhZ3MgJiBJc09uTG9hZENhbGxlZCkpIHtcbiAgICAgICAgICAgIGlmIChjYy5lbmdpbmUuX2lzUGxheWluZyB8fCBjb21wLmNvbnN0cnVjdG9yLl9leGVjdXRlSW5FZGl0TW9kZSkge1xuICAgICAgICAgICAgICAgIGNhbGxPbkRlc3Ryb3lJblRyeUNhdGNoKGNvbXApO1xuICAgICAgICAgICAgICAgIGNvbXAuX29iakZsYWdzICY9IH5Jc09uTG9hZENhbGxlZDsgIC8vIEluIGNhc2UgY2FsbCBvbkRlc3Ryb3kgdHdpY2UgaW4gdW5kbyBvcGVyYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gOiBmdW5jdGlvbiAoY29tcCkge1xuICAgICAgICAvLyBlbnN1cmUgb25EaXNhYmxlIGNhbGxlZFxuICAgICAgICBjYy5kaXJlY3Rvci5fY29tcFNjaGVkdWxlci5kaXNhYmxlQ29tcChjb21wKTtcblxuICAgICAgICBpZiAoY29tcC5vbkRlc3Ryb3kgJiYgKGNvbXAuX29iakZsYWdzICYgSXNPbkxvYWRDYWxsZWQpKSB7XG4gICAgICAgICAgICBjb21wLm9uRGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlc2V0Q29tcDogQ0NfRURJVE9SICYmIGZ1bmN0aW9uIChjb21wLCBkaWRSZXNldFRvRGVmYXVsdCkge1xuICAgICAgICBpZiAoY29tcC5yZXNldEluRWRpdG9yKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbXAucmVzZXRJbkVkaXRvcihkaWRSZXNldFRvRGVmYXVsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNjLl90aHJvdyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5vZGVBY3RpdmF0b3I7XG4iXSwic291cmNlUm9vdCI6Ii8ifQ==
"use strict";const e=require("../../../share/@base/electron-base-ipc"),i=require("../../../share/network");module.exports=new class{constructor(){this.isOnline=!1,e.broadcast("editor-lib-network:flag-changed","isOnline",this.isOnline),this.ipList=i.queryIpList(),this.ip=this.ipList[0]||"127.0.0.1"}async update(){return this.isOnline=await new Promise(e=>{i.canConnectPassport(e)}),e.broadcast("editor-lib-network:flag-changed","isOnline",this.isOnline),this.isOnline}},e.on("editor-lib-network:query-flag",(e,i)=>module.exports[i]),e.on("editor-lib-network:call",async(e,i,t)=>{if(!module.exports[i])return e.reply(new Error(`The network did not find the specified interface: ${i}`),null),void 0;try{let n=await module.exports[i](...t);e.reply(null,n)}catch(i){e.reply(i,null)}});
"use strict";let t;try{t=Editor.require("unpack://engine-dev/cocos/animation/motion-path-helper").Bezier}catch(o){t=Editor.require("unpack://engine-dev/cocos2d/animation/motion-path-helper").Bezier}let o=cc.v2;function n(t,n,e){this.pos=t?t.clone():o(),this.inControl=n||this.pos.clone(),this.outControl=e||this.pos.clone(),this.keyframe=null}n.prototype.clone=function(){return new n(this.pos,this.inControl,this.outControl)},n.prototype.getValue=function(){return[this.pos.x,this.pos.y,this.inControl.x,this.inControl.y,this.outControl.x,this.outControl.y]},module.exports={Segment:n,getNearestParameter:function(o,n,e){let r=new t;r.start=o.pos,r.end=n.pos,r.startCtrlPoint=o.outControl,r.endCtrlPoint=n.inControl;let i=null,s=1/0,l=0;function u(t){if(t>=0&&t<=1){let o=r.getPoint(t),n=function(t,o){let n=t.x-o.x,e=t.y-o.y;return Math.sqrt(n*n+e*e)}(e,o);if(n<s)return s=n,l=t,i=o,!0}}for(let t=0;t<=100;t++)u(t/100);let p=.005;for(;p>4e-7;)u(l-p)||u(l+p)||(p/=2);return{t:l,dist:s,pos:i}},createSegmentWithNearset:function(t){let e=t.t,r=t.seg1.segment,i=t.seg2.segment,s=r.pos.x,l=r.pos.y,u=r.outControl.x,p=r.outControl.y,c=i.inControl.x,h=i.inControl.y,C=1-e,a=C*s+e*u,y=C*l+e*p,f=C*u+e*c,g=C*p+e*h,m=C*c+e*i.pos.x,x=C*h+e*i.pos.y,d=C*a+e*f,P=C*y+e*g,k=C*f+e*m,q=C*g+e*x,v=C*d+e*k,w=C*P+e*q;r.outControl=o(a,y),i.inControl=o(m,x);let z=new n;return z.pos=o(v,w),z.inControl=o(d,P),z.outControl=o(k,q),z}};
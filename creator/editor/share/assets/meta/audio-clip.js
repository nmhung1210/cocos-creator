"use strict";const e=require("./native-asset"),{EventEmitter:t}=require("events"),o=new t,r=5e3;let i,n;function d(){n&&(clearTimeout(n),n=void 0)}let s=function(){let e=!1;return function(t){i?t(i):(o.once("worker-spawned",t),e||(e=!0,Editor.App.spawnWorker("app://editor/page/worker/load-audio-duration.js",(t,r)=>{e=!1,i=t,o.emit("worker-spawned",t)})))}}();module.exports=class extends e{constructor(e){super(e),this.downloadMode=0,this.duration=0}static version(){return"2.0.1"}static defaultType(){return"audio-clip"}createAsset(){let e=new cc.AudioClip;return e.loadMode=this.downloadMode,e.duration=this.duration,e}import(e,t){d(),function(e,t){s(o=>{o.send("app:load-audio-duration",e,t)})}(e,(o,s)=>{if(function(e){d(),n=setTimeout(()=>{i&&(i.close(),i=void 0)},e)}(r),o)return t(o);this.duration=s,super.import(e,t)})}};
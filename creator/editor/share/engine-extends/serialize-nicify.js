var e=function(e){var r=e[0];if(void 0!==r){var i,s,n,o,f=new function(){this.objList=[],this.keyList=[],this.referncedIDList=[],this.referencedCounts=[],this.temporaryDataList=[]};f.referencedCounts=new Array(e.length);var a=e.slice();t(r,e,f);var c=0;for(c=0;c<f.temporaryDataList.length;c++)delete f.temporaryDataList[c]._iN$t;for(c=0;c<f.objList.length;c++)if(s=f.objList[c],i=f.referncedIDList[c],n=f.keyList[c],o=a[i],!(f.referencedCounts[i]>1)){s[n]=o;var d=e.indexOf(o);e.splice(d,1)}for(c=0;c<f.objList.length;c++)if(i=f.referncedIDList[c],n=f.keyList[c],s=f.objList[c],f.referencedCounts[i]>1){o=a[i];var _=e.indexOf(o);s[n].__id__=_}}},t=function(e,t,i){if("object"==typeof e){if(e._iN$t=!0,i.temporaryDataList.push(e),e.content){var s=e.__type__&&cc.js._getClassById(e.__type__);if(s&&s.prototype._serialize)return}var n;if(Array.isArray(e))for(var o=0;o<e.length;o++)(n=e[o])&&r(n,o,e,t,i);else for(var f in e)(n=e[f])&&r(n,f,e,t,i)}},r=function(e,r,i,s,n){var o=e.__id__,f=void 0!==o;f&&(e=s[o],-1!==n.referncedIDList.indexOf(o)?n.referencedCounts[o]++:n.referencedCounts[o]=1,n.referncedIDList.push(o),n.keyList.push(r),n.objList.push(i)),!e._iN$t?t(e,s,n):f&&n.referencedCounts[o]++};CC_TEST&&(cc._Test.nicifySerialized=e),module.exports=e;
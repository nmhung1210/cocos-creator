"use strict";const e=require("fs"),t=require("path"),r=require("../utils/cache"),i=require("../utils/operation"),o=require("../utils/event"),n=require("../utils/communication");exports.template=e.readFileSync(t.join(__dirname,"../template/tools.html"),"utf-8"),exports.props=["filter"],exports.data=function(){return{input:!1,foldState:r.foldState}},exports.created=function(){o.on("fold-state-changed",e=>{this.foldState=e})},exports.methods={t:e=>Editor.T(e),refresh(){o.emit("refresh-node-tree")},createPopup(e){n.popup("create",{x:e.x,y:e.y+5})},searchPopup(){n.popup("search",{x:event.x,y:event.y+5})},changeFold(){let e=r.queryNodes(),t=!e.some(e=>!(!e.children||0===e.children.length)&&e.fold);e.forEach(e=>{e.children.length>0&&i.fold(e.id,t)}),this.foldState=!this.foldState},onFilterChange(e){let t=e.target.value;o.emit("filter-changed",t)},onInputnFocus(){this.input=!0},onInputBlur(){this.input=!1},emptyFilter(){r.restoreShowIndex(),o.emit("filter-changed",""),o.emit("empty-filter")}};
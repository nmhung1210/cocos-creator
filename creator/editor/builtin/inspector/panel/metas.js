"use strict";const e=["material"],_=["__assetType__","__name__","__path__","__url__","__mtime__","__dirty__"];let t=[];exports.add=function(e){t.push(e)},exports.get=function(){if(!t||0===t.length)return null;const n=t.length>1;let s=JSON.parse(JSON.stringify(t[t.length-1]));if(t.every(_=>e.includes(_.__assetType__)))return n?{__assetType__:"unknown",__name__:`${t.length} ${s.__assetType__}`,multi:n}:(s.multi=!1,s.multiValues=[],s);if(!t.every(e=>s.__assetType__===e.__assetType__))return{__assetType__:"unknown",__name__:Editor.i18n.t("INSPECTOR.selections",{num:t.length}),multi:n};let a={};return Object.keys(s).forEach(e=>{_.includes(e)||(a[e]=t.map(_=>_[e]))}),s.multiValues=a,s.metas=t,s.multi=n,n&&(s.__name__=`${t.length} ${s.__assetType__}s`),s},exports.syncData=function(_,n,s){if(t.every(_=>e.includes(_.__assetType__)))return;let a,r,l,i=n.split(".").filter(Boolean),u=_;for(let e=0;e<i.length;e++){if(a=u,r=i[e],!a){Editor.warn(`Sync meta data error, path: ${n}, target: ${_.__name__}`);break}u=l=a[r]}a[r]=s},exports.change=function(e,_){t.forEach(t=>{this.syncData(t,e,_)})},exports.clear=function(){t.length=0};
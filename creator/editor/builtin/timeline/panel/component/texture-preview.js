"use strict";const t=require("fire-fs"),e=require("path"),{promisify:r}=require("util");exports.template=t.readFileSync(e.join(__dirname,"../template/texture-preview.html"),"utf-8"),exports.props=["key"],exports.watch={key(){try{this.updateTexture()}catch(t){Editor.error(t)}}},exports.data=function(){return{url:""}},exports.methods={t:Editor.T,async updateTexture(){if(!this.key||!this.$el)return;let t=await r(Editor.assetdb.queryMetaInfoByUuid)(this.key.source._uuid);var e=JSON.parse(t.json);this.url=function(t){let e,r,i=`thumbnail://${t.rawTextureUuid}?32`,u=t.trimX,s=t.trimY,o=0;t.rotated?(e=t.height,r=t.width,o=270):(e=t.width,r=t.height);let a=`&x=${u}&y=${s}&w=${e}&h=${r}`;return 0!==o&&(a+=`&rotate=${o}`),i+=a}(e)}},exports.created=function(){this.updateTexture()},exports.compiled=function(){this.updateTexture()};
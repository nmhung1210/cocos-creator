"use strict";require("fire-path");const e=require("electron"),t=require("@base/electron-profile"),{EventEmitter:r}=require("events"),{checkMigrate:o,adaptProfile:l,url2profile:a}=require("./utils"),i=e.remote.getGlobal("__Profile__");t.on("change",e=>{let t=a[e];t&&t.emit("changed")});module.exports=new class extends r{load(e,r){let n,s=null;try{if(n=a[e])return n;o(e,Editor.remote.App.home),(n=t.load(e))&&(n=l(n),Object.defineProperty(n,"data",{get(){return console.warn(`'${this._type}/${this._file} data' has been deprecated, please use 'profile.get'`),i.getData(this._type,this._file)}})),a[e]=n}catch(e){s=e,console.error(e)}return r&&(console.warn("'Editor.Profile.load' async changed to sync, don't need callback."),r(s,n)),n}};
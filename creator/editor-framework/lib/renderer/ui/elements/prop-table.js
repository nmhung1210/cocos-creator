"use strict";const e=require("./utils"),t=require("../utils/resource-mgr"),l=require("../utils/dom-utils"),i=require("../utils/focus-mgr"),n=require("./hint"),o=require("../behaviors/disable"),s=require("../behaviors/readonly"),r=require("../../../share/js-utils");let d=null;function u(e){let t=document.createElement("th");t.classList.add("wrapper");let l=document.importNode(e,!0);return t.appendChild(l),t}module.exports=e.registerElement("ui-prop-table",{style:t.getResource("theme://elements/prop-table.css"),template:"\n    <table></table>\n  ",$:{table:"table"},ready(){let e=this.querySelector("template");if(e&&e.content){e.content.querySelectorAll("ui-row").forEach(e=>{let t=e.getAttribute("name"),a=e.getAttribute("tooltip"),c=function(e,t){let n=document.createElement("tr");e&&n.setAttribute("disabled","");t&&n.setAttribute("readonly","");return r.addon(n,o),r.addon(n,s),n._initDisable(!0),n._initReadonly(!0),n.addEventListener("focus-changed",e=>{e.detail.focused?n.setAttribute("selected",""):n.removeAttribute("selected")}),n.addEventListener("mouseover",e=>{e.stopImmediatePropagation(),n.setAttribute("hovering","")}),n.addEventListener("mouseout",e=>{e.stopImmediatePropagation(),n.removeAttribute("hovering")}),n.addEventListener("mousedown",e=>{l.acceptEvent(e),i._setFocusElement(null);let t=i._getFirstFocusableFrom(n,!0);t&&i._setFocusElement(t)}),n}(null!==e.getAttribute("disabled"),null!==e.getAttribute("readonly")),p=function(e,t){let l=document.createElement("th");return l.classList.add("label"),l.innerText=e,l.addEventListener("mouseenter",()=>{t&&function(e,t){d||((d=new n(t)).style.display="none",d.style.position="absolute",d.style.maxWidth="200px",d.style.zIndex="999",d.classList="bottom shadow",d.position="20px",document.body.appendChild(d)),d.innerText=t,e._showTooltipID=setTimeout(()=>{e._showTooltipID=null,d.style.display="block";let t=e.getBoundingClientRect(),l=d.getBoundingClientRect();d.style.left=t.left-10,d.style.top=t.top-l.height-10},200)}(l,t)}),l.addEventListener("mouseleave",()=>{t&&function(e){clearTimeout(e._showTooltipID),e._showTooltipID=null,d&&(d.style.display="none")}(l)}),l}(t,a);c.appendChild(p);for(let t=0;t<e.children.length;++t){let l=u(e.children[t]);c.appendChild(l)}this.$table.appendChild(c),c._disabled&&l.walk(c,{excludeSelf:!0},e=>(e._setIsDisabledAttribute&&e._setIsDisabledAttribute(!0),!1)),c._readonly&&l.walk(c,{excludeSelf:!0},e=>(e._setIsReadonlyAttribute&&e._setIsReadonlyAttribute(!0),!1))})}}});